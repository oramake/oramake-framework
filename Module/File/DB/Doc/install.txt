title: Установка

group: Общие замечания

Параметры установки:
INSTALL_VERSION               - устанавливаемая версия схемы ( Last при
                                первоначальной установке или номер при
                                обновлении, например 1.1.0)
LOAD_OPERATORID               - логин и пароль оператора, выполняющего установку
                                ( формат: login/password)
LOAD_USERID                   - основная схема для установки
                                ( формат: username/password@dbName)
BATCH_WAIT                    - ожидание окончания работы батчей в секундах
TO_USERNAME                   - имя пользователя, которому выдаются права

Используемые настроечные параметры:
- перечислены в <pkg_FileBase::Наименования настроечных параметров>.

Перед установкой модуль останавливает выполнение заданий в БД ( см.
<Install/Config/stop-batches.sql>), а после успешной установки восстанавливает
их выполнение ( см. <Install/Config/resume-batches.sql>).
При повторном запуске установки возможно появление сообщения
"Warning. There's a non-zero value saved in view...",
которое говорит о том, что используется значение параметра JOB_QUEUE_PROCESSES,
запомненного при предыдущем запуске установки.

В случае ошибок при установке:

- ошибка "Batch stop waiting timed out"

В зависимости от работающих батчей, есть вариант увеличить BATCH_WAIT.
Пример запуска установки со временем ожидания 1000 секунд
( ??? нужно заменить на актуальные значения):

(code)

$ make install INSTALL_VERSION=??? LOAD_USERID=???/???@??? LOAD_OPERATORID=???/??? BATCH_WAIT=1000

(end)

- остальные ошибки

Команда для восстановления выполнения заданий
в БД ( после прерывания установки):

(code)

$ make install-after LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(end)



group: Первоначальная установка

Предварительные требования: в БД должна быть настроена поддержка Java.

Порядок установки
( "???" нужно заменить на реальные значения):

- выдача дополнительных прав пользователю, в схему которого будет
  устанавливаться модуль

(code)

$ make grant LOAD_USERID=sys/???@??? GRANT_SCRIPT=sys-privs TO_USERNAME=??? LOAD_OPERATORID=???/???

(end)

- установка модуля

(code)

$ make install INSTALL_VERSION=Last LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(end)



group: Удаление модуля из БД

Команда для удаления модуля
из БД:

(code)

$ make uninstall INSTALL_VERSION=Last LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(end)
