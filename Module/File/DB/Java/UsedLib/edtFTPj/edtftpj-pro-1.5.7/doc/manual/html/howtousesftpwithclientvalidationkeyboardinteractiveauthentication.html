<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:mshelp="http://msdn.microsoft.com/mshelp">
<head>
  <title>How to use SFTP (with client validation -
keyboard-interactive authentication)</title>


  <meta name="generator" content="HelpMaker.net">

  <meta name="keywords" content="Chapter 3,">

  <link rel="stylesheet" type="text/css" href="ms-help://Hx/HxRuntime/HxLink.css">

  <link rel="stylesheet" type="text/css" href="ms-help://Hx/HxRuntime/HxLinkDefault.css">

</head>
<body style="background-color: rgb(255, 255, 255);">
    <table cellpadding="0" cellspacing="0" width="100%">
      <tr>
        <td style="background-image:url(../images/bk_tl.jpg); background-repeat: repeat-x"><img src="../images/space.gif" width=4 height=4></td>
        <td style="background-image:url(../images/bk_t.jpg); background-repeat: repeat-x"><img src="../images/space.gif" width=4 height=4></td>
        <td style="background-image:url(../images/bk_tr.jpg); background-repeat: repeat-x"><img src="../images/space.gif" width=4 height=4></td>
      </tr>
      <tr>
        <td width="4" style="background-image:url(../images/bk_l.jpg); background-repeat: repeat-y"><img src="../images/space.gif" width=4 height=4></td>
        <td width="100%" style="font-family: sans-serif; font-weight: bold; font-size: 14pt; background-image:url(../images/bk_c.jpg); background-repeat: repeat">
          &nbsp;How to use SFTP (with client validation - keyboard-interactive authentication)
        </td>
        <td width="4" style="background-image:url(../images/bk_r.jpg); background-repeat: repeat-y"><img src="../images/space.gif" width=4 height=4></td>
      </tr>
      <tr>
        <td height="4" style="background-image:url(../images/bk_bl.jpg); background-repeat: repeat-x"><img src="../images/space.gif" width=4 height=4></td>
        <td style="background-image:url(../images/bk_b.jpg); background-repeat: repeat-x"><img src="../images/space.gif" width=4 height=4></td>
        <td style="background-image:url(../images/bk_br.jpg); background-repeat: repeat-x"><img src="../images/space.gif" width=4 height=4></td>
      </tr>
    </table>
<br>
<div align="left"><font face="Arial"><span style="font-size: 10pt;">The topic </span></font><a href="howtousesftpwithclientvalidation.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>How to use SFTP (with
client validation - password authentication)</u></span></font></a><font face="Arial"><span style="font-size: 10pt;">
discusses the
simplest form of client authentication, via password.</span></font></div>

<div align="left"><br>

</div>


<div align="left"><font face="Arial"><span style="font-size: 10pt;">Keyboard-interactive (KBI)
authentication is the most recently introduced form of
authentication for SSH. It involves the server sending prompts to the
client, which the client
must respond to correctly to be authenticated. Its purpose is permit
the client to support a
variety of authentication mechanisms without knowing anything about
them.</span></font></div>

<div align="left"><br>

</div>


<div align="left"><font face="Arial"><span style="font-size: 10pt;">edtFTPj/PRO's implementation of KBI
authentication relies on the programmer knowing the
prompts in advance. The prompts are easily determined by connecting to
the server via a
command-line ssh client, using KBI.</span></font></div>

<div align="left"><br>

</div>


<div align="left"><font face="Arial"><span style="font-size: 10pt;">In edtFTPj/PRO, when the server
sends its list of prompts that require responses, the client
searches the list of loaded </span></font><a href="../../api/com/enterprisedt/net/ftp/ssh/SSHAuthPrompt.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>SSHAuthPrompts </u></span></font></a><font face="Arial"><span style="font-size: 10pt;">for
each prompt. It then sends the set responses
back to the server. If the expected responses are supplied, the
authentication succeeds.</span></font></div>

<div align="left"><br>

</div>


<div align="left"><font face="Arial"><span style="font-size: 10pt;">If the prompt is for a user's
password, it will typically be something like "</span></font><font face="Lucida Console"><span style="font-size: 10pt;">Password:</span></font><font face="Arial"><span style="font-size: 10pt;">".
The </span></font><a href="../../api/com/enterprisedt/net/ftp/ssh/SSHPasswordPrompt.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>SSHPasswordPrompt </u></span></font></a><font face="Arial"><span style="font-size: 10pt;">class
is supplied to make it easier to set up a password prompt. </span></font></div>

<div align="left"><br>

</div>


<div align="left"><font face="Arial"><span style="font-size: 10pt;">Often, the password prompt is the
only prompt required. Of course, there are other prompts
that could be requested, such as an RSA SecurID token. Some servers
have a number of
submethods that can be configured for KBI. </span></font></div>

<div align="left"><br>

</div>


<div align="left"><font face="Arial"><span style="font-size: 10pt;">An example of using </span></font><a href="../../api/com/enterprisedt/net/ftp/ssh/SSHPasswordPrompt.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>SSHPasswordPrompt</u></span></font></a><font face="Arial"><span style="font-size: 10pt;"> is
shown below</span></font></div>

<div align="left"><br>

</div>

<div align="left"><font color="#010101" face="Courier New"><span style="font-size: 10pt;">&nbsp;&nbsp;&nbsp;
</span></font><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;">SSHAuthPrompt[] prompts = new
SSHAuthPrompt[1];</span></font><font face="Lucida Console" size="1"><span style="font-size: 8pt;"></span></font></div>

<div align="left"><font face="Lucida Console" size="1"><span style="font-size: 8pt;">&nbsp;&nbsp;&nbsp;
</span></font><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;">&nbsp;prompts[0] = new
SSHPasswordPrompt(password);</span></font><font face="Lucida Console" size="1"><span style="font-size: 8pt;"></span></font></div>

<div align="left"><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;">&nbsp;&nbsp;&nbsp;
&nbsp;ftp.setAuthentication(username, prompts);</span></font></div>

<div align="left"><br>

</div>


<div align="left"><font face="Arial"><span style="font-size: 10pt;">Sometimes servers will allow for
failure of one type of KBI prompt (e.g. SecurID), responding
to another attempt with a different prompt (such as for password).
edtFTPj/PRO makes a
second KBI authentication attempt automatically if the first attempt
fails.</span></font></div>

<div align="left"><br>

</div>


<div align="left"><font face="Arial"><span style="font-size: 10pt;">The other authentication method,
public key authentication, is discussed in </span></font><a href="howtousesftpwithclientvalidationpublickeyauthentication.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>How to use SFTP
(with client validation - public key authentication)</u></span></font></a><font face="Arial"><span style="font-size: 10pt;">.</span></font></div>

<div align="left"></div>

</body>
</html>
