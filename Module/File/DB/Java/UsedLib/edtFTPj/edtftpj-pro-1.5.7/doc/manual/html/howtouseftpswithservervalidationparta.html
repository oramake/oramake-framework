<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:mshelp="http://msdn.microsoft.com/mshelp">
<head>



  


  
  
  
  
  
  <title>How to use FTPS (with server validation - part A)</title>
  <meta name="generator" content="HelpMaker.net">




  
  
  
  <meta name="keywords" content="Chapter 3,">




  
  
  
  <link rel="stylesheet" type="text/css" href="ms-help://Hx/HxRuntime/HxLink.css">




  
  
  
  <link rel="stylesheet" type="text/css" href="ms-help://Hx/HxRuntime/HxLinkDefault.css">
</head>


<body style="background-color: rgb(255, 255, 255);">

    
<table cellpadding="0" cellspacing="0" width="100%">

      <tbody>
    <tr>

        <td style="background-image: url(../images/bk_tl.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>

        <td style="background-image: url(../images/bk_t.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>

        <td style="background-image: url(../images/bk_tr.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>

      </tr>

      <tr>

        <td style="background-image: url(../images/bk_l.jpg); background-repeat: repeat-y;" width="4"><img src="../images/space.gif" height="4" width="4"></td>

        <td style="font-family: sans-serif; font-weight: bold; font-size: 14pt; background-image: url(../images/bk_c.jpg); background-repeat: repeat;" width="100%">
          &nbsp;How to use FTPS (with server validation - part A)
        </td>

        <td style="background-image: url(../images/bk_r.jpg); background-repeat: repeat-y;" width="4"><img src="../images/space.gif" height="4" width="4"></td>

      </tr>

      <tr>

        <td style="background-image: url(../images/bk_bl.jpg); background-repeat: repeat-x;" height="4"><img src="../images/space.gif" height="4" width="4"></td>

        <td style="background-image: url(../images/bk_b.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>

        <td style="background-image: url(../images/bk_br.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>

      </tr>

    
  </tbody>
</table>

<br>

<div align="left"><font color="#010101" face="Arial"><span style="font-size: 10pt;">The
topic </span></font><a href="howtouseftpsintroduction.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>How
to use FTPS (introduction)</u></span></font></a><font color="#010101" face="Arial"><span style="font-size: 10pt;"> describes
the FTPS features of </span></font><a href="ms-help://edtFTPnetPRO/edtftpnetpro-api/EnterpriseDT.Net.Ftp.SecureFTPConnection.html"><font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font></a><font color="#010101" face="Arial"><a href="../../api/com/enterprisedt/net/ftp/ssl/SSLFTPClient.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>SSLFTPClient</u></span></font></a></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">.</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">&nbsp; This topic demonstrates
the use of FTPS with
server validation in the
case where the server certificate's CommonName (CN) is the same as its
address.</span></font><br>




</div>








<font color="#ff0000" face="Arial"><span style="font-size: 10pt;"></span></font><br>








<div align="left"><font color="#010101" face="Arial"><span style="font-size: 10pt;">Firstly,
the root certificate (</span></font><font color="#010101" face="Arial">the certificate of the&nbsp;</font><font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><a href="certificatesandcertificateauthoritiescas.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>CA</u></span></font></a><font color="#010101" face="Arial"> that issued the
certificate) &nbsp;must be loaded. Alternatively, the&nbsp;</font><font color="#010101" face="Arial"><span style="font-size: 10pt;">server certificate itself can be
loaded. The PEM format is widely used, and loading a
PEM&nbsp;certificate is shown below:</span></font></div>




<div style="margin-left: 13mm; margin-right: 0mm; text-indent: 0mm;" align="left"><font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><br>




<font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;"></span></font><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;">ftp.<a href="../../api/com/enterprisedt/net/ftp/ssl/SSLFTPClient.html#getRootCertificateStore%28%29">getRootCertificateStore</a>().importPEMFile(certificateFile);<br>




</span></font><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;"></span></font></div>




<div align="left"><br>




</div>




<div align="left"><font color="#010101" face="Arial"><span style="font-size: 10pt;">
As in <a href="howtouseftpswithoutservervalidation.html"><u>FTPS without server
validation</u></a>, connect() must then be called, followed by
auth():</span></font>
</div>




<div style="margin-left: 13mm; margin-right: 0mm; text-indent: 0mm;" align="left"><font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><br>




<font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;"></span></font><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;">ftp.<a href="../../api/com/enterprisedt/net/ftp/ssl/SSLFTPClient.html#connect%28%29">connect</a>();<br>




ftp.<a href="../../api/com/enterprisedt/net/ftp/ssl/SSLFTPClient.html#auth%28java.lang.String%29">auth</a>(SSLFTPClient.<a href="../../api/com/enterprisedt/net/ftp/ssl/SSLFTPClient.html#AUTH_TLS">AUTH_TLS</a>);</span></font><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;"><br>




<br>




</span></font></div>




<div align="left"><font color="#010101" face="Arial"><span style="font-size: 10pt;">While
the secure connection is being established the CommonName (CN) of the
server
certificate is checked against the hostname of the server. If this
check fails,&nbsp;the connection will fail.&nbsp; Please refer
to </span></font><a href="howtouseftpswithservervalidationpartb.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>How to use
FTPS (with server validation - part B)</u></span></font></a><font color="#010101" face="Arial"><span style="font-size: 10pt;"> and </span></font><a href="howtouseftpswithservervalidationpartc.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>How to use FTPS (with
server validation - part C)</u></span></font></a><font color="#010101" face="Arial"><span style="font-size: 10pt;">
for more details on this issue.&nbsp;</span></font></div>




<div align="left"><br>




</div>






<div align="left"></div>





</body>
</html>
