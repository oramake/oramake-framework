<html xmlns:MSHelp="http://msdn.microsoft.com/mshelp"><head>
   <title>FTPS Commands</title>
   <meta name="generator"  content="HelpMaker.net" >
   <meta name="keywords"  content="Chapter 2," ><LINK REL="stylesheet" TYPE="text/css" HREF="ms-help://Hx/HxRuntime/HxLink.css"><LINK REL="stylesheet" TYPE="text/css" HREF="ms-help://Hx/HxRuntime/HxLinkDefault.css"></head>
<body bgcolor="FFFFFF" >
    <table cellpadding="0" cellspacing="0" width="100%">
      <tr>
        <td style="background-image:url(../images/bk_tl.jpg); background-repeat: repeat-x"><img src="../images/space.gif" width=4 height=4></td>
        <td style="background-image:url(../images/bk_t.jpg); background-repeat: repeat-x"><img src="../images/space.gif" width=4 height=4></td>
        <td style="background-image:url(../images/bk_tr.jpg); background-repeat: repeat-x"><img src="../images/space.gif" width=4 height=4></td>
      </tr>
      <tr>
        <td width="4" style="background-image:url(../images/bk_l.jpg); background-repeat: repeat-y"><img src="../images/space.gif" width=4 height=4></td>
        <td width="100%" style="font-family: sans-serif; font-weight: bold; font-size: 14pt; background-image:url(../images/bk_c.jpg); background-repeat: repeat">
          &nbsp;FTPS Commands
        </td>
        <td width="4" style="background-image:url(../images/bk_r.jpg); background-repeat: repeat-y"><img src="../images/space.gif" width=4 height=4></td>
      </tr>
      <tr>
        <td height="4" style="background-image:url(../images/bk_bl.jpg); background-repeat: repeat-x"><img src="../images/space.gif" width=4 height=4></td>
        <td style="background-image:url(../images/bk_b.jpg); background-repeat: repeat-x"><img src="../images/space.gif" width=4 height=4></td>
        <td style="background-image:url(../images/bk_br.jpg); background-repeat: repeat-x"><img src="../images/space.gif" width=4 height=4></td>
      </tr>
    </table>
<br>
<p align="justify" ><font face="Arial" ><span style="font-size:10pt" >Although RFC2228 defines eight new commands, the TLS implementation uses just three of
these, AUTH, PBSZ, and PROT.&nbsp; In fact, one of these, PBSZ, appears to be redundant and is
probably included only for the purpose of satisfying the RFC specification.</span></font><font color="#010101" ></font><br><p align="justify" ><font color="#010101" ></font><br><font face="Arial"  size="4" ><span style="font-size:14pt" ><b>AUTH (AUTHentication)</b></span></font><font color="#010101" ></font><br><p align="justify" ><font face="Arial" ><span style="font-size:10pt" >The AUTH command takes a single parameter which defines the security mechanism to be
used.&nbsp; From the point of view of TLS, this parameter must be 'TLS'.&nbsp; </span></font><font color="#010101" ></font><br><p style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&gt; AUTH TLS</span></font><font color="#010101" ></font><br><p align="justify" ><font face="Arial" ><span style="font-size:10pt" >The result of this is that an attempt is made to negotiate a TLS connection on the control
channel.&nbsp; This involves the server trying to validate itself to the client by sending its certificate
&ndash; this is called Server Validation.&nbsp; It may also involve the client sending its certificate to the
server, which is called Client Validation.&nbsp; Section&nbsp; will present more detail on certificate
validation.</span></font><font color="#010101" ></font><br><p align="justify" ><font color="#010101" ></font><br><font face="Arial"  size="4" ><span style="font-size:14pt" ><b>PBSZ (Protection Buffer SiZe)</b></span></font><font color="#010101" ></font><br><p align="justify" ><font face="Arial" ><span style="font-size:10pt" >The PBSZ command is intended by RFC2228 to define the buffer-size to be used by the
security mechanism when it is encrypting data on the data-channel.&nbsp; However, since TLS is a
transport-layer protocol and therefore doesn't require explicit encryption of data by the
application layer, this buffer-size is redundant.&nbsp; Ford-Hutchinson therefore requires that a
value of '0' is always passed as a parameter.</span></font><font color="#010101" ></font><br><p style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&gt; PBSZ 0</span></font><font color="#010101" ></font><br><p align="justify" ><font face="Arial" ><span style="font-size:10pt" >While this call is redundant (as it is effectively implied by the AUTH command), it is required
and must precede the PROT command.</span></font><font color="#010101" ></font><br><p align="justify" ><font color="#010101" ></font><br><font face="Arial"  size="4" ><span style="font-size:14pt" ><b>PROT (data channel PROTection level)</b></span></font><font color="#010101" ></font><br><p align="justify" ><font face="Arial" ><span style="font-size:10pt" >PROT defines whether or not the data channel is to be protected.&nbsp; Though RFC2228 defines
four possible protection levels,&nbsp; Ford-Hutchinson only defines two, Clear and Private.&nbsp; Clear
means that no security is to be used on the data-channel, and Private means that the data-
channel should be protected by TLS.&nbsp; Thus there are two possible PROT commands:</span></font><font color="#010101" ></font><br><p style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&gt; PROT C</span></font><font color="#010101" ></font><br><p align="justify" ><font face="Arial" ><span style="font-size:10pt" >for an unsecured data-channel, and</span></font><font color="#010101" ></font><br><p style="margin-left:13mm; margin-right:0mm; text-indent:0mm; " ><font face="Courier New" ><span style="font-size:10pt" >&gt; PROT P</span></font><font color="#010101" ></font><br><p align="justify" ><font face="Arial" ><span style="font-size:10pt" >for a TLS data-channel.</span></font><font color="#010101" ></font><br><p align="justify" ><font color="#010101" ></font><br><div align="left" ><br></div><font color="#010101" ><div align="left" ></font><font face="Arial" ><span style="font-size:10pt" >Next: </span></font><a href="ftpsusage.html"><font face="Arial"  color="#0000ff" ><span style="font-size:10pt" ><u>FTPS Usage</u></span></font></a><font color="#010101" ></font></div>

</body></html>
