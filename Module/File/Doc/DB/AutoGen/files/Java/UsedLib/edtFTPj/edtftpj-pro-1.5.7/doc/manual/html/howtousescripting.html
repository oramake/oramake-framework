<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:mshelp="http://msdn.microsoft.com/mshelp">
<head>
  <title>How to use scripting</title>
</head>


<body style="background-color: rgb(255, 255, 255);">

<table cellpadding="0" cellspacing="0" width="100%">

  <tbody>

    <tr>

      <td style="background-image: url(../images/bk_tl.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>

      <td style="background-image: url(../images/bk_t.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>

      <td style="background-image: url(../images/bk_tr.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>

    </tr>

    <tr>

      <td style="background-image: url(../images/bk_l.jpg); background-repeat: repeat-y;" width="4"><img src="../images/space.gif" height="4" width="4"></td>

      <td style="font-family: sans-serif; font-weight: bold; font-size: 14pt; background-image: url(../images/bk_c.jpg); background-repeat: repeat;" width="100%"> &nbsp;How to use scripting </td>

      <td style="background-image: url(../images/bk_r.jpg); background-repeat: repeat-y;" width="4"><img src="../images/space.gif" height="4" width="4"></td>

    </tr>

    <tr>

      <td style="background-image: url(../images/bk_bl.jpg); background-repeat: repeat-x;" height="4"><img src="../images/space.gif" height="4" width="4"></td>

      <td style="background-image: url(../images/bk_b.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>

      <td style="background-image: url(../images/bk_br.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>

    </tr>

  </tbody>
</table>

<br>

<div align="left"><font face="Arial"><span style="font-size: 10pt;">edtFTPj/PRO includes a powerful
scripting engine that allows users to list FTP commands in a text file,
and then execute all the commands sequentially. The script can be be
run&nbsp;via a batch
file (or Unix shell script), or the <a href="../../api/com/enterprisedt/net/ftp/script/ScriptEngine.html">ScriptEngine</a>
class can be used within an application to run a script.<br>

<br>

</span></font><font face="Arial"><span style="font-size: 10pt;">The script engine supports the FTP,
FTPS (both implicit and explicit) and SFTP protocols. For FTPS, both client and server validation is 
supported. <br>

<br>

</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"><span style="font-weight: bold;">Sample
code</span></span></font></div>

<div align="left"><br>

</div>

<div align="left"><font face="Arial"><span style="font-size: 10pt;">A sample script is shown
below:</span></font></div>

<div align="left"><br>

</div>

<div style="margin-left: 13mm; margin-right: 0mm; text-indent: 0mm;" align="left"><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;"># Sample FTP script using FTP
initially<br>

# then changing to FTPS<br>

#<br>

set remotehost=edtmobile<br>

set port=21<br>

set user=javaftp<br>

set password=javaftp<br>

set connectmode=passive<br>

set timeout=30<br>

set protocol=ftp<br>

set localdir=D:\work\tmp<br>

<br>
# client and server validation for FTPS<br>
set servercert=d:\work\ftp-ssl\test\conf\server.cert.pem<br>
set clientcert=d:\work\ftp-ssl\test\conf\client.pem<br>
set certpassword=password<br><br>

# logging off = 0, highest level = 5<br>

set loglevel=5<br>

set logfile=D:\work\ftp-ssl\tmp\script.log<br>

<br>

# connect to the server<br>

# optional remotehost and port supplied <br>

# override the params set earlier<br>

open edtmobile 21<br>

cd remote/test<br>

<br>

# change to secure mode<br>

auth tls<br>

<br>

# force binary mode transfers<br>

binary<br>

<br>

# put the local file test.jar to the server as mytest.jar<br>

put test.jar mytest.jar<br>

<br>

# rename it<br>

rename mytest.jar test2.jar<br>

<br>

# and get it back as test3.jar in the local working directory<br>

get&nbsp;test2.jar </span></font><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;">test3.jar</span></font><br>

<font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;"><br>

# delete all *.jar files in the current directory on<br>

# the server<br>

mdelete *.jar<br>

<br>

# disconnect<br>

close<br>

<br>

</span></font></div>

<div align="left"><br>

</div>

<font color="#010101" face="Arial"><span style="font-size: 10pt;"><span style="font-weight: bold;">Running
a script</span></span></font><br>

<br>

<font face="Arial"><span style="font-size: 10pt;">To run the above script, assuming
it is saved in a file called
<span style="font-style: italic;">script.txt</span>,
simply supply it as the first argument to the</span></font><font face="Arial"><span style="font-size: 10pt;"> <a href="../../api/com/enterprisedt/net/ftp/script/ScriptEngine.html">ScriptEngine</a>
class</span></font><font face="Arial"><span style="font-size: 10pt;">:</span></font><br>

<font face="Arial"><span style="font-size: 10pt;"><br>

<div style="margin-left: 13mm; margin-right: 0mm; text-indent: 0mm;" align="left"><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;">java -classpath %CP%
com.enterprisedt.net.ftp.script.ScriptEngine script.txt<br>

</span></font></div>

</span></font><br>

<font color="#010101" face="Arial"><span style="font-size: 10pt;">(where %CP% contains <span style="font-style: italic;">edtftpjpro.jar</span> and <span style="font-style: italic;">license.jar</span>).<br>

<br>

Alternatively, a comprehensive set of command line parameters can be used as described below:
<br><br>
<div style="margin-left: 13mm; margin-right: 0mm; text-indent: 0mm;" align="left"><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;">
[-h] [-c configfile] [-f scriptfile] [-u user] [-p password] [-v]
<br>
<br>
-f scriptfile&nbsp;:  script to execute.<br>
-c configfile&nbsp;:  config script to execute before main scriptfile.<br>
-h&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:  display this help <br>
-u user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:  set the user name (optional)<br>
-p password&nbsp;&nbsp;&nbsp;:  set the user password (optional)<br>
-v&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:  print version details <br>
</div></font></span>
<br>

For example:<br><br>
<div style="margin-left: 13mm; margin-right: 0mm; text-indent: 0mm;" align="left"><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;">
java -classpath %CP%
com.enterprisedt.net.ftp.script.ScriptEngine -c config.txt -f script.txt
</div></font></span>
<br>
In this example, a configuration file is supplied in addition to the script file to run. The settings in 
the configuration file are loaded before the script file is executed, so the file can be used for common settings.
<br>
<br>
If the <span style="font-style: italic;">runscript.bat</span> (or <span style="font-style: italic;">runscript</span> on Unix) 
batch script is used:<br><br>
<div style="margin-left: 13mm; margin-right: 0mm; text-indent: 0mm;" align="left"><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;">
runscript -c config.txt -f script.txt
</div></font></span>
<br>
If the <a href="../../api/com/enterprisedt/net/ftp/script/ScriptEngine.html">ScriptEngine</a> is used directly from code to run
scripts via the executeScript() methods, the <a href="../../api/com/enterprisedt/net/ftp/script/ScriptResult.html">ScriptResult</a> object
that is returned can be examined for various statistics collected about the script execution.
<br>
<br>

<span style="font-weight: bold;">Command overview</span><br>

<br>

Most commands are fairly self explanatory. <br>

<br>

The <span style="font-style: italic;">set</span> command
is used to set various parameters that are used during the session,
such as username, password, timeout and so on. Many of these parameters
are optional (e.g. port, timeout). The
most important parameter is the
protocol.<br>

<br>

The local working directory is by
default the standard Java working
directory for the application, but the <span style="font-style: italic;">set localdir</span>
command can be used to set a different local working directory. All
uploads and downloads that do not specify a full path will use the set
local working
directory.<br>

<br>
<span style="font-weight: bold;">Command
reference</span><br>
<br>
<font face="Arial"><span style="font-size: 10pt;">The scripting commands are
described in the <a href="scriptreference.html">command reference</a></span></font>. <br>

<br>
</body>
</html>
