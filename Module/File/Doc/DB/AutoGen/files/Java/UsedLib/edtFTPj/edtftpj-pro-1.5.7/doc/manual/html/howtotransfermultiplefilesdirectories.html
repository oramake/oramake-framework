<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:mshelp="http://msdn.microsoft.com/mshelp">
<head>

  


  
  <title>How to transfer multiple files and directories</title>
  <meta content="HelpMaker.net" name="generator">


  
  <meta content="Chapter 3," name="keywords">


  
  <link href="ms-help://Hx/HxRuntime/HxLink.css" type="text/css" rel="stylesheet">


  
  <link href="ms-help://Hx/HxRuntime/HxLinkDefault.css" type="text/css" rel="stylesheet">
</head>


<body style="background-color: rgb(255, 255, 255);">


<table cellpadding="0" cellspacing="0" width="100%">


  <tbody>


    <tr>


      <td style="background-image: url(../images/bk_tl.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>


      <td style="background-image: url(../images/bk_t.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>


      <td style="background-image: url(../images/bk_tr.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>


    </tr>


    <tr>


      <td style="background-image: url(../images/bk_l.jpg); background-repeat: repeat-y;" width="4"><img src="../images/space.gif" height="4" width="4"></td>


      <td style="font-family: sans-serif; font-weight: bold; font-size: 14pt; background-image: url(../images/bk_c.jpg); background-repeat: repeat;" width="100%"> &nbsp;How to transfer multiple files and
directories </td>


      <td style="background-image: url(../images/bk_r.jpg); background-repeat: repeat-y;" width="4"><img src="../images/space.gif" height="4" width="4"></td>


    </tr>


    <tr>


      <td style="background-image: url(../images/bk_bl.jpg); background-repeat: repeat-x;" height="4"><img src="../images/space.gif" height="4" width="4"></td>


      <td style="background-image: url(../images/bk_b.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>


      <td style="background-image: url(../images/bk_br.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>


    </tr>


  
  </tbody>
</table>


<br>


<div align="left"><font color="#010101" face="Arial"><span style="font-size: 10pt;">edtFTPj/PRO
is able to download, upload and delete multiple files and directories
in a single
method call.&nbsp; </span></font></div>


<div align="left"><br>


</div>


<div align="left"><font color="#010101" face="Arial"><span style="font-size: 10pt;">These
capabilities are not available in</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">&nbsp;</span></font><font><u><a href="../../api/com/enterprisedt/net/ftp/FTPClient.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>FTPClient</u></span></font></a></u></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"> but are in </span></font><font><u><a href="../../api/com/enterprisedt/net/ftp/ssl/SSLFTPClient.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>SSLFTPClient</u></span></font></a></u></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">,&nbsp; </span></font>
<a href="../../api/com/enterprisedt/net/ftp/ssh/SSHFTPClient.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>SSHFTPClient</u></span></font></a>
and&nbsp;<font><u><a href="../../api/com/enterprisedt/net/ftp/pro/ProFTPClient.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>ProFTPClient</u></span></font></a>.</u></font>
<font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"></span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font></div>


<div align="left"><br>


</div>


<div align="left"><font color="#010101" face="Arial"><span style="font-size: 10pt;">There
are four main methods available (with overloads). The
relevant methods are listed in the table below:</span></font></div>


<div align="left"><br>


</div>


<table style="border: medium none ; border-collapse: collapse; width: 858px; height: 446px;" border="1" cellpadding="4" cellspacing="0">


  <tbody>


    <tr>


      <td style="border: 1px solid rgb(1, 1, 1);" align="center" valign="top" width="184">
      
      <div align="center"> <font face="Arial"><span style="font-size: 10pt;"><b>Method</b></span></font>
      </div>


      </td>


      <td style="border: 1px solid rgb(1, 1, 1);" align="center" valign="top" width="486">
      
      <div align="center"> <font face="Arial"><span style="font-size: 10pt;"><b>Description</b></span></font>
      </div>


      </td>


    </tr>


    <tr>


      <td style="border: 1px solid rgb(1, 1, 1);" valign="top" width="184"> <a href="../../api/com/enterprisedt/net/ftp/pro/ProFTPClient.html#mdelete%28java.lang.String,%20java.lang.String,%20boolean%29"><span style="font-family: Arial;">mdelete</span></a></td>


      <td style="border: 1px solid rgb(1, 1, 1);" valign="top" width="486">
      
      <div align="left"> <font color="#010101" face="Arial"><span style="font-size: 10pt;">Deletes
files matching the supplied FileFilter or wildcard. If a directory name
is not supplied, deletes all matching files in the current directory.
If a directory name is supplied, deletes all matching files in the
named directory, and optionally in subdirectories (if the recurse flag
is true). This method never deletes directories themselves, just files.</span></font>
      </div>


      </td>


    </tr>


    <tr>


      <td style="border: 1px solid rgb(1, 1, 1);" valign="top" width="184">
      
      <div align="left"> <a href="../../api/com/enterprisedt/net/ftp/pro/ProFTPClient.html#mget%28java.lang.String,%20java.lang.String,%20java.lang.String,%20boolean%29"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><span style="text-decoration: underline;">mget</span></span></font></a></div>


      </td>


      <td style="border: 1px solid rgb(1, 1, 1);" valign="top" width="486">
      
      <div align="left"> <span style="font-family: Arial;">Downloads</span><font color="#010101" face="Arial"><span style="font-size: 10pt;"> files </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">matching the supplied FileFilter or
wildcard into the named local directory (which is placed in the current
directory). If the recurse flag is true, gets matching files in
subdirectories.&nbsp;</span></font> </div>


      </td>


    </tr>


    <tr>


      <td style="border: 1px solid rgb(1, 1, 1);" valign="top" width="184">
      
      <div align="left"> <a href="../../api/com/enterprisedt/net/ftp/pro/ProFTPClient.html#mput%28java.lang.String,%20java.lang.String,%20java.lang.String,%20boolean%29"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>mput</u></span></font></a>
      </div>


      </td>


      <td style="border: 1px solid rgb(1, 1, 1);" valign="top" width="486">
      
      <div align="left"> <span style="font-family: Arial;">Uploads </span><font color="#010101" face="Arial"><span style="font-size: 10pt;">files matching the supplied
FileFilter or wildcard from the named local directory. If a remote
directory name is not supplied, files go into the current remote
directory. If a remote directory name is supplied, files go into a
remote directory of that name (which itself is in the current remote
directory).&nbsp;</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">If
the recurse flag is true, all matching files in subdirectories are
uploaded as well. Subdirectories that don't exist on the server are
created.</span></font> </div>


      </td>


    </tr>


    <tr>


      <td style="border: 1px solid rgb(1, 1, 1);" height="20" valign="top" width="184">
      
      <div align="left"> <a href="../../api/com/enterprisedt/net/ftp/pro/ProFTPClient.html#rmdir%28java.lang.String,%20boolean%29"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>rmdir</u></span></font></a>
      </div>


      </td>


      <td style="border: 1px solid rgb(1, 1, 1);" height="20" valign="top" width="486">
      
      <div align="left"> <font color="#010101" face="Arial"><span style="font-size: 10pt;">Deletes
the named remote directory. If the recurse flag is true, deletes all
files and subdirectories. If the recurse flag is false, deletes the
named directory (but only if it is empty).</span></font> </div>


      </td>


    </tr>


  
  </tbody>
</table>


<div align="left"><br>


</div>


<div style="margin-left: 13mm; margin-right: 0mm; text-indent: 0mm;" align="left"><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 9pt;"><br>


</span></font></div>


<div align="left"><font color="#010101" face="Arial"><span style="font-size: 10pt;">Note
that all remote directories should generally be directory names, not
paths. Many FTP servers cannot cope with directory paths, and the most
portable code is to use directory names. This means that code to put an
entire directory should navigate to the parent directory on the server,
and then use mput to put the directory. Local directories can be
specified as paths.</span></font></div>


<div align="left"><br>


</div>


<div align="left"><font color="#010101" face="Arial"><span style="font-size: 10pt;">Files
can be matched by <span style="font-weight: bold;">FileFilter</span>
or <span style="font-weight: bold;">wildcard</span>.
The wildcard argument is a string that may contain
markers for unknown characters.&nbsp; The
question-mark (</span></font><font color="#010101" face="Lucida Console"><span style="font-size: 10pt;">?</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">) character matches a single
unknown character.&nbsp; The asterisk (</span></font><font color="#010101" face="Lucida Console"><span style="font-size: 10pt;">*</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">) character
matches one or more unknown character.&nbsp; For example, the
wildcard "file*.dat" would match
the following strings, </span></font><font color="#010101" face="Lucida Console"><span style="font-size: 10pt;">"file1.dat"</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">, </span></font><font color="#010101" face="Lucida Console"><span style="font-size: 10pt;">"file10.dat"</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">, </span></font><font color="#010101" face="Lucida Console"><span style="font-size: 10pt;">"fileA.dat"</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">, and </span></font><font color="#010101" face="Lucida Console"><span style="font-size: 10pt;">"fileABC.dat"</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">,
whereas the wildcard "file?.dat" would match the following strings, </span></font><font color="#010101" face="Lucida Console"><span style="font-size: 10pt;">"file1.dat"</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"> and </span></font><font color="#010101" face="Lucida Console"><span style="font-size: 10pt;">"fileA.dat"</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">, but not </span></font><font color="#010101" face="Lucida Console"><span style="font-size: 10pt;">"file10.dat"</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"> and </span></font><font color="#010101" face="Lucida Console"><span style="font-size: 10pt;">"fileABC.dat"</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">. A FileFilter is a standard
java.io.FileFilter implementation - see the Sun Java documentation for
more details.</span></font></div>


<div align="left"><br>


</div>


<div style="font-weight: bold;" align="left"><font color="#010101" face="Arial"><span style="font-size: 10pt;">Socket creation problems</span></font></div>


<div align="left"><br>


</div>


<div align="left"><font color="#010101" face="Arial"><span style="font-size: 10pt;">When
transferring multiple files, it is common to encounter IOExceptions
caused by failure to create data sockets.&nbsp;</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">Generally,
applications have a limit to the number of sockets
they can have open simultaneously (in Unix this is controlled via
ulimit). This wouldn't be a problem if sockets disappeared as soon as
they were closed. In TCP/IP, however, when sockets are closed they
enter the TIME_WAIT state. The socket stays in this state long enough
to let stray TCP packets for this connection expire - usually up to 2
minutes. </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">Since
every data transfer and directory
listing in FTP uses a new socket,&nbsp;if a large number of
transfers are
performed
quickly, the number of sockets in TIME_WAIT can build up rapidly and
the application run out of sockets.&nbsp;</span></font></div>


<div align="left"><br>


</div>


<div align="left"><font color="#010101" face="Arial"><span style="font-size: 10pt;">One
way of minimizing this problem is to </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">slow down the transfer rate. This
can be done by sleeping briefly after a certain number of transfers.
The API provides a simple mechanism to do this for directory transfers.
The <a href="../../api/com/enterprisedt/net/ftp/pro/ProFTPClientInterface.html#setCountBeforeSleep%28int%29">setCountBeforeSleep</a> method sets the number of file transfers
permitted before the thread calls sleep. The <a href="../../api/com/enterprisedt/net/ftp/pro/ProFTPClientInterface.html#setSleepTime%28int%29">setSleepTime</a> method sets
the sleep time (in seconds), while <a href="../../api/com/enterprisedt/net/ftp/pro/ProFTPClientInterface.html#setSleepEnabled%28boolean%29">setSleepEnabled</a> enables or disables sleeping. For example:</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font></div>


<div align="left"><br>


</div>


<div align="left"><font color="#010101" face="Courier New"><span style="font-size: 10pt;">&nbsp;&nbsp;&nbsp;&nbsp;</span></font><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;">ftp.setCountBeforeSleep(50); // 50
transfers before sleeping</span></font></div>


<div align="left"><font color="#010101" face="Courier New"><span style="font-size: 10pt;">&nbsp;&nbsp;&nbsp;&nbsp;</span></font><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 8pt;">ftp.setSleepTime(30); // sleep for 30 seconds</span></font></div>


<div align="left"><br>


</div>


<div style="font-weight: bold;" align="left"><font color="#010101" face="Arial"><span style="font-size: 10pt;">API examples</span></font></div>


<div align="left"><br>


</div>


<table style="border: medium none ; border-collapse: collapse; width: 877px; height: 687px;" border="1" cellpadding="4" cellspacing="0">


  <tbody>


    <tr>


      <td style="border: 1px solid rgb(1, 1, 1); vertical-align: top; text-align: center; height: 32px;">
      
      <div style="height: 20px;" align="center"> <font face="Arial"><span style="font-size: 10pt;"><b>Code</b></span></font>
      </div>


      </td>


      <td style="border: 1px solid rgb(1, 1, 1); width: 486px; vertical-align: top; text-align: center; height: 32px;">
      
      <div align="center"> <font face="Arial"><span style="font-size: 10pt;"><b>Description</b></span></font>
      </div>


      </td>


    </tr>


    <tr>


      <td style="border: 1px solid rgb(1, 1, 1); vertical-align: top; height: 49px; width: 250px;">
      <a href="../../api/com/enterprisedt/net/ftp/pro/ProFTPClient.html#mdelete%28java.lang.String,%20java.lang.String,%20boolean%29"><span style="font-family: Arial;"></span></a><font color="#010101" face="Lucida Console" size="1"><span style="font-size: 9pt;">ftp.mdelete("*.txt")</span></font></td>


      <td style="border: 1px solid rgb(1, 1, 1); height: 49px;" valign="top" width="486">
      
      <div align="left"> <font color="#010101" face="Arial"><span style="font-size: 10pt;">All
the files matching *.txt in the current
remote directory are deleted</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">.</span></font> </div>


      </td>


    </tr>


    <tr>


      <td style="border: 1px solid rgb(1, 1, 1); vertical-align: top; height: 50px;">
      <font color="#010101" face="Lucida Console" size="1"><span style="font-size: 9pt;">ftp.mdelete("test",
"*.txt", false)</span></font></td>


      <td style="border: 1px solid rgb(1, 1, 1); height: 50px;" valign="top" width="486">
      
      <div align="left"> <font color="#010101" face="Arial"><span style="font-size: 10pt;">All
the files matching *.txt in the remote
directory&nbsp;called "test" (no subdirectories) are deleted.</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font> </div>


      </td>


    </tr>


    <tr>


      <td style="border: 1px solid rgb(1, 1, 1); vertical-align: top; height: 50px;">
      <font color="#010101" face="Lucida Console" size="1"><span style="font-size: 9pt;">ftp.mdelete("test",
"*.txt", true)</span></font></td>


      <td style="border: 1px solid rgb(1, 1, 1); height: 50px;" valign="top" width="486"> <font color="#010101" face="Arial"><span style="font-size: 10pt;">All
the files matching *.txt in
the&nbsp;</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">remote
directory&nbsp;called
"test" (including subdirectories) are deleted.</span></font></td>


    </tr>


    <tr>


      <td style="border: 1px solid rgb(1, 1, 1); height: 50px;" valign="top"> <font color="#010101" face="Lucida Console" size="1"><span style="font-size: 9pt;">ftp.mget("D:\\Downloads\\test",
"*.txt")</span></font></td>


      <td style="border: 1px solid rgb(1, 1, 1); height: 50px;" valign="top" width="486">
      
      <div align="left"> <font color="#010101" face="Arial"><span style="font-size: 10pt;">All
the files matching *.txt in the current
remote directory are&nbsp;</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">downloaded</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"> into "D:\Downloads\test".</span></font>
      </div>


      </td>


    </tr>


    <tr>


      <td style="border: 1px solid rgb(1, 1, 1); height: 50px;" valign="top"> <font color="#010101" face="Lucida Console" size="1"><span style="font-size: 9pt;">ftp.mget("D:\\Downloads\\test",
"test", "*.txt")</span></font></td>


      <td style="border: 1px solid rgb(1, 1, 1); height: 50px;" valign="top" width="486">
      
      <div align="left"> <font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">All the files matching *.txt in
the&nbsp;remote directory called "test" </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">(no subdirectories) </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">are&nbsp;</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">downloaded</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"> into "D:\Downloads\test".</span></font>
      </div>


      </td>


    </tr>


    <tr>


      <td style="border: 1px solid rgb(1, 1, 1); height: 50px;" valign="top"> <font color="#010101" face="Lucida Console" size="1"><span style="font-size: 9pt;">ftp.mget("D:\\Downloads\\test",
"test", "*.txt", true)</span></font></td>


      <td style="border: 1px solid rgb(1, 1, 1); height: 50px;" valign="top" width="486">
      
      <div align="left"> <font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">All the files matching *.txt
in&nbsp;</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">the&nbsp;remote
directory
called "test" </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">(</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">including</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"> subdirectories)</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"> </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">are downloaded </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">into "D:\Downloads\test".</span></font>
      </div>


      </td>


    </tr>


    <tr>


      <td style="border: 1px solid rgb(1, 1, 1); height: 50px;" valign="top"> <font color="#010101" face="Lucida Console" size="1"><span style="font-size: 9pt;">ftp.mput("D:\\Downloads\\test","*.txt")&nbsp;</span></font></td>


      <td style="border: 1px solid rgb(1, 1, 1); height: 50px;" valign="top" width="486">
      
      <div align="left"> <font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">All the files matching *.txt in the
local
directory called </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">"D:\Uploads\test"
      </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">are
uploaded into the current remote directory.</span></font> </div>


      </td>


    </tr>


    <tr>


      <td style="border: 1px solid rgb(1, 1, 1); height: 50px;" valign="top"> <font color="#010101" face="Lucida Console" size="1"><span style="font-size: 9pt;">ftp.mput("D:\\Downloads\\test","test",
"*.txt", false)</span></font></td>


      <td style="border: 1px solid rgb(1, 1, 1); height: 50px;" valign="top" width="486">
      
      <div align="left"> <font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">All the files matching *.txt in the
local
directory called </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">"D:\Uploads\test"
      </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">are
uploaded into a remote directory called "test"&nbsp;</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">created (if it does not exist) in
the current remote directory</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">. No files in subdirectories are
uploaded.</span></font> </div>


      </td>


    </tr>


    <tr>


      <td style="border: 1px solid rgb(1, 1, 1); height: 50px;" valign="top"> <font color="#010101" face="Lucida Console" size="1"><span style="font-size: 9pt;">ftp.mput("D:\\Downloads\\test","test",
"*.txt", true)</span></font></td>


      <td style="border: 1px solid rgb(1, 1, 1); height: 50px;" valign="top" width="486">
      
      <div align="left"> <font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">All the files matching *.txt in the
local
directory called </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">"D:\Uploads\test"
      </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">and
all its subdirectories are
uploaded into a remote directory called "test" created (if it does not
exist) in the current remote directory. Remote subdirectories are also
created if they don't exist.</span></font> </div>


      </td>


    </tr>


    <tr>


      <td style="border: 1px solid rgb(1, 1, 1); height: 50px;" valign="top"> <font color="#010101" face="Lucida Console" size="1"><span style="font-size: 9pt;">ftp.rmdir("test", true)<br>


      </span></font></td>


      <td style="border: 1px solid rgb(1, 1, 1); height: 50px;" valign="top" width="486">
      
      <div align="left"> <font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">Deletes the remote directory "test"
in the current remote directory. Deletes all subdirectories and files.
Use with caution!<br>


      </span></font> </div>


      </td>


    </tr>


  
  </tbody>
</table>


<br>


<div align="left"><br>


</div>


<font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><br>


</body>
</html>
