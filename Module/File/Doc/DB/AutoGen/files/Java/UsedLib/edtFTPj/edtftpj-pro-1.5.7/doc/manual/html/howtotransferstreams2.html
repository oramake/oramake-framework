<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>


  


  
  
  
  <title>How to transfer using FTP streams</title>
  <meta name="generator" content="HelpMaker.net">



  
  
  <meta name="keywords" content="Chapter 3,">



  
  
  <link rel="stylesheet" type="text/css" href="ms-help://Hx/HxRuntime/HxLink.css">



  
  
  <link rel="stylesheet" type="text/css" href="ms-help://Hx/HxRuntime/HxLinkDefault.css">
</head>


<body style="background-color: rgb(255, 255, 255);">


    
<table cellpadding="0" cellspacing="0" width="100%">


      <tbody>

    <tr>


        <td style="background-image: url(../images/bk_tl.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>


        <td style="background-image: url(../images/bk_t.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>


        <td style="background-image: url(../images/bk_tr.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>


      </tr>


      <tr>


        <td style="background-image: url(../images/bk_l.jpg); background-repeat: repeat-y;" width="4"><img src="../images/space.gif" height="4" width="4"></td>


        <td style="font-family: sans-serif; font-weight: bold; font-size: 14pt; background-image: url(../images/bk_c.jpg); background-repeat: repeat;" width="100%">
          &nbsp;How to transfer using FTP streams
        </td>


        <td style="background-image: url(../images/bk_r.jpg); background-repeat: repeat-y;" width="4"><img src="../images/space.gif" height="4" width="4"></td>


      </tr>


      <tr>


        <td style="background-image: url(../images/bk_bl.jpg); background-repeat: repeat-x;" height="4"><img src="../images/space.gif" height="4" width="4"></td>


        <td style="background-image: url(../images/bk_b.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>


        <td style="background-image: url(../images/bk_br.jpg); background-repeat: repeat-x;"><img src="../images/space.gif" height="4" width="4"></td>


      </tr>


    
  
  </tbody>
</table>


<br>


<div align="left"> <font color="#010101" face="Arial"><span style="font-size: 10pt;">
Sometimes it is useful to be able to read from or write to the FTP server as if it 
were a InputStream or OutputStream. This is possible using <a href="../../api/com/enterprisedt/net/ftp/FTPInputStream.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u> FTPInputStream</u></span></font></a>
and <a href="../../api/com/enterprisedt/net/ftp/FTPOutputStream.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u> FTPOutputStream</u></span></font></a>.
These classes directly subclass Java's InputStream and OutputStream, and can be used in
exactly the same manner.&nbsp;
</span></font> </div>



<div align="left"> <br>



</div>



<div align="left"><font color="#010101" face="Arial"><span style="font-size: 10pt;">An instance of </span></font><a href="../../api/com/enterprisedt/net/ftp/FTPClient.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u> FTPClient</u></span></font></a><font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">&nbsp;or a subclass must be supplied to the stream's constructor. Currently </span></font><font><u><a href="../../api/com/enterprisedt/net/ftp/ssh/SSHFTPClient.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u>SSHFTPClient</u></span></font></a></u></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">&nbsp;is not supported, but will be in a future version.&nbsp;</span></font> </div>



<div align="left"> <br>



</div>



<div align="left"> <font color="#010101" face="Arial"><span style="font-size: 10pt;"><b></b>An instance of </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"><a href="../../api/com/enterprisedt/net/ftp/FTPInputStream.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u> FTPInputStream</u></span></font></a> or <a href="../../api/com/enterprisedt/net/ftp/FTPOutputStream.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u> FTPOutputStream</u></span></font></a></span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">&nbsp;can
only be used for one data transfer. It is essential that the stream is
closed when the transfer is complete, even if an exception was thrown.
Otherwise, </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">server acknowledgements may get out of order, and the connection will need to be closed.</span></font></div>
<br>






<div align="left"> <font color="#010101" face="Arial"><span style="font-size: 10pt;">All
of the stream's transfer parameters are taken from the FTPClient
instance that is supplied to the constructor. For example, if the
stream is to be a binary mode transfer, binary mode must be set in the
FTPClient instance before it is supplied to the constructor.&nbsp;&nbsp;</span></font> </div>



<div align="left"> <br>



</div>
<font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">The
following shows how an</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"> </span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"><a href="../../api/com/enterprisedt/net/ftp/FTPInputStream.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u> FTPInputStream</u></span></font></a></span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"> can be used to download a file:<br>



</span></font>


<div style="margin-left: 13mm; margin-right: 0mm; text-indent: 0mm;" align="left"><font color="#010101" face="Arial">
<br>



<font color="#0000ff" face="Lucida Console" size="1"><span style="font-size: 8pt;"></span></font><font face="Lucida Console" size="1"><span style="font-size: 8pt;">FTPInputStream in = new FTPInputStream(ftp, "myfile.zip");<br>
</span></font></font><font color="#010101" face="Arial"><font face="Lucida Console" size="1"><span style="font-size: 8pt;">BufferedOutputStream </span></font></font><font color="#010101" face="Arial"><font face="Lucida Console" size="1"><span style="font-size: 8pt;">out = null;<br>
byte[] chunk = new byte[4096];<br>
int count = 0;</span></font></font></div>






<div style="margin-left: 13mm; margin-right: 0mm; text-indent: 0mm;" align="left"><font color="#010101" face="Arial"><font face="Lucida Console" size="1"><span style="font-size: 8pt;">try {<br>
&nbsp; &nbsp; </span></font></font><font color="#010101" face="Arial"><font face="Lucida Console" size="1"><span style="font-size: 8pt;">out = new BufferedOutputStream(new FileOutputStream("myfile.zip"));<br>
&nbsp; &nbsp; while ((count = in.read(chunk)) &gt;= 0) {<br>
&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; out.write(chunk, 0, count);<br>
&nbsp; &nbsp; }<br>
}<br>
finally {<br>
&nbsp; &nbsp; try {<br>
&nbsp; &nbsp; &nbsp; &nbsp; in.close();<br>
&nbsp; &nbsp; }<br>
&nbsp; &nbsp; catch (Exception ex) {<br>
&nbsp; &nbsp; &nbsp; &nbsp; </span></font></font><font color="#010101" face="Arial"><font face="Lucida Console" size="1"><span style="font-size: 8pt;">ex.printStackTrace();</span></font></font><br>
<font color="#010101" face="Arial"><font face="Lucida Console" size="1"><span style="font-size: 8pt;">&nbsp; &nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;if (out != null) {<br>
&nbsp; &nbsp; &nbsp; &nbsp; try {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; out.close();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp; &nbsp; &nbsp; &nbsp; catch (Exception e) {<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e.printStackTrace();<br>
&nbsp; &nbsp; &nbsp; &nbsp; }<br>
&nbsp; &nbsp; }<br>
}<br>



<br>



</span></font> </font></div>



<div align="left"> <span style="font-family: Arial;">Note that care must be taken via a <span style="font-style: italic;">finally</span> block to ensure that the FTP stream is closed (and, of course, the file stream).&nbsp;</span></div>
<br>






<div align="left"> <font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"></span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;"><a href="../../api/com/enterprisedt/net/ftp/FTPInputStream.html"><font color="#0000ff" face="Arial"><span style="font-size: 10pt;"><u> FTPInputStream</u></span></font></a>
can be especially useful when a large file is being downloaded and the
stream needs to be processed as it arrives. For example, if an XML file
was being downloaded, a SAX parser could parse the stream as data
arrived.<br>
</span></font><font color="#010101" face="Arial"><span style="font-size: 10pt;">


</span></font></div>



</body>
</html>
