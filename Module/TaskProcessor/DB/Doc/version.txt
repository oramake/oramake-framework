title: Версии



group: 2.3.0 ( 2015-12-08)

[+] Добавлена возможность ограничения числа одновременно выполняемых заданий
    одного типа от одного оператора ( задается параметром модуля).

[*] Изменен порядок выбора задания для выполнения: задания выбираются в порядке
    сортировки
    - по числу выполняемых заданий от данного оператора;
    - по числу выполняемых заданий данного типа;
    - по дате постановки на выполнение;

    ( ранее только по дате постановки на выполнение)

[*] Исключена зависимость пакета <pkg_TaskProcessorHandler> от интерфейсного
    пакета <pkg_TaskProcessor>.



group: 2.2.4 ( 2014-08-11)

[+] Добавлен параметр operatorId функции <pkg_TaskProcessor.getTaskType>
    для исключения из списка типов задач, недоступных указанному оператору.

[*] В списке типов задач, возращаемом функцией <pkg_TaskProcessor.getTaskType>,
    стала применяться сортировка по названию ( по task_type_name, ранее по
    task_type_id).

[*] Установка пакетных заданий модуля стала выполняться при установке модуля
    ( при этом во всех БД создается 5 пакетных заданий обработчиков задач).



group: 2.2.3 ( 2013-12-18)

[+] При выдаче прав на использование модуля стали выдаваться дополнительные
    права ( references на таблицы tp_task и tp_task_type).



group: 2.2.2 ( 2013-01-10)

[+] В курсор, возвращаемый интерфейсной функцией <pkg_TaskProcessor.findFile>,
    добавлено поле extension с расширением файла, выделяемым из имени
    файла ( для удобства использования в App-части).

[+] Добавлена интерфейсная функция <pkg_TaskProcessor.getResult>, возвращающая
    возможные результаты выполнения заданий.

[+] Добавлена функция <pkg_TaskProcessor.getTaskTypeId>, возвращающая Id типа
    задания для указанного процесса ( для использования в прикладных модулях).

[+] Добавлен скрипт по выдаче прав на использование модуля
    ( <Install/Grant/Last/run.sql>);



group: 2.2.0 ( 2012-07-30)

[+] Добавлена возможность использовать в качестве параметра задания текстовый
    файл, загружаемый через интерфейс.

[+] Добавлена возможность логирования выполнения текущего задания ( лог
    сохраняется в таблице <tp_task_log>), при этом также возможно построчное
    логирование обработки данных файла ( см. <pkg_TaskProcessor.logMessage>, а
    также обертки к ней logError, logWarning и т.д.).



group: 2.1.2 ( 2011-01-24)

[*] Добавлена возможность автоматического завершения обработчика заданий
    после выполнения ( с любым результатом) одного задания либо
    нескольких идущих подряд заданий одного типа для реализации обходного
    решения по проблеме фиктивных блокировок на прикладные объекты в сессиях
    обработчиков ( см. <Ошибки>).

[*] На время выполнения задания в качестве текущего оператора в модуле
    AccessOperator стал устанавливать оператор, поставивший задание на
    выполнение ( manage_operator_id из таблицы <tp_task>).



group: 2.1.1 ( 2010-05-14)

[*] Стало сохраняться более полное сообщение об ошибке, возникшей при работе
    задания, в случае использования внутри задания модуля Logging.



group: 2.1.0

[*] Уточнена документация и скрипты установки модуля.



group: 2.0.1

    Доработана функция TaskHandler пакета pkg_TaskProcessorHandler: при возникновении ошибки при выполнении задания в
    результате того, что состояние объектов было re-initialized (ошибки ORA: 4060 - 4067),  тоустанавливаем статус
    задачи Q,дату следующего запуска nextStartDate как SYSDATE и выдаем ошибку для перезапуска TaskProcessor-a на
    уровне Schedule-рa. После перезапуска TaskProcessor-a (1 минута) задача со статусом Q и с "пропущенным" nextStartDate
    подхватится на повторное выполнение.

