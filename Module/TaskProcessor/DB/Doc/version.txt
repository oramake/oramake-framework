title: Версии



group: 2.3.2 ( 2018-05-31)
(<Установка::2.3.2>)

[*] Use constant DATE '0001-01-01' instead of DATE '0000-01-01' for Oracle
    12.2.0.1 compatibility.



group: 2.3.1.2 ( 2018-02-16)
(<Установка::2.3.1.2>)

[!] Исправление пакетного задания RestartTaskProcessing, убраны переводы
    кареток перед и после опции BatchList, так как первый и последний батч не
    перезапускались



group: 2.3.1.1 ( 2018-02-12)

[!] Настроен перезапуск пакетным заданием RestartTaskProcessing обработчиков,
    добавленных в версии 2.3.1.



group: 2.3.1 ( 2017-12-12)
(<Установка::2.3.1>)

[+] Добавлены настройки пакетных заданий обработчиков для назначения
    определенных батчей под определенные типы задач ( параметризация)

[+] Количество обработчиков увеличено до 15

[+] Добавлена проверка на корректность выполняемого кода в добавляемом
    типе задач в таблицу <tp_task_type>

[+] Вынесена во внешний интерфейс функция <pkg_TaskProcessorTest::waitForTask>,
    которая ожидает окончания выполнения задания. Может использоваться в
    прикладных модулях при тестировании

[*] Приведение к единой версии



group: 2.3.0.2 ( 2016-07-28)

[*] При выдаче прав на представления вместе с select стало выдаваться право
    merge view для предотвращения возможной проблемы с открытием большого
    числа дочерних курсоров по причине AUTH_CHECK_MISMATCH, INSUFF_PRIVS из-за
    бага Oracle ( BUG 12660900, BUG 11930680).

[*] Добавлена выдача прав на пакет с константами <pkg_TaskProcessorBase>.



group: 2.3.0.1 ( 2016-05-05)

[*] Использование представления v_op_role модуля AccessOperator вместо
    таблицы op_role. Использование поля operator_name вместо operator_name_rus
    таблицы op_operator.



group: 2.3.0 ( 2015-12-08)

[+] Добавлена возможность ограничения числа одновременно выполняемых заданий
    одного типа от одного оператора ( задается параметром модуля).

[*] Изменен порядок выбора задания для выполнения: задания выбираются в порядке
    сортировки
    - по числу выполняемых заданий от данного оператора;
    - по числу выполняемых заданий данного типа;
    - по дате постановки на выполнение;

    ( ранее только по дате постановки на выполнение)

[*] Исключена зависимость пакета <pkg_TaskProcessorHandler> от интерфейсного
    пакета <pkg_TaskProcessor>.



group: 2.2.4 ( 2014-08-11)

[+] Добавлен параметр operatorId функции <pkg_TaskProcessor.getTaskType>
    для исключения из списка типов задач, недоступных указанному оператору.

[*] В списке типов задач, возращаемом функцией <pkg_TaskProcessor.getTaskType>,
    стала применяться сортировка по названию ( по task_type_name, ранее по
    task_type_id).

[*] Установка пакетных заданий модуля стала выполняться при установке модуля
    ( при этом во всех БД создается 5 пакетных заданий обработчиков задач).



group: 2.2.3 ( 2013-12-18)

[+] При выдаче прав на использование модуля стали выдаваться дополнительные
    права ( references на таблицы tp_task и tp_task_type).



group: 2.2.2 ( 2013-01-10)

[+] В курсор, возвращаемый интерфейсной функцией <pkg_TaskProcessor.findFile>,
    добавлено поле extension с расширением файла, выделяемым из имени
    файла ( для удобства использования в App-части).

[+] Добавлена интерфейсная функция <pkg_TaskProcessor.getResult>, возвращающая
    возможные результаты выполнения заданий.

[+] Добавлена функция <pkg_TaskProcessor.getTaskTypeId>, возвращающая Id типа
    задания для указанного процесса ( для использования в прикладных модулях).

[+] Добавлен скрипт по выдаче прав на использование модуля
    ( <Install/Grant/Last/run.sql>);



group: 2.2.0 ( 2012-07-30)

[+] Добавлена возможность использовать в качестве параметра задания текстовый
    файл, загружаемый через интерфейс.

[+] Добавлена возможность логирования выполнения текущего задания ( лог
    сохраняется в таблице <tp_task_log>), при этом также возможно построчное
    логирование обработки данных файла ( см. <pkg_TaskProcessor.logMessage>, а
    также обертки к ней logError, logWarning и т.д.).



group: 2.1.2 ( 2011-01-24)

[*] Добавлена возможность автоматического завершения обработчика заданий
    после выполнения ( с любым результатом) одного задания либо
    нескольких идущих подряд заданий одного типа для реализации обходного
    решения по проблеме фиктивных блокировок на прикладные объекты в сессиях
    обработчиков ( см. <Ошибки>).

[*] На время выполнения задания в качестве текущего оператора в модуле
    AccessOperator стал устанавливать оператор, поставивший задание на
    выполнение ( manage_operator_id из таблицы <tp_task>).



group: 2.1.1 ( 2010-05-14)

[*] Стало сохраняться более полное сообщение об ошибке, возникшей при работе
    задания, в случае использования внутри задания модуля Logging.



group: 2.1.0

[*] Уточнена документация и скрипты установки модуля.



group: 2.0.1

    Доработана функция TaskHandler пакета pkg_TaskProcessorHandler: при возникновении ошибки при выполнении задания в
    результате того, что состояние объектов было re-initialized (ошибки ORA: 4060 - 4067),  тоустанавливаем статус
    задачи Q,дату следующего запуска nextStartDate как SYSDATE и выдаем ошибку для перезапуска TaskProcessor-a на
    уровне Schedule-рa. После перезапуска TaskProcessor-a (1 минута) задача со статусом Q и с "пропущенным" nextStartDate
    подхватится на повторное выполнение.

