Набор скриптов предназначен для клонирования схемы с помощью оракловых утилит export/import.

В результате отработки скриптов будет схема, идентичная ( по содержимому и правам) заданной.

Это решение можно использовать:

1) для модуля Continious Integration
В копии схемы можно выполнять установки доработок и прогона тестовых сценариев с помощью модуля ContiniousIntegration
и по завершению схема просто удаляется. Т.о. откат БД к прошлому состоянию не требуется.

2) для разграничения работы разработчиков, выполняющих одновременно доработку по одному модулю.

Ограничения:

1) из-за низкой скорости экспорта/импорта исходная схема не должна быть большой ( ~1гб/мин);
2) необходимость предварительного создания директорий в Oracle ( особенности работы утилит exp/imp);
3) из-за различий версиий Oracle на клиенте и сервере с БД ( UDE-00018: Data Pump client is incompatible with database version ...) скрипты требуется запускать на сервере с БД;
4) возможна необходимость дополнительных корректировок данных/пакетов/представлений в случае, если процесс упадет с ошибкой;
5) временное увеличение потребляемого места;


Порядок запуска:

1) создаем директорию в Oracle, в которой будут храниться дампы, и сохраняем ее значение в переменную среды ORACLE_DUMP_DIR ( в .bash_profile).
Директория создается относительно сервера с БД. После создания необходимо выдать права на чтение/запись пользователю, от имени которого
будет выполняться экспорт/импорт.

Например:

create or replace directory dump_dir as 'E:\oracle\Dump'
/

grant read, write on dump_dir to information
/


2) Запускаем в схеме привилегированного пользователя ( sys/основная схема бд) скрипт копирования пользователя copy-user.sql.
Все объекты нового пользователя будут располагаться в табличных пространствах исходного пользователя, поэтому необходимо удостовериться
в достаточном объеме свободного места.

3) Запускаем в cygwin bash скрипт экспорта export.sh.
Через ключи задаются необходимые для экспорта параметры. Для получения списка всех допустимых ключей можно воспользоваться командой

export.sh -h

4) Запускаем в cygwin bash скрипт импорта import.sh.
Через ключи задаются необходимые для импорта параметры. Для получения списка всех допустимых ключей можно воспользоваться командой

import.sh -h


В перспективе данные скрипты могут быть интегрированы в ContiniousIntegration в качестве дополнительного способа отката бд в исходное состояние.