title: Описание



Подходы:

1. Решение задачи строиться на данных, сохранённых в модуле SvnSearch, выгруженных в свою очередь из SVN. 
Модуль SvnSearch доработан в части предоставления доступа к сохранённым данным 
(доступ к таблице <ss_file>).

2. Процедуры вычисления зависимостей модулей друг от друга выполняются батчами и сохраняют результат в постоянные таблицы. 
Работа пользователей с вычисленными зависимостями модулей только на основе данных, сохранённых предварительно батчами в таблицах. Нет вычислений на лету.

3. Несколько источников для вычисления зависимостей между модулями в связи с
- низкой заполняемостью файлов map.xml. 
- зависимости, учтенные разработчиками, полезно перепроверять и дополнять автоматическими алгоритмами. Поэтому, сохраняется источник и дата вычисления зависимостей.

4. Модули идентифицируются полным путем в SVN. Включая имя репозитория.

5. Схема взаимосвязей строится на "текущий момент". При необходимости, историю можно сохранять стандартным/принятым способом.
    
6. Модуль размещается в SVN в репозитории Oracle. По аналогии с модулем ModuleInfo.

Архитектура:
1. Таблицы для хранения вычисленных зависимостей между модулями:

- <md_module_dependency> - схема зависимостей модулей;
- <md_object_dependency> – схема зависимостей дочерних сущностей (пакетов, типов, представлений и т.п). Таблица играет роль кэша для выгрузки зависимостей из каждой исследуемой БД.

2. Батчи, для вычисления зависимостей между модулями на основе различных источников

- Обновление/заполнение таблицы <md_module_dependency> по содержимому файлов map.xml, хранящихся в <search.ss_file>;
- Обновление/заполнение таблицы <md_module_dependency> по содержимому системного представления all_dependencies ;
- В каждой исследуемой БД выгрузка системного представления all_dependencies в таблицу–кэш <md_object_dependency>, расположенную в БД Exchange.

3. Пакет pkg_ModuleDependency, содержащий функции

- Функции вычисления зависимостей между модулями (используются в батчах):

i. refreshAllModuleDependencyFromSVN - вычисление на основе файлов map.xml

ii. refreshAllModuleDependencyFromSYS - вычисление на основе системного представления all_dependencies и набора эвристик

- Функции для работы с учтенными зависимостями (работа с таблицей <md_module_dependency>):

i. findDependency – возвращает список зависимостей для модуля

ii. deleteDependency – удаляет список зависимостей для модуля

iii. createDependency – создает зависимость модуля от модуля

4. Пакет pkg_ModuleDependencySource, содержащий функции функции выгрузки зависимостей между объектами из системных представлений в кэш-таблицу <md_object_dependency>

i. <unloadObjectDependency> – выгружает зависимости из all_dependencies в <md_object_dependency>.

5. Представления

- v_md_module_dependency  - зависимости модулей друг от друга. На основе таблицы <md_module_dependency> плюс вычисляемые поля module_name и т.п.

