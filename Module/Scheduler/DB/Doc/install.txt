title: Установка

Group: Общие замечания
  Модуль устанавливается под "основным" пользователем базы

Параметры установки:
INSTALL_VERSION               - устанавливаемая версия модуля ( Last при
                                первоначальной установке или номер при
                                обновлении)
LOAD_OPERATORID               - логин и пароль оператора, выполняющего установку
                                ( формат: login/password)
LOAD_USERID                   - основной пользователь для установки в БД
                                ( формат: username/password@dbName)
LOAD_USERID2                  - пользователь, под которым создаются роли
                                для модуля AccessOperator
                                ( формат: username/password@dbName)



Дополнительные параметры:
BATCH_WAIT                    - ожидание окончания работы батчей в секундах
                                ( по умолчанию 60)
JOB_QUEUE_PROCESSES           - новое значение параметра JOB_QUEUE_PROCESSES
                                после завершения установки ( по умолчанию
                                используется сохранненое перед установкой)
Дополнительные параметры:
PRODUCTION_DB_NAME            - может быть использован для явного задания
                                промышленной БД, к которой относится установка
                                ( при установке в тестовую БД
                                должно указываться имя соответствующей
                                промышленной БД, например,
                                PRODUCTION_DB_NAME=ProdDb), по
                                умолчанию значение определяется на основе
                                LOAD_USERID


Используемые настроечные параметры:
- перечислены в <pkg_SchedulerMain::Настроечные параметры>.



Перед установкой модуль останавливает выполнение заданий в БД ( см.
<Install/Config/stop-batches.sql>), а после успешной установки восстанавливает
их выполнение ( см. <Install/Config/resume-batches.sql>).
При повторном запуске установки возможно появление сообщения
"Warning. There's a non-zero value saved in view...",
которое говорит о том, что используется значение параметра JOB_QUEUE_PROCESSES,
запомненного при предыдущем запуске установки.



В случае ошибок при установке:

- ошибка "Batch stop waiting timed out"

В зависимости от работающих батчей, есть вариант увеличить BATCH_WAIT.
Пример запуска установки со временем ожидания 1000 секунд
( ??? нужно заменить на актуальные значения):

(code)

make install INSTALL_VERSION=??? LOAD_USERID=???/???@??? LOAD_OPERATORID=???/??? BATCH_WAIT=1000

(end)

- остальные ошибки

Рекомендуется перезапустить установку с параметром -i ( игнорирование ошибок ).
Можно тажке восстановить запуск заданий в БД:

(code)

$ make install-after LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(end)



group: 4.3.5

Порядок установки:

- установка в основную схему

(code)

$ make install INSTALL_VERSION=4.3.5 LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(end)

Замечания:
- остановка выполнения заданий в БД на время установки не производится;



group: Первоначальная установка

Порядок первоначальной установки текущей версии модуля
( "???" нужно заменить на реальные значения):

- выдача системных привилегий и прав на системные объекты пользователю, под
  которым будет установлен модуль

(code)

$ make grant LOAD_USERID=sys/???@??? TO_USERNAME=??? GRANT_SCRIPT=sys-privs

(end)

- установка модуля в БД

(code)

$ make install INSTALL_VERSION=Last LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(end)

- создание ролей для модуля AccessOperator

(code)

$ make install INSTALL_VERSION=Last LOAD_USERID2=???/???@??? LOAD_OPERATORID=???/???

(end)



group: Удаление модуля из БД

Команда удаления модуля из БД
( "???" нужно заменить на реальные значения):

(code)

$ make uninstall INSTALL_VERSION=Last LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(end)
