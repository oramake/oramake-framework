Title: Доработки



group: Общие

[*] В представлении <v_sch_batch> изменить тип колонок last_start_date и
    last_log_date на timestamp with time zone.

[*] В функции <pkg_Scheduler.clearLog> изменить тип параметра toDate на
    timestamp with time zone.

[+] Добавлить в <pkg_SchedulerLoad> функцию переименования пакетного
    задания ( изменения batch_short_name) для использования в скриптах
    установки модулей.

[*] Вместо процедуры <pkg_SchedulerLoad::body::changeOptionModule> использовать
    процедуру opt_option_list_t.moveAll модуля Option.

[*] Переименовать интерфейсную функцию <pkg_Scheduler.findModule> в getModule.

[*] При ошибке job "Перезапуск пакетов..."
"...Не завершились в отведенное время следующие пакеты.."
записывать в скобках отведённое время

[+] Решить проблему с существованием неиспользуемых job.

[+] Добавить интерфейсные функции <pkg_Schedule.activateBatch( moduleName,
    batchShortNameMask)> <pkg_Schedule.deactivateBatch( moduleName,
    batchShortNameMask)>, <pkg_Scheduler.reactivateBatch( moduleName,
    batchShortNameMask) - активирует батчи, которые были деактивированы только при
    установке данного модуля с ограниением по времени.  Использовать pkg_Scheduler в
    реализации oms-deactivate-batch, oms-activate-batch , oms-reactivate-batch.
    Добавить функцию executeBatch( batchShortNameMask), устанавливающую дату
    выполнения батча, ожидающего завершения работы батчей и опционально
    возвращающую лог выполнения.

[*] Для SQL-реализации job создавать предопределённые переменные с возможностью
    обращения batchParameter.<Имя параметра батча>, таким образом можно будет
    не объявлять переменные в разделе declare SQL job'ов.

[+] Перенести код скриптов OraMakeSystem (exec-batch-operation.sql) а также
    пакета pkg_CredilogicUnloadHandler в модуль Scheduler.



group: Завершение доработок

[*] Удалить объекты, связанные с типом батча ( таблица sch_batch_type и др.)
    после прекращения использования типа батча в OMS ( скрипт
    OmsInternal/exec-batch-operation.sql).

[-] Удалить поля из App-части: is_job_broken, duration_second.

[*] Использовать поле level_name вместо level_description (требует установки
    модуля Logging версии 2.1.0).

[*] В App-части вместо устаревших колонок message_type_code, message_type_name
    использовать колонки level_code, level_name (в курсорах, возвращаемых
    функциями <pkg_Scheduler.findRootLog>, <pkg_Scheduler.getDetailedLog>).

[*] Удалить устаревшее поле oracle_job_id в <sch_batch>
    после прекращения использования в OraMakeSystem, CredilogicUnload.




