title: Установка

group: Общие замечания

Параметры установки:
INSTALL_VERSION               - устанавливаемая версия схемы ( Last при
                                первоначальной установке или номер при
                                обновлении, например 1.1.0)
LOAD_OPERATORID               - логин и пароль оператора, выполняющего установку
LOAD_USERID                   - основная схема для установки
LOAD_USERID2                  - пользовательская ( не основная) схема для установки



Дополнительные параметры:
BATCH_WAIT                    - ожидание окончания работы батчей в секундах
                                ( по умолчанию 60)
JOB_QUEUE_PROCESSES           - новое значение параметра JOB_QUEUE_PROCESSES
                                после завершения установки ( по умолчанию
                                используется сохранненое перед установкой)



Перед установкой модуль останавливает выполнение заданий в БД ( см.
<Install/Config/stop-batches.sql>), а после успешной установки восстанавливает
их выполнение ( см. <Install/Config/resume-batches.sql>).
При повторном запуске установки возможно появление сообщения
"Warning. There's a non-zero value saved in view...",
которое говорит о том, что используется значение параметра JOB_QUEUE_PROCESSES,
запомненного при предыдущем запуске установки.


В случае ошибок при установке:

- ошибка "Batch stop waiting timed out"

В зависимости от работающих батчей, есть вариант увеличить BATCH_WAIT.
Пример запуска установки со временем ожидания 1000 секунд
( ??? нужно заменить на актуальные значения):

(code)

make install INSTALL_VERSION=??? LOAD_USERID=???/???@??? LOAD_OPERATORID=???/??? BATCH_WAIT=1000

(end)

- остальные ошибки

Рекомендуется перезапустить установку с параметром -i ( игнорирование ошибок ).
Можно тажке восстановить запуск заданий в БД:

(code)

$ make install-after LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(end)


group: Last


Команда для установки
( ??? - нужно заменить на актуальные значения):

(code)

$ make install INSTALL_VERSION=Last LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(end)

Замечание:
  - при установке модуля выполняется скрипт по выдаче прав всем пользователям
    <Install/Grant/Last/all-to-public.sql>
  - при установке для возможности компиляции пакета устанавливается временная
    спецификация пакета <pkg_Scheduler(dummy)>; Для корректной работы модуля
    следует установить модуль Scheduler.



group: Установка в пользовательскую схему ( не основную) для возможности
использования соединения стека.

(code)

$ make install INSTALL_VERSION=Last LOAD_USERID2=???/???@??? LOAD_OPERATORID=???/???

(end)


group: Выдача системных привилегий для установки

(code)

$ make grant LOAD_USERID=???/???@??? GRANT_SCRIPT=sys-privs TO_USERNAME=???

(end)


