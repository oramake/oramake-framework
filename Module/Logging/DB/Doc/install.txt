title: Установка

group: Общие замечания

Параметры установки:
INSTALL_VERSION               - устанавливаемая версия модуля ( Last при
                                первоначальной установке или номер при
                                обновлении)
LOAD_OPERATORID               - логин и пароль оператора, выполняющего
                                установку (в случае отсутствия в БД модуля
                                AccessOperator параметр LOAD_OPERATORID
                                указывать не надо)
                                ( формат: login/password)
LOAD_USERID                   - основной пользователь для установки в БД
                                ( формат: username/password@dbName)
LOAD_USERID2                  - пользовательская ( не основная) схема для
                                установки
                                ( формат: username/password@dbName)

Дополнительные параметры:
BATCH_WAIT                    - ожидание окончания работы батчей в секундах
                                ( по умолчанию 60)
NO_ACCESSOPERATOR             - флаг отсутствия в БД модуля AccessOperator
                                ( "1" отсутствует ( при этом не создаются
                                внешние ключи на таблицу op_operator), 0
                                присутствует, по умолчанию 0)


На время установки деактивируются пакетные задания, реализованные с помощью
модуля Scheduler. В случае ошибки при установке "Batch stop waiting timed out"
можно попробовать увеличить BATCH_WAIT. Пример запуска установки с ожиданием
остановки пакетных заданий в течении 1000 секунд

(code)

make install INSTALL_VERSION=??? LOAD_USERID=???/???@??? LOAD_OPERATORID=???/??? BATCH_WAIT=1000

(end)

В случае невозможности в данный момент выполнить установку можно восстановить
выполнение пакетных заданий командой

(code)

make install-after LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(end)



group: 2.1.0

Предварительные требования:
- если используется модуль Scheduler, то он должен быть обновлен до версии
  не ниже 5.1.0;

Порядок установки:

- установка в основную схему

> make install INSTALL_VERSION=2.1.0 LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(в случае отсутствия в БД модуля AccessOperator вместо параметра
LOAD_OPERATORID нужно указать "NO_ACCESSOPERATOR=1")

- повторная выдача прав пользователям, которым ранее были выданы права на
  использование модуля

> make grant LOAD_USERID=???/???@??? TO_USERNAME=??? LOAD_OPERATORID=???/???

Замечания:
- при необходимости можно выполнить откат к версии 2.0.0 командой:

> make uninstall INSTALL_VERSION=2.1.0 UNINSTALL_RESULT_VERSION=2.0.0 LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

- в случае отсутствия в БД модуля AccessOperator параметр LOAD_OPERATORID
  указывать не надо;



group: 2.0.0

Порядок установки:

- установка в основную схему

(code)

make install INSTALL_VERSION=2.0.0 LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(end)

Замечания:
- при необходимости можно выполнить откат к версии 1.4.1 командой:

(code)

make uninstall INSTALL_VERSION=2.0.0 UNINSTALL_RESULT_VERSION=1.4.1 LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(end)

- в случае отсутствия в БД модуля AccessOperator параметр LOAD_OPERATORID
  указывать не надо;



group: 1.4.1

Порядок установки:

- установка в основную схему

(code)

make install INSTALL_VERSION=1.4.1 LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(end)

Замечания:
- в случае отсутствия в БД модуля AccessOperator параметр LOAD_OPERATORID
  указывать не надо;



group: Первоначальная установка

Предварительные требования:
- установка модуля ModuleInfo;
- установка модуля Common;

Порядок первоначальной установки:

- установка объектов модуля

(code)

make install INSTALL_VERSION=Last LOAD_USERID=???/???@??? NO_ACCESSOPERATOR=1

(end)

Замечания:
- в случае наличия в БД модуля AccessOperator необходимо вместо параметра
  NO_ACCESSOPERATOR использовать LOAD_OPERATORID ( " LOAD_OPERATORID=???/???"))



group: Выдача прав на использование модуля

Команда для выдачи прав на использование модуля другим пользователям БД:

(code)

make grant LOAD_USERID=???/???@??? TO_USERNAME=???

(end)

Замечания:
- в случае наличия в БД модуля AccessOperator в команду нужно добавить параметр
  LOAD_OPERATORID ( "  LOAD_OPERATORID=???/???");
- для выдачи прав всем пользователям в качестве значения TO_USERNAME нужно
  указать PUBLIC;
- для выдачи прав необходимо наличие привилегии "CREATE ANY SYNONYM" в случае
  выдачи прав конкретному пользователю или "CREATE PUBLIC SYNONYM" в случае
  выдачи прав всем пользователям;



group: Установка в пользовательскую схему

Установка в пользовательскую ( не основную) схему выполняется для возможности
использования соединения стека.

Команда для установки:

(code)

make install INSTALL_VERSION=Last LOAD_USERID2=???/???@???

(end)

Замечания:
- в случае наличия в БД модуля AccessOperator в команду нужно добавить параметр
  LOAD_OPERATORID ( "  LOAD_OPERATORID=???/???");



group: Выполнение тестов

Предварительные требования:
- установка модуля TestUtility;

Команда установки объектов для выполнения тестов:

(code)

make install-test LOAD_USERID=???/???@???

(end)

Команда для выполнения всех тестов:

(code)

make test LOAD_USERID=???/???@???

(end)

Замечания:
- в случае наличия в БД модуля AccessOperator в команды нужно добавить параметр
  LOAD_OPERATORID ( "  LOAD_OPERATORID=???/???");



group: Удаление модуля из БД

Порядок удаления модуля из БД:

- удаление из пользовательской схемы ( для всех схем, в которые выполнялась
  <Установка в пользовательскую схему>)

(code)

make uninstall INSTALL_VERSION=Last LOAD_USERID2=???/???@???

(end)

- удаление из основной схемы

(code)

make uninstall INSTALL_VERSION=Last LOAD_USERID=???/???@???

(end)

Замечания:
- в случае наличия в БД модуля AccessOperator в команду нужно добавить параметр
  LOAD_OPERATORID ( "  LOAD_OPERATORID=???/???");
