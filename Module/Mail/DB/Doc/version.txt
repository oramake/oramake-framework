title: Версии



group: 2.7.0 ( 2021-01-31)

[*] Уточнен уникальный индекс на таблице <ml_message> для уменьшения длины индексного ключа.



group: 2.6.0 ( 2020-12-19)

[+] Добавлена возможность использовать SMTP-сервер с SSL-авторизацией.
    Для выполнения SSL-авторизации нужно в пакетном задании SendMailHandler
    указать значения параметров авторизации (Username, Password) либо задавать
    эти значения при вызове функции <pkg_Mail.sendMail>.



group: 2.5.0 ( 2019-01-18)

[*] Изменение размера полей таблицы <ml_message>: sender_address varchar2(100), recipient_address varchar2(100).

[*] Поле <ml_message.expire_date> по умолчанию заполняется в процедуре pkg_Mail.sendMessage значением sysdate+60 (в случае если параметр процедуры expireDate is null).

[*] Для уже существующих записей таблицы <ml_message> заполняет незаполненные поля <expire_date> значением sysdate+90.



group: 2.3.0 ( 2019-01-11)

[+] Добавлен счетчик попыток отправки сообщений. При достижении предельного
    количества попыток - отправка сообщения прекращается.



group: 2.2.0 ( 2018-05-28)

[-] Delete obsolete library activation.jar (the classes are included in
    Java SE 6). Installation caused errors in Oracle 12.2.0.1.



group: 2.1.0 ( 2017-08-03)

[*] Замена SQLJ на JDBC.



group: 2.0.2 ( 2017-01-16)

[!] Добавлен commit в функциях отправки и получения почтовых сообщений для
    явного завершения автономной транзации ( т.к. при получении сообщений в
    некоторых случаях могла возникать ошибка
    "ORA-06519: active autonomous transaction detected and rolled back").

[!] Исправлена ошибка в скрипте остановки заданий перед началом установки
    ( используется при указании парамета STOP_JOB=1), внесенная в версии 2.0.1.



group: 2.0.1 ( 2017-01-12)

[!] Восстановлена возможность использования функции
    <pkg_Mail.addHtmlImageAttachment> ( после изменений в версии 2.0.0
    при каждом вызове функции выбрасывалось исключение).

[!] Исправлена ошибка с игнорированием дополнительных параметров установки
    ( например, STOP_JOB) в случае указания параметра SQL_DEFINE.



group: 2.0.0 ( 2016-10-12)

[+] Добавлена возможность удаления ранее полученных сообщений из почтового
    ящика ( <pkg_Mail.deleteMailboxMessage>).

[*] В функции fetchMessage и getMessage пакта <pkg_Mail> добавлен параметр
    isGotMessageDeleted, процедура pkg_MailInternal.setIsGotMessageDeleted
    удалена.

[*] Функция fetchMessageImmediate перенесена из пакета <pkg_Mail> в пакет
    <pkg_MailHandler>.

[!] Запрещено изменение состояния сообщений, ожидающих отправки, с помощью
    процедуры <pkg_Mail.setProcessError> ( должна использоваться процедура
    <pkg_Mail.cancelSendMessage>).

[!] Исправлено имя параметра пакетного задания SendMailHandler
    ( SmtpServerList вместо SmtpServer).

[-] Удалены настройки и функции, связанные с отправкой сообщений через
    выделенные SMTP-сервера ( предполагается, что данный функционал будет
    реализовываться в прикладных модулях).



group: 1.7.9 ( 2015-07-18)

[!] Функция isEmailValid возвращала результат 0 для адресов вида
    "test-test@rambler.ru".



group: 1.7.8 ( 2015-05-21)

[!] Функция isEmailValid возвращала результат 1 для адресов вида
    "test,17@mail.ru".



group: 1.7.7 ( 2013-08-24)

[+] Реализации батчей пересены из BatchLoader.



group: 1.7.6 ( 2013-06-18)

[!] Явное закрытие курсора для цикла по вложениям в Java-реализации
    ( может возникнуть ошибка "ORA-01000: количество открытых курсоров
      превысило допустимый максимум");
