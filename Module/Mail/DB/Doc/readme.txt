title: ќписание

ћодуль предназначен дл€ обработки почтовых запросов.

¬озможности:
- получение и сохранение в Ѕƒ почтовых запросов ( поддерживаютс€ вложени€ и
  вложенные сообщени€);
- обработка полученных и отправка ответных сообщений ( с вложени€ми) в рамках
  транзакции;
- непосредственна€ отправка письма с вложением ( без сохранени€ в Ѕƒ);
- получение почты по протоколам POP3 и IMAP, отправка - по SMTP ( возможно использование разных 
SMTP-серверов ); 

ƒополнительные возможности:
- поддержка логических цепочек сообщений ( например, запрос-ответ);
- автоматическое удаление сообщений по истечению срока жизни;
- нотификаци€ в случае ошибок при оправке сообщений;
- отправка сообщений в виде html

»спользование:
- в простейшем случае обработку почтовых сообщений можно выполнить следующим
  образом

  (start code)
  
  loop
    messageId := pkg_Mail.GetMessage( url);
    exit when messageId is null;
    
    --обрабатываем полученное сообщение

  end loop;
  
  commit;
  
  (end)

  при этом в случае отсутстви€ почтовых сообщений дл€ обрработки, функци€
  <pkg_Mail.GetMessage> будет вызывать <pkg_Mail.FetchMessage> дл€ получени€
  писем из почтового €щика.

- дл€ €вного контрол€ над подключением к почтовому €щику можно использовать
  цикл:

  (start code)

  loop
    nFetch := pkg_Mail.FetchMessage( url);
    exit when nFetch = 0;

    loop
      messageId := pkg_Mail.GetMessage( recipientAddress => recipientAddress);
      exit when messageId is null;
      
      --обрабатываем полученное сообщение

    end loop;

    commit;

  end loop;

  (end)


 
