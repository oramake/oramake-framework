title: Установка


group: Общие замечания

Параметры установки:
INSTALL_VERSION               - устанавливаемая версия модуля ( Last при
                                первоначальной установке или номер при
                                обновлении)
LOAD_OPERATORID               - логин и пароль оператора, выполняющего установку
                                ( формат: login/password)
LOAD_USERID                   - основной пользователь для установки в БД
                                ( формат: username/password@dbName)
TO_USERNAME                   - имя пользователя, которому выдаются права
                                ( формат: username)

Замечания:
- если модуль AccessOperator не установлен, то параметр LOAD_OPERATORID
  указывать не надо;
- перед установкой выполняется деактивация пакетных заданий модуля Scheduler, а
  после успешной установки активация восстанавливается. Если модуль Scheduler
  не установлен, то нужно исключить приостановку выполнения командных заданий,
  добавив в команду установки

> SKIP_FILE_MASK=Install/Config/before-action.sql,Install/Config/after-action.sql

  В случае ошибок при установке можно выполнить команду для восстановления
  выполнения заданий:

> make install-after LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???


group: 3.2.0

Порядок установки:

- установка в основную схему;

(code)

make install INSTALL_VERSION=3.2.0 LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(end)

group: 3.1.1

Порядок установки:

- установка в основную схему;

> make install INSTALL_VERSION=3.1.1 LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

group: 3.1.0

Порядок установки:

- установка в основную схему;

(code)

make install INSTALL_VERSION=3.1.0 LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(end)

Замечания:
- в случае отсутствия в БД модуля AccessOperator параметр LOAD_OPERATORID
  указывать не надо;



group: 3.0.0
(<Версии::3.0.0 ( 2017-12-07)>)

Предварительные требования:

- установка модуля OraMakeSystem версии 2.0.0;

Порядок установки:

- установка в основную схему;

(code)

make install INSTALL_VERSION=3.0.0 LOAD_USERID=???/???@??? LOAD_OPERATORID=???/???

(end code)

После установки требуется установить:

- настройки БД в таблице <cmn_database_config>



group: 2.9.0
(<Версии::2.9.0 ( 2017-09-20)>)

Порядок установки:

- установка в основную схему;

(code)

make install INSTALL_VERSION=2.9.0 LOAD_USERID=???/???@???

(end code)

После установки требуется установить:

- настройки БД в таблице <cmn_database_config>



group: Первоначальная установка

Порядок для первоначальной установки последней версии модуля:

- выдача дополнительных прав на системные объекты ( в TO_USERNAME указывается
  пользователь, в схему которого будет установлен модуль)

(code)

$ make grant INSTALL_VERSION=Last LOAD_USERID=sys/???@??? GRANT_SCRIPT=sys-privs TO_USERNAME=???

(end)

( в случае, если у пользователя, под которым выдаются права, нет прав на
использование модуля ModuleInfo, то нужно отключить сохранение информации об
установке в ModuleInfo, дополнив команду строкой
"  OMS_SAVE_FILE_INSTALL_INFO=0 SKIP_FILE_MASK=*/oms-save-grant-info.sql"
)

- установка объектов модуля

(code)

$ make install INSTALL_VERSION=Last LOAD_USERID=???/???@???

(end)

- выдача прав на использование модуля

Команда для выдачи прав на использование модуля всем пользователям
( у пользователя, в схему которого установлен модуль, должна быть системная
привилегия "CREATE PUBLIC SYNONYM"):

(code)

$ make grant INSTALL_VERSION=Last LOAD_USERID=???/???@??? TO_USERNAME=public

(end)

( для выдачи прав только конкретному пользователю его нужно указать в
  TO_USERNAME вместо public)

- выдача дополнительных прав через ACL

Команда для добавления smtp-сервера по-умолчанию в ACL-лист ( в TO_USERNAME
указывается пользователь, в схему которого будет установлен модуль):

(code)

$ make grant INSTALL_VERSION=Last LOAD_USERID=sys/???@??? GRANT_SCRIPT=acl-grant TO_USERNAME=???

(end)

( в случае, если у пользователя, под которым выдаются права, нет прав на
использование модуля ModuleInfo, то нужно отключить сохранение информации об
установке в ModuleInfo, дополнив команду строкой
"  OMS_SAVE_FILE_INSTALL_INFO=0 SKIP_FILE_MASK=*/oms-save-grant-info.sql"
)

Для успешного выполнения функции <pkg_Common.getIpAddress> в Oracle 11 и выше
также требуется выдача дополнительных прав через ACL.

Замечания:
- для того, чтобы БД считалась промышленной ( а также для указания специальных
  настроек, например, SMTP-сервера) нужно модифицировать скрипт
  Install/Data/Last/cmn_database_config.sql, заполняющий таблицу
  <cmn_database_config> при установке;



group: Удаление модуля из БД

Команда для удаления модуля из БД:

(code)

$ make uninstall INSTALL_VERSION=Last LOAD_USERID=???/???@???

(end)
