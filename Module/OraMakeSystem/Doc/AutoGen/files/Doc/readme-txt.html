<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=Windows-1251"><title>Описание - OraMakeSystem</title><link rel="stylesheet" type="text/css" href="../../styles/main.css"><script language=JavaScript src="../../javascript/main.js"></script><script language=JavaScript src="../../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.5 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CSection"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="Описание"></a>Описание</h1><div class=CBody><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#Описание" >Описание</a></td><td class=SDescription></td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Описание.Назначение" >Назначение</a></td><td class=SDescription>Проект OraMakeSystem ( OMS) предназначен для стандартизации структуры и автоматизации операций при разработке программных модулей для БД Oracle.</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Описание.Созданиеструктурымодуля" >Создание структуры модуля</a></td><td class=SDescription>Для использования OMS в программном модуле, в него должны быть добавлен минимальный набор стандартных файлов и каталогов ( см. </td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Описание.Обновлениеструктурымодуля" >Обновление структуры модуля</a></td><td class=SDescription>Для использовния в програмных модулях новых возможностей, появившихся в новых версиях OMS, требуется обновить стандартные файлы OMS, включенные в состав модуля ( например, DB/Makefile и т.д.)</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Описание.Параметрымодуля" >Параметры модуля</a></td><td class=SDescription>Параметры текущего модуля получаются из файла Doc/map.xml.</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Описание.Автоматизацияопераций" >Автоматизация операций</a></td><td class=SDescription>Автоматизация обеспечивает простое выполнение сложных операций.</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Описание.Автодокументирование" >Автодокументирование</a></td><td class=SDescription>Документирование производится автоматически с на основе комментариев, присутствующих в файлах. </td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Описание.ЗагрузкафайловвБД" >Загрузка файлов в БД</a></td><td class=SDescription>Предусмотрена возможность загрузки ( установки) файлов с программными единицами и выполнение скриптов ( например, заполняющих стандартные справочники) в БД.</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Описание.УстановкамодулявБД" >Установка модуля в БД</a></td><td class=SDescription>Для упрощения процесса установки предполагается единообразный способ установки модулей.</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Описание.ЗагрузкабатчеймодуляSchedulerвБД" >Загрузка батчей модуля Scheduler в БД</a></td><td class=SDescription><b>Загрузка батчей в БД</b> реализована в OraMakeSystem с помощью вызовов процедур модуля Scheduler ( пакет pkg_SchedulerLoad), данные для которых берутся из данных локальных файлов модуля ( *.job.sql, batch.xml, batch_config.xml);</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Описание.ОтменаустановкимодулявБД" >Отмена установки модуля в БД</a></td><td class=SDescription>Отмена установки ( обновления) модуля в БД выполняется с помощью вызова make с целью uninstall с указанием версии модуля, а также параметров подключения к БД и логина оператора, выполняющего операцию. </td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Описание.ВыдачаправпользователямБД" >Выдача прав пользователям БД</a></td><td class=SDescription>Выдача прав пользователям БД выполняется с помощью вызова make с целью grant с указанием в параметре TO_USERNAME пользователя, которому выдаются права, а также параметров подключения к БД. </td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Описание.Запускoms-скриптов" >Запуск oms-скриптов</a></td><td class=SDescription>Запуск oms-скритов ( например, <a href="../Script/oms-create-module-.html#oms-create-module" class=LFile id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">oms-create-module</a>) естественным образом выполнятеся в bash ( Cygwin Terminal):</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#Описание.ПрикладныеSQL-скрипты" >Прикладные SQL-скрипты</a></td><td class=SDescription>В состав OMS входят прикладные SQL-скрипты, предназначенные для использования из пользовательских скриптов. </td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Описание.Назначение"></a>Назначение</h3><div class=CBody><p>Проект OraMakeSystem ( OMS) предназначен для стандартизации структуры и автоматизации операций при разработке программных модулей для БД Oracle.</p><h4 class=CHeading>Возможности</h4><ul><li>создание и обновление стандартной структуры модуля</li><li>автоматизация операций</li><li>автодокументирование исходного кода</li><li>загрузка файлов ( программных единиц и данных) в БД</li><li>установка модуля в БД</li></ul></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Описание.Созданиеструктурымодуля"></a>Создание структуры модуля</h3><div class=CBody><p>Для использования OMS в программном модуле, в него должны быть добавлен минимальный набор стандартных файлов и каталогов ( см.&nbsp; <a href="Agreement/directory_tree-txt.html#Структуракаталогов" class=LSection >Структура каталогов</a>).&nbsp; Эта операция выполняется скриптом <a href="../Script/oms-create-module-.html#oms-create-module" class=LFile id=link2 onMouseOver="ShowTip(event, 'tt1', 'link2')" onMouseOut="HideTip('tt1')">oms-create-module</a>.&nbsp; Оптимальным вариантом является предварительное добавление модуля ( каталога &lt;ModuleName&gt;/Trunk) в систему контроля версий Subversion, т.к.&nbsp; в этом случае скрипт сможет выполнить необходимую настройку параметров создаваемых файлов и каталогов в Subversion.</p><h4 class=CHeading>Пример ( создание структуры для модуля DocumentLink)</h4><blockquote><pre>$ cd /tmp

$ svn co -q svn://.../DocumentLink/Trunk DocumentLink

$ cd DocumentLink

$ oms-create-module -d . DocumentLink

$ svn status
A      DB\loaddeps.mk
A      DB\OmsModule
A      DB\OmsModule\Load
A      DB\OmsModule\NaturalDocs
A      DB\OmsModule\NaturalDocs\Topics.txt
A      DB\OmsModule\NaturalDocs\Menu.txt
A      DB\OmsModule\NaturalDocs\Languages.txt
A      DB\OmsModule\NaturalDocs\Data
A      DB\OmsModule\init.mk
A      DB\OmsModule\common.mk
A      DB\Doc
A      DB\Doc\todo.txt
A      DB\Doc\install.txt
A      DB\Doc\readme.txt
A      DB\Doc\bugs.txt
A      DB\pkg_DocumentLink.pkb
A      DB\pkg_DocumentLink.pks
A      DB\Makefile
A      Doc\DB
A      Doc\DB\AutoGen
A      Doc\map.xml
A      Makefile

$ oms-create-module --version
oms-create-module (OMS) 1.4.1
OMS Version Information:
  Module root     : Common/Oracle/OracleMakeSystem
  File revision   : 445
  File change date: 2009-02-06 10:10:48 +0300</pre></blockquote><p>Последние две команды в примере показывают созданные файлы и каталоги, а также версию скрипта oms-create-module, которым они были созданы.&nbsp; После создания структуры можно вручную внести дополнительные изменения ( например, в файл Doc/map.xml), после чего сохранить изменения в Subversion командой &ldquo;svn commit&rdquo;.</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Описание.Обновлениеструктурымодуля"></a>Обновление структуры модуля</h3><div class=CBody><p>Для использовния в програмных модулях новых возможностей, появившихся в новых версиях OMS, требуется обновить стандартные файлы OMS, включенные в состав модуля ( например, DB/Makefile и т.д.).&nbsp; Сначала новую версия OMS нужно устанавить на локальный компьютер ( см.&nbsp; <a href="../Makefile-.html#Установка" class=LGroup >Установка</a>), после чего при очередной доработке програмного модуля желательно обновить его структуру.&nbsp; Процесс обновления автоматизирован и выполняется скриптом <a href="../Script/oms-update-module-.html#oms-update-module" class=LFile id=link3 onMouseOver="ShowTip(event, 'tt2', 'link3')" onMouseOut="HideTip('tt2')">oms-update-module</a>, который вызывается при выполнении в програмном модуле через make цели <a href="../Config/NewModule/DB/Makefile-.html#update-oms-version" class=LBuildTarget id=link4 onMouseOver="ShowTip(event, 'tt3', 'link4')" onMouseOut="HideTip('tt3')">update-oms-version</a> ( текущую версию OMS-файлов модуля можно посмотреть с помощью команды &ldquo;make show-oms-version&rdquo;).</p><h4 class=CHeading>Пример</h4><blockquote><pre>$ make show-oms-version
make[1]: Entering directory `/cygdrive/d/users/mao/oracle/scripts/dic/DB'
OMS files version: 1.4.1 ( rev. 468, 2009-05-13)
make[1]: Leaving directory `/cygdrive/d/users/mao/oracle/scripts/dic/DB'

$ make update-oms-version
make[1]: Entering directory `/cygdrive/d/users/mao/oracle/scripts/dic/DB'
oms-update-module: updated OMS revision: 468 -&gt; 566
make[1]: Leaving directory `/cygdrive/d/users/mao/oracle/scripts/dic/DB'

$ make show-oms-version
make[1]: Entering directory `/cygdrive/d/users/mao/oracle/scripts/dic/DB'
OMS files version: 1.4.1 ( rev. 566, 2009-12-08)
make[1]: Leaving directory `/cygdrive/d/users/mao/oracle/scripts/dic/DB'

$ svn status
M      DB\OmsModule\NaturalDocs\Languages.txt
M      DB\OmsModule\init.mk
M      DB\OmsModule\common.mk
M      DB\Makefile</pre></blockquote><p>В этом примере OMS-файлы модуля были обновлены с правки 468 до правки 566 ( номера правок относятся к изменениям, внесенным в рамках OMS), при этом обе версии основаны на релизе OMS 1.4.1.&nbsp; Рекомендуется фиксировать изменения структуры модуля в виде отдельной правки в Subversion ( т.е.&nbsp; не объединять их с другими изменениями в модуле).</p><p>Иногда при обновлении возникают ошибки, связанные с невозможностью автоматического слияния изменений, внесенных в рамках OMS, с локальными изменениями, внесенными в файлы в рамках модуля ( обычно это касается файла DB/Makefile).</p><h4 class=CHeading>Пример ( ошибка обновления)</h4><blockquote><pre>make[1]: Entering directory `/cygdrive/d/users/mao/oracle/scripts/dic/DB'
1 out of 4 hunks FAILED -- saving rejects to file ../DB/Makefile.562.rej
oms-update-module: error patch: ../DB/Makefile, p----562.diff
oms-update-module: updated OMS revision: 468 -&gt; 566
make[1]: Leaving directory `/cygdrive/d/users/mao/oracle/scripts/dic/DB'</pre></blockquote><p>В данном случае не удалось внести некоторые изменения в файл DB/Makefile ( изменения, которые не удалось внести, были сохранены в файле DB/Makefile.562.rej), остальные файлы были успешно обновлены.&nbsp; Для решения проблемы нужно вручную внести необходимые изменения, выполненные в рамках OMS.&nbsp; Возможен также альтернативный способ: получить стандартный файл DB/Makefile ( удалив существующий и выполнив скрипт <a href="../Script/oms-create-module-.html#oms-create-module" class=LFile id=link5 onMouseOver="ShowTip(event, 'tt1', 'link5')" onMouseOut="HideTip('tt1')">oms-create-module</a>) и вручную внести в него локальные изменения, внесенные ранее в рамках модуля.</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Описание.Параметрымодуля"></a>Параметры модуля</h3><div class=CBody><p>Параметры текущего модуля получаются из файла Doc/map.xml.</p><p>Используются значения из следующих тэгов:</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>initialPath</td><td class=CDLDescription>первоначальный путь к корневому каталогу модуля в Subversion, включая имя репозитария и правку, в которой был создан каталог</td></tr></table><p>Считается уникальным идентификатором модуля, никогда не должен изменяться после первоначального заполнения ( в т.ч.&nbsp; в случае переноса модуля в другой репозитарий).&nbsp; Пример: &ldquo;&lt;initialPath&gt;Oracle/Module/ModuleInfo@711&lt;/initialPath&gt;&rdquo;.</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>path</td><td class=CDLDescription>путь к корневому каталогу модуля в Subversion ( начиная с имени репозитария)</td></tr></table><p>Считается текущим уникальным идентификатором модуля, значение должно корректироваться в случае переименования или перемещения модуля.&nbsp; Пример: &ldquo;&lt;path&gt;Oracle/Module/ModuleInfo&lt;/path&gt;&rdquo;.</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>version</td><td class=CDLDescription>текущая версия модуля ( последовательность из нескольких ( обычно трех) неотрицательных целых чисел, разделяемых точками, например 2.1.0)</td></tr></table><p>Номер версии должен увеличиваться в при внесении изменений в модуль.&nbsp; Пример: &ldquo;&lt;version&gt;1.0.0&lt;/version&gt;&rdquo;.&nbsp; Для установки версии можно использовать команду</p><blockquote><pre>$ make set-version MODULE_VERSION=???</pre></blockquote><p>либо</p><blockquote><pre>$ oms-module set-version ???</pre></blockquote><p>( команды выполняются в каталоге модуля, вместо ???&nbsp; нужно указать корректный номер версии, например 1.2.0)</p><p>Также для удобства использования реализовано автоматическое изменение номера версии в случае выполнения команды &ldquo;make install INSTALL_VERSION=???&nbsp; ...&rdquo;&nbsp; и наличия подтверждения корректности указанного номер версии ( например, наличие каталога DB/Install/Config/???), после чего необходимо обновить документацию командой &ldquo;make gendoc&rdquo;:</p><blockquote><pre>$ make install INSTALL_VERSION=2.7.0 ...
OMS: module version changed using INSTALL_VERSION: 2.7.0 ( please, run &quot;make gendoc&quot;)
...</pre></blockquote><p>Значения указанных выше тэгов ( initialPath, path, version) должны обязательно присутствовать файле Doc/map.xml, т.к.&nbsp; они используются при автоматическом сохранении в БД информации об выполнении установки модуля ( см.&nbsp; <a href="#Описание.УстановкамодулявБД" class=LGroup id=link6 onMouseOver="ShowTip(event, 'tt4', 'link6')" onMouseOut="HideTip('tt4')">Установка модуля в БД</a>, подцель install-save-info).</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Описание.Автоматизацияопераций"></a>Автоматизация операций</h3><div class=CBody><p>Автоматизация обеспечивает простое выполнение сложных операций.</p><p>Для автоматизации операций используется утилита GNU Make ( <a href="http://www.gnu.org/software/make" class=LURL target=_top>http://www.gnu.org/software/make</a>), которая входит в состав Gygwin.</p><p>Настройки Make находятся в файлах</p><ul><li>Makefile</li><li>DB/Makefile</li><li>DB/OmsModule/common.mk</li></ul><p>Настроенные операции ( цели в терминах Make) документируются на основе файла DB/Makefile и отражаются в разделе &ldquo;О модуле\Сборка&rdquo;.</p><p>Для выполнения операции нужно в корневом каталоге проекта выполнить</p><blockquote><pre>$ make &lt;имя цели&gt;</pre></blockquote><p>Запуск make желательно производить из bash ( Cygwin Terminal), однако в большинстве случаев все будет корректно работать и при запуске из коммандной строки Windows.</p><p>Для обеспечения выполнения Make в каталоге, отличном от текущего, можно использовать параметр -C:</p><blockquote><pre>$ make -C &quot;&lt;путь к каталогу&gt;&quot; &lt;имя цели&gt;</pre></blockquote><p>Если имя цели не указано, то выполняется первая цель, присутствующая в настроечном файле ( обычно это цель &ldquo;all&rdquo;, выполняющая все операции по сборке модуля).</p><p>При запуске Make можно указывать значения для переменных, которые используются при выполнении операции ( обычно это пути к каталогам, специальные опции и т.д.).</p><p>Например, вызов</p><blockquote><pre>$ make gendoc GENDOC_DB_DIR=&quot;c:\tmp\doc&quot;</pre></blockquote><p>вызовет генерацию документации в каталоге c:\tmp\doc ( если переменная GENDOC_DB_DIR используется внутри make-файла в качестве пути для генерации документации).</p><h4 class=CHeading>Часто используемые параметры make</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>-B, --always-make</td><td class=CDLDescription>безусловное достижение целей</td></tr><tr><td class=CDLEntry>-i, --ignore-errors</td><td class=CDLDescription>игнорировать ошибки при выполнении команд</td></tr><tr><td class=CDLEntry>-k, --keep-going</td><td class=CDLDescription>продолжать выполнение, даже если некоторые цели не достигнуты ( из-за ошибки)</td></tr></table></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Описание.Автодокументирование"></a>Автодокументирование</h3><div class=CBody><p>Документирование производится автоматически с на основе комментариев, присутствующих в файлах.&nbsp; Для того, чтобы файл был документирован, он должен иметь определенное расширение и в нем должны присутствовать комментарии определенного вида ( соглашение <a href="Agreement/comment-txt.html#Комментарии" class=LSection >Комментарии</a>).&nbsp; Для документирования используется утилита NaturalDocs ( <a href="http://www.naturaldocs.org" class=LURL target=_top>http://www.naturaldocs.org</a>), позволяющая формировать документацию в формате HTML.</p><h4 class=CHeading>Примеры документируемых файлов</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Makefile, makefile</td><td class=CDLDescription>make-файлы</td></tr><tr><td class=CDLEntry>*.java</td><td class=CDLDescription>Java</td></tr><tr><td class=CDLEntry>*.pks, *.pkb</td><td class=CDLDescription>PL/SQL пакеты</td></tr><tr><td class=CDLEntry>*.txt</td><td class=CDLDescription>текстовые файлы</td></tr></table><p>Текстовые файлы отличаются от других тем, что для них не определен символ начала комментария ( все строки считаются комментариями).</p><p>Для генерации документации нужно вызвать make для цели gendoc ( или all или без указания цели) в корневом каталоге модуля:</p><blockquote><pre>$ make gendoc</pre></blockquote><p>В результате должна обновиться документация в каталоге Doc/DB/AutoGen.</p><p>В случае, если в модуле добавлялись или удалялись документированные файлы, следует использовать цель gendoc-menu:</p><blockquote><pre>$ make gendoc-menu</pre></blockquote><p>При этом кроме документации к файлам регенерируется также и меню автодокуметации ( см.&nbsp; соглашение <a href="Agreement/doc_menu_tree-txt.html#Менюдокументации" class=LSection >Меню документации</a>).&nbsp; Реализованы именно две цели gendoc и gendoc-menu, потому что обычно цель gendoc достигается быстрее, чем gendoc-menu.&nbsp; При вызове gendoc-menu цель gendoc вызывать не нужно.</p><p>Состояние файлов кэшируется во временных файлах каталога DB/OmsModule/NaturalDocs/Data и при повторном вызове будет обновлена документация только по тем файлам, которые были изменены.</p><p>Для принудительной регенерации документации можно использовать стандартный флаг Make -B ( --always-make):</p><blockquote><pre>$ make -B gendoc-menu</pre></blockquote><p>Параметры документирования определяются стандартными настройками NaturalDocs и локальными настройками модуля, которые находятся в DB/OmsModule/NaturalDocs.&nbsp; Обычно в рамках модуля не приходится вручную менять локальные настройки.&nbsp; Файл Menu.txt генерируется автоматически с помощью цели gendoc-menu.&nbsp; Предусмотрена возможность изменения правил для генерации меню в рамках модуля с помощью создания в модуле конфигурационного файла menu-config.txt ( см.&nbsp; <a href="../Script/oms-auto-doc-.html#oms-auto-doc" class=LFile id=link7 onMouseOver="ShowTip(event, 'tt5', 'link7')" onMouseOut="HideTip('tt5')">oms-auto-doc</a>).</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Описание.ЗагрузкафайловвБД"></a>Загрузка файлов в БД</h3><div class=CBody><p>Предусмотрена возможность загрузки ( установки) файлов с программными единицами и выполнение скриптов ( например, заполняющих стандартные справочники) в БД.</p><p>Загрузка производится при выполнении в Make цели load ( которая также включена в цель по умолчанию all).</p><blockquote><pre>$ make load</pre></blockquote><p>Загрузка производится под пользователями, указанными в параметрах <a href="../Config/NewModule/DB/Makefile-.html#LOAD_USERID" class=LBuildVariable id=link8 onMouseOver="ShowTip(event, 'tt6', 'link8')" onMouseOut="HideTip('tt6')">LOAD_USERID</a>, <a href="../Config/NewModule/DB/Makefile-.html#LOAD_USERID2" class=LBuildVariable id=link9 onMouseOver="ShowTip(event, 'tt7', 'link9')" onMouseOut="HideTip('tt7')">LOAD_USERID2</a>, ..., <a href="../Config/NewModule/DB/Makefile-.html#LOAD_USERID9" class=LBuildVariable id=link10 onMouseOver="ShowTip(event, 'tt8', 'link10')" onMouseOut="HideTip('tt8')">LOAD_USERID9</a> ( т.е.&nbsp; максимально можно настроить загрузку в девять различных схем), например:</p><blockquote><pre>$ make load LOAD_USERID=testuser/passwd@testdb</pre></blockquote><p>В случае, если в пароле содержится символ &ldquo;$&rdquo;, то строка подключения должна заключаться в одинарные кавычки, а символ &ldquo;$&rdquo; дублироваться.&nbsp; Например, для загрузке с паролем &ldquo;$jbk&rdquo; командная строка должна выглядеть так:</p><blockquote><pre>$ make load LOAD_USERID='testuser/$$jbk@testdb'</pre></blockquote><p>Указывать пользователей можно также в комбинации с параметром <a href="../Config/NewModule/DB/Makefile-.html#LOAD_DB" class=LBuildVariable id=link11 onMouseOver="ShowTip(event, 'tt9', 'link11')" onMouseOut="HideTip('tt9')">LOAD_DB</a> ( <a href="../Config/NewModule/DB/Makefile-.html#LOAD_DB2" class=LBuildVariable id=link12 onMouseOver="ShowTip(event, 'tt10', 'link12')" onMouseOut="HideTip('tt10')">LOAD_DB2</a>,..., <a href="../Config/NewModule/DB/Makefile-.html#LOAD_DB9" class=LBuildVariable id=link13 onMouseOver="ShowTip(event, 'tt11', 'link13')" onMouseOut="HideTip('tt11')">LOAD_DB9</a>), что может быть удобнее при использовании.&nbsp; Пример:</p><blockquote><pre>$ make load LOAD_USERID=testuser/passwd LOAD_DB=testdb</pre></blockquote><p>Значения указанных выше параметров могут быть заданы как в DB/Makefile, так и при запуске Make ( как в примерах).&nbsp; Загрузка производится только в случае, если хотя бы одни из этих параметров непустой и есть файлы для загрузки в под этим пользователем.</p><p>Если при загрузке задан параметр <a href="../Config/NewModule/DB/Makefile-.html#LOAD_OPERATORID" class=LBuildVariable id=link14 onMouseOver="ShowTip(event, 'tt12', 'link14')" onMouseOut="HideTip('tt12')">LOAD_OPERATORID</a>, то сразу после подключения к БД в случае наличия в ней модуля AccessOperator ( пакет pkg_Operator) будет автоматически произведена регистрация под указанным оператором:</p><blockquote><pre>$ make load LOAD_USERID=testuser/passwd@testdb LOAD_OPERATORID=operator/passwd</pre></blockquote><p>Значение указанного параметра можно задать также в DB/Makefile, причем по умолчанию в качестве значения используется значение переменной окружения ORACLE_OPERATOR.</p><p>Список файлов для загрузки в БД задается в DB/Makefile в переменной loadTarget с помощью перечисления файлов с дополнительным суффиксом, определяющим, под каким пользователем он должен быть загружен:</p><blockquote><pre>loadTarget =                            \
  pkg_TestModule.pks.$(lu)              \
  pkg_TestModule.pkb.$(lu)              \</pre></blockquote><p>В данном примере файлы pkg_TestModule.pks и pkg_TestModule.pkb ( спецификация и тело пакета pkg_TestModule) должны быть загружены под первым пользователем.&nbsp; Символ &ldquo;\&rdquo; служит для продолжения логической строки на следующей строчке ( экранирует символ перевода строки и должен находиться непосредственно перед ним).</p><h4 class=CHeading>Используемые суффиксы</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>.$(lu)</td><td class=CDLDescription>для загрузки под первым пользователем</td></tr><tr><td class=CDLEntry>.$(lu2)</td><td class=CDLDescription>для загрузки под вторым пользователем</td></tr><tr><td class=CDLEntry>...</td><td class=CDLDescription>...</td></tr><tr><td class=CDLEntry>.$(lu8)</td><td class=CDLDescription>для загрузки под восьмым пользователем</td></tr><tr><td class=CDLEntry>.$(lu9)</td><td class=CDLDescription>для загрузки под девятым пользователем ( обычно используется для загрузки локальных скриптов, см.&nbsp; ниже)</td></tr></table><p>Файлы могут указываться с путями относительно каталога DB ( в качестве разделителя в пути должен использоваться &ldquo;/&rdquo;):</p><blockquote><pre>loadTarget =                            \
  Data/tsm_action.sql.$(lu)             \
  pkg_TestModule.pks.$(lu)              \
  pkg_TestModule.pkb.$(lu)              \</pre></blockquote><p>В данном примере стал загружаться файл DB/Data/tsm_action.sql под первым пользователем ( для заполнение справочника tsm_action).</p><p>Для простоты написания можно использовать строковую функцию $(addsuffix SUFFIX,NAMES...), а также функцию $(wildcard PATTERN...)&nbsp; для получения файлов из каталога по шаблону:</p><blockquote><pre>loadTarget =                            \
  $(addsuffix .$(lu),                   \
    $(wildcard *.pk[s,b])               \
  )                                     \
  $(addsuffix .$(lu2),                  \
  )                                     \
  $(addsuffix .$(lu3),                  \
  )                                     \</pre></blockquote><p>Этот вариант обеспечивает загрузку всех пакетов ( файлов *.pks и *.pkb) из каталога DB под первым пользователем.</p><p>Иногда возникает необходимость в создании скриптов, которые загружались бы только при загрузке файлов в определенную БД ( возможно также, только под определенным пользователем определенной БД).&nbsp; Такие скрипты называются локальными.&nbsp; Они должны быть расположены в соответствии с соглашением <a href="Agreement/directory_tree-txt.html#Структуракаталогов" class=LSection >Структура каталогов</a> ( см.&nbsp; раздел &ldquo;Расположение локальных скриптов&rdquo;).&nbsp; Для настройки загрузки локальных скриптов можно использовать девятого пользователя и параметр <a href="../Config/NewModule/DB/Makefile-.html#LOCAL_DB_DIR" class=LBuildVariable id=link15 onMouseOver="ShowTip(event, 'tt13', 'link15')" onMouseOut="HideTip('tt13')">LOCAL_DB_DIR</a> ( либо <a href="../Config/NewModule/DB/Makefile-.html#LOCAL_USER_DIR" class=LBuildVariable id=link16 onMouseOver="ShowTip(event, 'tt14', 'link16')" onMouseOut="HideTip('tt14')">LOCAL_USER_DIR</a>, если нужно загружать скрипты для определенного пользователя):</p><blockquote><pre>loadTarget =                            \
  $(addsuffix .$(lu),                   \
    $(wildcard *.pk[s,b])               \
  )                                     \
  $(addsuffix .$(lu2),                  \
  )                                     \
  $(addsuffix .$(lu3),                  \
  )                                     \
  $(addsuffix .$(lu9), \
    $(wildcard Local/$(LOCAL_DB_DIR)/*.pk[s,b]) \
  ) \</pre></blockquote><p>По умолчанию значения параметров <a href="../Config/NewModule/DB/Makefile-.html#LOCAL_DB_DIR" class=LBuildVariable id=link17 onMouseOver="ShowTip(event, 'tt13', 'link17')" onMouseOut="HideTip('tt13')">LOCAL_DB_DIR</a> и <a href="../Config/NewModule/DB/Makefile-.html#LOCAL_USER_DIR" class=LBuildVariable id=link18 onMouseOver="ShowTip(event, 'tt14', 'link18')" onMouseOut="HideTip('tt14')">LOCAL_USER_DIR</a> определяются на основе значения параметра <a href="../Config/NewModule/DB/Makefile-.html#LOAD_USERID9" class=LBuildVariable id=link19 onMouseOver="ShowTip(event, 'tt8', 'link19')" onMouseOut="HideTip('tt8')">LOAD_USERID9</a>, т.о.&nbsp; обычно их не нужно явно указывать.&nbsp;  При этом при загрузке в тестовую БД загружаются локальные скрипты для соответствующей промышленной БД ( которая определяется с помощью make-функции <a href="../Config/NewModule/DB/OmsModule/init-mk.html#getProductionDbName" class=LBuildFunction id=link20 onMouseOver="ShowTip(event, 'tt15', 'link20')" onMouseOut="HideTip('tt15')">getProductionDbName</a>).</p><p>Для обеспечения правильного порядка загрузки файлов в БД нужно задать зависимости между ними.&nbsp; Зависимости задаются в файле DB/loaddeps.mk.&nbsp; Пример:</p><blockquote><pre>pkg_TestModule.pkb.$(lu): \
  pkg_TestModule.pks.$(lu)</pre></blockquote><p>Эта зависимость обеспечивает загрузку спецификации пакета pkg_TestModule до его тела, а также повторную загрузку тела пакета при обновлении спецификации ( зависимость действует только при загрузке под первым пользователем).</p><p>Если тело пакета pkg_TestModule зависит также от другого пакета ( например, pkg_TestModuleBase), то можно написать такую зависимость:</p><blockquote><pre>pkg_TestModule.pkb.$(lu):  \
  pkg_TestModule.pks.$(lu) \
  pkg_TestModuleBase.pks.$(lu)</pre></blockquote><p>Можно было также просто добавить еще одну зависимость для тела пакета pkg_TestModule аналогично первому примеру.</p><p>Факт успешной загрузки файла в БД фиксируется во временных файлах каталога DB/OmsModule/Load и при последующих вызовах make load файл не загружается ( пока он сам либо файлы, от которых зависит его загрузка, не будут изменены).</p><p>Для безусловной загрузки всех файлов можно применить вызов Make со стандартным флагом -B ( --always-make):</p><blockquote><pre>$ make -B load LOAD_USERID=testuser/passwd@testdb</pre></blockquote><p>Для ограничения списка загружаемых файлов, перечисленных в loadTarget, можно использовать параметр LOAD_FILE_MASK.&nbsp; Значение параметра представляет собой список ( через пробел или запятую) масок путей к файлам ( относительно каталога DB).&nbsp; Например, для безусловной загрузки только тела пакета pkg_TestModule нужно выполнить:</p><blockquote><pre>$ make -B load LOAD_USERID=testuser/passwd@testdb LOAD_FILE_MASK=pkg_TestModule.pkb</pre></blockquote><p>Для ограничения безусловной загрузки только телом пакета pkg_TestModule и файлами из каталога Data ( находящегося в каталоге DB) нужно выполнить:</p><blockquote><pre>$ make -B load LOAD_USERID=testuser/passwd@testdb LOAD_FILE_MASK=pkg_TestModule.pkb,Data/*</pre></blockquote></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Описание.УстановкамодулявБД"></a>Установка модуля в БД</h3><div class=CBody><p>Для упрощения процесса установки предполагается единообразный способ установки модулей.</p><p>Установка ( обновление) модуля в БД выполняется с помощью вызова make с целью install с указанием устанавливаемой версии модуля, а также параметров подключения к БД и логина оператора, выполняющего установку.&nbsp; Например, для первоначальной установки последней версии модуля в БД нужно выполнить:</p><blockquote><pre>$ make install INSTALL_VERSION=Last LOAD_USERID=testuser/passwd@testdb LOAD_OPERATORID=operator/passwd</pre></blockquote><p>Аналогично, для обновления модуля до версии 1.2.0 нужно выполнить:</p><blockquote><pre>$ make install INSTALL_VERSION=1.2.0 LOAD_USERID=testuser/passwd@testdb LOAD_OPERATORID=operator/passwd</pre></blockquote><p>Настройка действий, выполняемых при установке модуля, производится с помощью изменения DB/Makefile.</p><p>Установка обычно состоит из следующих шагов ( в квадратных скобках указаны соответствующие подцели):</p><ul><li>подготовка к установке [ install-before];</li><li>установка или обновление объектов схемы [ install-schema];</li><li>загрузка программных единиц ( пакетов и т.д.)&nbsp; [ install-load];</li><li>загрузка данных [ install-data];</li><li>загрузка батчей [ install-batch];</li><li>завершение установки [ install-after];</li><li>сохранение информации об установке версии модуля [ install-save-info];</li></ul><p>Т.о.&nbsp; установка выполняется достижением соответствующих подцелей.</p><p>Список скриптов, выполняемых при подготовке к установке ( цель install-before) , задается в DB/Makefile в переменной installBeforeTarget с помощью перечисления путей к файлам ( относительно каталога DB) с дополнительным суффиксом, определяющим, под каким пользователем файл должен быть выполнен.</p><p>Схема задания значений переменной installBeforeTarget аналогична переменной loadTarget, подробно обсуждавщейся в предыдущем разделе ( <a href="#Описание.ЗагрузкафайловвБД" class=LGroup id=link21 onMouseOver="ShowTip(event, 'tt16', 'link21')" onMouseOut="HideTip('tt16')">Загрузка файлов в БД</a>).&nbsp; Основное отличие в том, что вместо суффиксов &ldquo;$(lu*)&rdquo; используются суффиксы &ldquo;$(ru*)&rdquo;, которые обеспечивают выполнение скрипта при каждом запуске установки ( в то время как загрузка файлов не выполняется, если файл не менялся после предыдущей загрузки).</p><blockquote><pre>installBeforeTarget =                         \
  Install/Config/before-action.sql.$(ru)      \</pre></blockquote><p>В данном примере скрипт DB/Install/Config/before-action.sql будет выполняться в начале установки для первой схемы загрузки ( LOAD_USERID).</p><p>Кроме скриптов, входящих в состав модуля, можно использовать также стандартные SQL-скрипты, входящие в состав OMS ( указывается только имя с расширением, без пути).</p><blockquote><pre>installBeforeTarget =                         \
  Install/Config/before-action.sql.$(ru)      \
  oms-show-invalid.sql.$(ru)                  \
  oms-show-invalid.sql.$(ru2)                 \</pre></blockquote><p>В этом примере в начале установки для первой схемы ( LOAD_USERID) будут выполнены скрипты DB/Install/Config/before-action.sql и <a href="../SqlScript/oms-show-invalid-sql.html#oms-show-invalid.sql" class=LFile id=link22 onMouseOver="ShowTip(event, 'tt17', 'link22')" onMouseOut="HideTip('tt17')">oms-show-invalid.sql</a>, для второй схемы ( LOAD_USERID2) будет выполнен скрипт <a href="../SqlScript/oms-show-invalid-sql.html#oms-show-invalid.sql" class=LFile id=link23 onMouseOver="ShowTip(event, 'tt17', 'link23')" onMouseOut="HideTip('tt17')">oms-show-invalid.sql</a>.</p><p>Пример универсальной настройки:</p><blockquote><pre>installBeforeOmsAction =                      \
  oms-check-lock.sql                          \
  oms-show-invalid.sql                        \

installBeforeTarget =                         \
  $(addsuffix .$(ru),                         \
    $(wildcard Install/Config/$(INSTALL_VERSION)/before-action.sql) \
    $(wildcard Install/Config/before-action.sql) \
    $(installBeforeOmsAction)                 \
  )                                           \
  $(addsuffix .$(ru2),                        \
    $(installBeforeOmsAction)                 \
  )                                           \
  $(addsuffix .$(ru3),                        \
    $(installBeforeOmsAction)                 \
  )                                           \</pre></blockquote><p>В данном случае в начале установки для первой схемы ( LOAD_USERID) выполняются скрипты DB/Install/Config/$(INSTALL_VERSION)/before-action.sql и DB/Install/Config/before-action.sql ( в случае их наличия в составе модуля), для всех схем ( LOAD_USERID, LOAD_USERID2, LOAD_USERID3) выполняются стандартные действия OMS перед установкой, перечисленные в переменной installBeforeOmsAction ( в данном случае проверка блокировок на устанавливаемые объекты скриптом <a href="../SqlScript/oms-check-lock-sql.html#oms-check-lock.sql" class=LFile id=link24 onMouseOver="ShowTip(event, 'tt18', 'link24')" onMouseOut="HideTip('tt18')">oms-check-lock.sql</a> и показ инвалидных объектов скриптом <a href="../SqlScript/oms-show-invalid-sql.html#oms-show-invalid.sql" class=LFile id=link25 onMouseOver="ShowTip(event, 'tt17', 'link25')" onMouseOut="HideTip('tt17')">oms-show-invalid.sql</a>).&nbsp; Т.о.&nbsp; в случае необходимости выполнения нестандартных действий при установке модуля в первую схему ( LOAD_USERID), достаточно создать соответствующие скрипты в DB/Install/Config ( для действий в других схемах, нужно создать скрипты и добавить их в installBeforeTarget).</p><p>Список объектов, на которые проверяется наличие блокировок, определяется переменными checkLockTarget и mandatoryCheckLockTarget ( из списка, указанного в первой переменной, автоматически исключаются объекты, не загружаемые из-за значений параметров FILE_MASK, LOAD_FILE_MASK и SKIP_FILE_MASK).&nbsp; Формат значений для этих переменных такой же, как и для loadTarget, по умолчанию значение checkLockTarget равно loadTarget.&nbsp; Скрипт <a href="../SqlScript/oms-check-lock-sql.html#oms-check-lock.sql" class=LFile id=link26 onMouseOver="ShowTip(event, 'tt18', 'link26')" onMouseOut="HideTip('tt18')">oms-check-lock.sql</a> выполняется только в случае наличия проверяемых объектов для схем, в которые выполняется установка.</p><p>Для установки объектов схемы ( цель install-schema) выполняются скрипты, указанные в installSchemaTarget.&nbsp; По умолчанию настроен вызов скипта run.sql из подкаталога DB/Install/Schema, имя которого определяется значением переменной INSTALL_VERSION:</p><blockquote><pre>installSchemaTarget =                   \
  $(addsuffix .$(lu),                   \
    $(wildcard Install/Schema/$(INSTALL_VERSION)/run.sql)  \
  )                                     \
  $(addsuffix .$(lu2),                  \
  )                                     \
  $(addsuffix .$(lu3),                  \
  )                                     \</pre></blockquote><p>При настройке используется загрузка ( суффикс &ldquo;.$(lu)&rdquo;) вместо выполнения скриптов ( суффикс &ldquo;.$(ru)&rdquo;), т.к.&nbsp; обычно не имеет смысл повторно прогонять успешно выполненный файл установки схемы ( при желании можно использовать выполнение вместо загрузки).</p><p>Загрузка программных единиц и данных в БД во время установки выполняется при достижении цели install-load, реализованной с помощью выполнения цели load, настройка которой подробно описана в предыдущем разделе ( <a href="#Описание.ЗагрузкафайловвБД" class=LGroup id=link27 onMouseOver="ShowTip(event, 'tt16', 'link27')" onMouseOut="HideTip('tt16')">Загрузка файлов в БД</a>).</p><p>При выполнении загрузки данных ( цель install-data) выполняются скрипты из подкаталогов каталога DB/Install/Data.&nbsp; Данные для загрузки в конкретную таблицу могут находиться как в одном скрипте ( расположенном в DB/Install/Data/Last), так и в нескольких скриптах ( расположенных в DB/Install/Data/N.N.N).&nbsp; В связи с этим по умолчанию используется следующая схема:</p><ul><li>загружаются данные из каталога Install/Data/Last;</li><li>дополнительно при установке обновления ( INSTALL_VERSION=N.N.N) загружаются данные из каталога Install/Data/N.N.N, а при первоначальной установке последней версии ( INSTALL_VERSION=Last) загружаются данные из всех каталогов обновлений ( Install/Data/[0-9.]*) в порядке нумерации версий;</li></ul><p>В случае отсутствия в каталоге скриптов run.sql и run-after.sql для загрузки выбираются все скрипты *.sql ( за исключением revert.sql) и *.dat, в противном случае берутся скрипты run.sql, *.dat, run-after.sql.&nbsp; Порядок загрузки скриптов можно изменить, указав соответствующие зависимости в файле DB/loaddeps.mk.</p><p>Настройка действий при завершении установки ( цель install-after) полностью аналогична настройке действий перед установкой.</p><blockquote><pre>installAfterOmsAction =                       \
  oms-compile-invalid.sql                     \

installAfterTarget =                          \
  $(addsuffix .$(ru),                         \
    $(installAfterOmsAction)                  \
    $(wildcard Install/Config/after-action.sql) \
    $(wildcard Install/Config/$(INSTALL_VERSION)/after-action.sql) \
  )                                           \
  $(addsuffix .$(ru2),                        \
    $(installAfterOmsAction)                  \
  )                                           \
  $(addsuffix .$(ru3),                        \
    $(installAfterOmsAction)                  \
  )                                           \</pre></blockquote><p>В данном примере при завершении установки для первой схемы ( LOAD_USERID) выполняются скрипты DB/Install/Config/$(INSTALL_VERSION)/after-action.sql и DB/Install/Config/after-action.sql ( в случае их наличия в составе модуля), для всех схем ( LOAD_USERID, LOAD_USERID2, LOAD_USERID3) выполняются стандартные действия OMS при завершении установки, перечисленные в переменной installAfterOmsAction ( компиляция инвалидных объектов скриптом <a href="../SqlScript/oms-compile-invalid-sql.html#oms-compile-invalid.sql" class=LFile id=link28 onMouseOver="ShowTip(event, 'tt19', 'link28')" onMouseOut="HideTip('tt19')">oms-compile-invalid.sql</a>).</p><p>Для сохранения в БД информации об установке версии модуля ( подцель install-save-info) выполняется скрипт <a href="../SqlScript/oms-save-install-info-sql.html#oms-save-install-info.sql" class=LFile id=link29 onMouseOver="ShowTip(event, 'tt20', 'link29')" onMouseOut="HideTip('tt20')">oms-save-install-info.sql</a>, которому передаются необходимые параметры ( все настройки сделаны внутри OMS, настройка в модуле не требуется).&nbsp; Для отключения сохранения информации об установке версии модуля ( например, если выполняется промежуточная команда установки) можно исключить выполнение данного скрипта с помощью параметра SKIP_FILE_MASK ( см.&nbsp; ниже).</p><p>Также, независимо от сохранения результатов установки, по умолчанию выполняется сохранение в БД информации по каждому выполняемому скрипту.&nbsp; Это позволяет на уровне БД получать данные о выполнявшихся скриптах и изменявшихся объектах в привязке к установкам модулей ( имя и тип изменявшегося объекта определяется по имени скрипта).&nbsp; Для выполнения вложенных SQL-скриптов желательно использовать скрипт  <a href="../SqlScript/oms-run-sql.html#oms-run.sql" class=LFile id=link30 onMouseOver="ShowTip(event, 'tt21', 'link30')" onMouseOut="HideTip('tt21')">oms-run.sql</a> вместо встроенных команд &ldquo;@&rdquo; и &ldquo;@@&rdquo;, т.к.&nbsp; это обеспечивает сохранение в БД информации о вызове скриптов.&nbsp; Логирование на уровне файлов может быть отключено с помощью параметра <a href="../Config/NewModule/DB/OmsModule/common-mk.html#OMS_SAVE_FILE_INSTALL_INFO" class=LBuildVariable id=link31 onMouseOver="ShowTip(event, 'tt22', 'link31')" onMouseOut="HideTip('tt22')">OMS_SAVE_FILE_INSTALL_INFO</a>.</p><p>В обоих случаях для сохранения информации о выполнении установки используется модуль ModuleInfo ( SVN root: Oracle/Module/ModuleInfo), который должен быть установлен в БД.&nbsp; Основную информацию об установках модулей можно увидеть в представлениях v_mod_install_module, v_mod_install_version и v_mod_install_object модуля ModuleInfo ( более подробно см.&nbsp; в документации модуля).</p><p>Т.к.&nbsp; для всех шагов установки сделаны отдельные цели, то можно выполнять их отдельно, например можно выполнить только установку схемы ( без других шагов):</p><blockquote><pre>$ make install-schema INSTALL_VERSION=Last LOAD_USERID=testuser/passwd@testdb</pre></blockquote><p>Лог каждой установки сохраняется в каталоге DB/OmsModule/Load/Log/Install в файле с именем</p><p>YYYYMMDD_HHMISS[-&lt;moduleName&gt;][-$(INSTALL_VERSION)][-$(dbName)].txt</p><p>( имя файла лога выводится в начале выполнения, в качестве имени модуля &lt;moduleName&gt; берется значение тэга &lt;name&gt; из файла Doc/map.xml).</p><p>В случае использования в модуле дополнительных параметров установки, можно настроить сохранение их значений в логе ( при наличии у них непустых значений).&nbsp; Для этого нужно перечислить имена дополнительных параметров в переменной installAddonOptionList в файле DB/Makefile.&nbsp; Например, при использовании дополнительных параметров установки LOCAL_SCHEMA_DIR и SOURCE_DBLINK нужно указать:</p><blockquote><pre>installAddonOptionList =
  LOCAL_SCHEMA_DIR \
  SOURCE_DBLINK \</pre></blockquote><p>Для исключения, задания выполнения/загрузки определенных файлов, можно использовать параметры FILE_MASK, SKIP_FILE_MASK.&nbsp; Значение параметров представляет собой список ( через пробел или запятую) масок путей к игнорируемым файлам ( аналогично параметру LOAD_FILE_MASK).&nbsp; Пример:</p><blockquote><pre>$ make install INSTALL_VERSION=1.2.0 LOAD_USERID=testuser/passwd@testdb SKIP_FILE_MASK=Install/Config/before-action.sql,pkg_TestModule.pkb,*/oms-compile-invalid.sql</pre></blockquote><p>При выполнении установки в случае наличия дополнительных настроечных make-файлов DB/Install/Config/define.mk или DB/Install/Config/$(INSTALL_VERSION)/define.mk, они обрабатываются make после основного файла DB/Makefile.&nbsp; Это позволяет использовать специальные настройки при установке всех либо конкретной версии.&nbsp; Например, чтобы при установке версии 1.2.0 по-умолчанию пропускались файлы из предыдущего примера, достаточно создать файл DB/Install/Config/1.2.0/define.mk со значением параметра SKIP_FILE_MASK:</p><blockquote><pre>SKIP_FILE_MASK = \
  Install/Config/before-action.sql \
  pkg_TestModule.pkb \
  */oms-compile-invalid.sql</pre></blockquote><p>При этом в случае указания &ldquo; SKIP_FILE_MASK=...&rdquo;&nbsp; в строке вызова make настроенное значение по умолчанию будет перекрыто и использоваться не будет.&nbsp; Чтобы обеспечить пропуск указанных файлов всегда при установке этой версии можно использовать директиву override и операцию дополнения значения:</p><blockquote><pre>override SKIP_FILE_MASK += \
  Install/Config/before-action.sql \
  pkg_TestModule.pkb \
  */oms-compile-invalid.sql</pre></blockquote><p>В этом случае при указании в строке вызова make значения для SKIP_FILE_MASK, к нему будет добавлено значение по умолчанию, и в итоге будут пропущены все указанные файлы.</p><p>SQL-скрипты, входящие в состав OMS, можно вызывать из собственных SQL-скриптов, что может быть полезно при настройке установки ( например, именно таким способом предполагается определять табличное пространство для индексов с помощью скрипта <a href="../SqlScript/oms-set-indexTablespace-sql.html#oms-set-indexTablespace.sql" class=LFile id=link32 onMouseOver="ShowTip(event, 'tt23', 'link32')" onMouseOut="HideTip('tt23')">oms-set-indexTablespace.sql</a>), подробнее см.&nbsp; в <a href="#Описание.Запускoms-скриптов" class=LGroup id=link33 onMouseOver="ShowTip(event, 'tt24', 'link33')" onMouseOut="HideTip('tt24')">Запуск oms-скриптов</a>.</p><p>Для вызова из одного скрипта модуля других скриптов, входящих в состав модуля и не находящихся в той же директории, что и исходный скрипт, нужно указывать эти скрипты с путем относительно каталога DB ( т.к.&nbsp; при выполнении скриптов текущим является этот каталог).&nbsp; Например, чтобы вызвать из скрипта run.sql установки схемы версии 2.0.0 ( DB/Install/Schema/2.0.0/run.sql) скрипт создания таблицы tmp_table.tab, находящийся в DB/Install/Schema/Last, в run.sql нужно добавить строку:</p><blockquote><pre>@Install/Schema/Last/tmp_table.tab</pre></blockquote><p>Для задания специальных параметров установки можно при вызове make указывать параметр SQL_DEFINE.&nbsp; Он представляет собой список значений переменных SQL*Plus, которые создаются командой define перед выполнением/загрузкой файлов.&nbsp; Список указывается в формате name=value[,name2=value2]..., для экранирования разделителя может использоваться обратный слэш, при наличии пробелов нужно заключать список в кавычки.&nbsp; Пробелы в части имени, а также начальные и конечные пробелы в части значения, игнорируются, для добавления начальных или конечных пробелов в значение нужно использовать кавычки ( например, SQL_DEFINE=&rdquo;name1 = \&rdquo; a \, b\&rdquo;, name2=c&rdquo; задает переменную name1 со значением &ldquo; a , b&rdquo;  и переменную name2 со значением &ldquo;c&rdquo;).&nbsp; Пример задания имени табличного пространства для индексов через переменную indexTablspace:</p><blockquote><pre>$ make install INSTALL_VERSION=Last LOAD_USERID=testuser/passwd@testdb SQL_DEFINE=indexTablespace=INDX</pre></blockquote><p>С помощью переменной loadArgumentList можно настроить передачу параметров загружаемому/выполняемому SQL-скрипту.&nbsp; Для этого в переменную нужно добавить строку вида $(call getArgumentDefine,&lt;filePath&gt;.$([l,r]u*),&rdquo;arg1&rdquo;[ &ldquo;arg2&rdquo;]...)&nbsp; , где filePath путь к файлу относительно каталога DB ( с учетом регистра, можно использовать метасимволы).&nbsp; С помощью дополнительного расширения ( например, $(lu2)) определяется схема и тип загрузки файла, для которой используются параметры ( если для любых, то можно указать *).&nbsp; Например, для передачи скрипту установки схемы номера устанавливаемой версии модуля в качестве первого параметра, нужно настроить:</p><blockquote><pre>loadArgumentList += \
  $(call getArgumentDefine,Install/Schema/*/run.sql.*,&quot;$(INSTALL_VERSION)&quot;)</pre></blockquote><p>По умолчанию выполнение/загрузка SQL-скрипта через OMS прерывается при возникновении ошибки.&nbsp; Чтобы выполнить скрипты ( и всю установку) до конца с игнорированием ошибок, можно использовать опцию --ignore-errors ( сокращение -i) при вызове make:</p><blockquote><pre>$ make -i install INSTALL_VERSION=1.2.0 LOAD_USERID=testuser/passwd@testdb</pre></blockquote></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Описание.ЗагрузкабатчеймодуляSchedulerвБД"></a>Загрузка батчей модуля Scheduler в БД</h3><div class=CBody><p><b>Загрузка батчей в БД</b> реализована в OraMakeSystem с помощью вызовов процедур модуля Scheduler ( пакет pkg_SchedulerLoad), данные для которых берутся из данных локальных файлов модуля ( *.job.sql, batch.xml, batch_config.xml);</p><p>Отдельная установка ( обновление) только батчей модуля в БД выполняется с помощью вызова make с целью install-batch.&nbsp; Например,</p><blockquote><pre>$ make install-batch LOAD_USERID=testuser/passwd@testdb LOAD_OPERATORID=operator/passwd</pre></blockquote><p>Для установки батчей ( цель install-batch) выполняются скрипты, указанные в installBatchTarget.&nbsp; При загрузке job уровни видимости определяются в завимости от расположения файлов *.job.sql ( наличия batch.xml в той же директории или по названию родительской директории PublicJob);</p><blockquote><pre>installBatchTarget = \
  $(addsuffix .$(ru), \
      $(wildcard Install/Batch/Last/*.job.sql) \
      $(wildcard Install/Batch/Last/*/*.job.sql) \
      $(wildcard Install/Batch/Last/*/batch.xml) \
  )
  $(addsuffix .$(ru2), \
  ) \
  $(addsuffix .$(ru3), \
  ) \</pre></blockquote><p>Использование суффиксов &ldquo;.$(lu)&rdquo; и &ldquo;.$(ru)&rdquo; аналогично использованию для других скриптов ( например, из installSchemaTarget);</p><p>Для подробностей по созданию файлов для загрузки батчей см.&nbsp; автодокументацию к модулю Scheduler ( SVN root: Oracle/Module/Scheduler).</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Описание.ОтменаустановкимодулявБД"></a>Отмена установки модуля в БД</h3><div class=CBody><p>Отмена установки ( обновления) модуля в БД выполняется с помощью вызова make с целью uninstall с указанием версии модуля, а также параметров подключения к БД и логина оператора, выполняющего операцию.&nbsp; Например, для удаления последней версии модуля из БД нужно выполнить:</p><blockquote><pre>$ make uninstall INSTALL_VERSION=Last LOAD_USERID=testuser/passwd@testdb LOAD_OPERATORID=operator/passwd</pre></blockquote><p>Аналогично, для отмены обновления модуля до версии 1.2.0 нужно выполнить:</p><blockquote><pre>$ make uninstall INSTALL_VERSION=1.2.0 LOAD_USERID=testuser/passwd@testdb LOAD_OPERATORID=operator/passwd</pre></blockquote><p>Настройка действий, выполняемых при отмене установки модуля, производится с помощью изменения DB/Makefile и аналогична настройке действий при установке ( см.&nbsp; <a href="#Описание.УстановкамодулявБД" class=LGroup id=link34 onMouseOver="ShowTip(event, 'tt4', 'link34')" onMouseOut="HideTip('tt4')">Установка модуля в БД</a>).</p><p>Отмена установки обычно состоит из следующих шагов ( в квадратных скобках указаны соответствующие подцели):</p><ul><li>подготовка к отмене установки [ uninstall-before];</li><li>отмена изменений в объектах схемы [ uninstall-schema];</li><li>загрузка предыдущих версий программных единиц ( пакетов и т.д.)&nbsp; [ uninstall-load];</li><li>отмена изменений в данных, внесенных при установке [ uninstall-data];</li><li>завершение отмены установки [ uninstall-after];</li><li>сохранение информации об отмене установки модуля [ uninstall-save-info];</li></ul><p>Т.о.&nbsp; отмена установки выполняется достижением соответствующих подцелей.</p><p>Список скриптов, выполняемых при подготовке к отмене установки ( цель uninstall-before), задается в DB/Makefile в переменной uninstallBeforeTarget аналогично заданию действий перед установкой в installBeforeTarget ( см.&nbsp; предыдущий раздел), при этом по умолчанию выполняются скрипты из каталога DB/Install/Config и DB/Install/Config/$(INSTALL_VERSION)/Revert:</p><blockquote><pre>uninstallBeforeOmsAction = \
  oms-check-lock.sql \
  oms-show-invalid.sql \


uninstallBeforeTarget = \
  $(addsuffix .$(ru), \
    $(if $(INSTALL_VERSION), \
      $(wildcard Install/Config/$(INSTALL_VERSION)/Revert/before-action.sql),) \
    $(wildcard Install/Config/before-action.sql) \
    $(uninstallBeforeOmsAction) \
  ) \
  $(addsuffix .$(ru2), \
    $(uninstallBeforeOmsAction) \
  ) \
  $(addsuffix .$(ru3), \
    $(uninstallBeforeOmsAction) \
  ) \</pre></blockquote><p>Список объектов, на которые проверяется наличие блокировок, определяется переменными uninstallCheckLockTarget и mandatoryCheckLockTarget ( из списка, указанногов первой переменной, автоматически исключаются объекты, не загружаемые из-за значения параметра SKIP_FILE_MASK).&nbsp; По умолчанию на наличие блокировок проверяются загружаемые по uninstall-load объекты ( т.е. uninstallCheckLockTarget равно uninstallLoadTarget).&nbsp; В случае, если нет объектов для проверки блокировок, скрипт <a href="../SqlScript/oms-check-lock-sql.html#oms-check-lock.sql" class=LFile id=link35 onMouseOver="ShowTip(event, 'tt18', 'link35')" onMouseOut="HideTip('tt18')">oms-check-lock.sql</a> не выполняется.</p><p>Для отмены изменений в объектах схемы ( цель uninstall-schema) выполняются скрипты, указанные в uninstallSchemaTarget.&nbsp; По умолчанию настроен вызов скипта revert.sql из подкаталога DB/Install/Schema, имя которого определяется значением переменной INSTALL_VERSION:</p><blockquote><pre>uninstallSchemaTarget = \
  $(addsuffix .$(ru), \
    $(wildcard Install/Schema/$(INSTALL_VERSION)/revert.sql) \
  ) \
  $(addsuffix .$(ru2), \
  ) \
  $(addsuffix .$(ru3), \
  ) \</pre></blockquote><p>Скрипты, выполняемые для загрузки предыдущих версий программных единиц ( цель uninstall-load), определяются переменной uninstallLoadTarget.&nbsp; По умолчанию загружаются все скрипты с соответствующими расширениями из каталога DB/Install/Schema/$(INSTALL_VERSION)/Revert:</p><blockquote><pre>uninstallLoadTarget = \
  $(addsuffix .$(ru), \
    $(if $(INSTALL_VERSION), \
      $(foreach m, *.typ *.vw *.pks *.trg *.tyb *.pkb, \
        $(wildcard Install/Schema/$(INSTALL_VERSION)/Revert/$(m)) \
      ) \
    ,) \
  ) \
  $(addsuffix .$(ru2), \
  ) \
  $(addsuffix .$(ru3), \
  ) \</pre></blockquote><p>Правильную последовательность выполнения скриптов можно обеспечить, указав зависимости между выполняемыми скриптами в файле DB/loaddeps.mk ( см.&nbsp; <a href="#Описание.ЗагрузкафайловвБД" class=LGroup id=link36 onMouseOver="ShowTip(event, 'tt16', 'link36')" onMouseOut="HideTip('tt16')">Загрузка файлов в БД</a>).&nbsp; Каталоги DB/Install/Schema/*/Revert исключены из автогенерации документации, т.к.&nbsp; там находятся файлы из предыдущей версии модуля.</p><p>Для отмены изменений в данных ( цель uninstall-data) выполняются скрипты, заданные в uninstallDataTarget.&nbsp; По умолчанию выполняется скрипт revert.sql из каталога DB/Install/Data/$(INSTALL_VERSION):</p><blockquote><pre>uninstallDataTarget = \
  $(addsuffix .$(ru), \
    $(wildcard Install/Data/$(INSTALL_VERSION)/revert.sql) \
  ) \
  $(addsuffix .$(ru2), \
  ) \
  $(addsuffix .$(ru3), \
  ) \</pre></blockquote><p>Настройка действий при завершении отмены установки ( цель uninstall-after) аналогична настройке действий перед отменой установки ( см.&nbsp; выше):</p><blockquote><pre>uninstallAfterOmsAction = \
  oms-compile-invalid.sql \


uninstallAfterTarget = \
  $(addsuffix .$(ru), \
    $(uninstallAfterOmsAction) \
    $(wildcard Install/Config/after-action.sql) \
    $(if $(INSTALL_VERSION), \
      $(wildcard Install/Config/$(INSTALL_VERSION)/Revert/after-action.sql),) \
  ) \
  $(addsuffix .$(ru2), \
    $(uninstallAfterOmsAction) \
  ) \
  $(addsuffix .$(ru3), \
    $(uninstallAfterOmsAction) \
  ) \</pre></blockquote><p>Для сохранения в БД информации об отмене установке версии модуля ( подцель uninstall-save-info) выполняется скрипт <a href="../SqlScript/oms-save-uninstall-info-sql.html#oms-save-uninstall-info.sql" class=LFile id=link37 onMouseOver="ShowTip(event, 'tt25', 'link37')" onMouseOut="HideTip('tt25')">oms-save-uninstall-info.sql</a>, которому передаются необходимые параметры ( аналогично подцели install-save-info).&nbsp; При этмо в случае выполнения отмены установки конкретной версии модуля ( параметр INSTALL_VERSION не равен Last), необходимо явно указывать версию модуля, получающуюся в БД после отмены установки, с помощью параметра <a href="../Config/NewModule/DB/Makefile-.html#UNINSTALL_RESULT_VERSION" class=LBuildVariable id=link38 onMouseOver="ShowTip(event, 'tt26', 'link38')" onMouseOut="HideTip('tt26')">UNINSTALL_RESULT_VERSION</a>:</p><blockquote><pre>$ make uninstall INSTALL_VERSION=1.3.0 UNINSTALL_RESULT_VERSION=1.2.0 LOAD_USERID=testuser/passwd@testdb LOAD_OPERATORID=operator/passwd</pre></blockquote><p>Отмена установки логируется, лог сохраняется в каталоге DB/OmsModule/Load/Log/Install в файле с именем</p><p>YYYYMMDD_HHMISS[-&lt;moduleName&gt;]-uninstall[-$(INSTALL_VERSION)][-$(dbName)].txt</p><p>( имя файла лога выводится в начале выполнения, в качестве имени модуля &lt;moduleName&gt; берется значение тэга &lt;name&gt; из файла Doc/map.xml).</p><p>Как и в случае установки, для исключения выполнения/загрузки определенных файлов можно использовать параметры FILE_MASK, SKIP_FILE_MASK.</p><p>Также, аналогично установке, при выполнении отмены установки в случае наличия дополнительных настроечных make-файлов DB/Install/Config/define.mk или DB/Install/Config/$(INSTALL_VERSION)/Revert/define.mk, они обрабатываются make после основного файла DB/Makefile.</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Описание.ВыдачаправпользователямБД"></a>Выдача прав пользователям БД</h3><div class=CBody><p>Выдача прав пользователям БД выполняется с помощью вызова make с целью grant с указанием в параметре TO_USERNAME пользователя, которому выдаются права, а также параметров подключения к БД.&nbsp; Например, для выдачи пользователю testUser2 прав на использование модуля, нужно выполнить:</p><blockquote><pre>$ make grant LOAD_USERID=testuser/passwd@testdb LOAD_OPERATORID=operator/passwd TO_USERNAME=testUser2</pre></blockquote><p>Можно также задать имя скрипта для выдачи прав с помощью параметра GRANT_SCRIPT ( по умолчанию run.sql, расширение &ldquo;.sql&rdquo; можно не указывать) и версию скрипта с помощью параметра INSTALL_VERSION ( по умолчанию Last).&nbsp; Например, для выдачи пользователю дополнительных прав для доступа по чтению, добавленных в версии 1.2.0, нужно выполнить ( предполагается наличие скрипта DB/Install/Grant/1.2.0/read-only.sql в составе модуля):</p><blockquote><pre>$ make grant INSTALL_VERSION=1.2.0 LOAD_USERID=testuser/passwd@testdb LOAD_OPERATORID=operator/passwd TO_USERNAME=testUser2 GRANT_SCRIPT=read-only</pre></blockquote><p>Выдача прав состоит из следующих шагов ( в квадратных скобках указаны соответствующие подцели):</p><ul><li>выполнение выдачи прав [ grant-exec];</li><li>сохранение информации о выполненной выдаче прав [ grant-save-info];</li></ul><p>Настройка действий, выполняемых для выдачи прав, производится с помощь изменения переменной grantTarget в файле DB/Makefile ( аналогично, например, настройке действий перед установкой в <a href="#Описание.УстановкамодулявБД" class=LGroup id=link39 onMouseOver="ShowTip(event, 'tt4', 'link39')" onMouseOut="HideTip('tt4')">Установка модуля в БД</a>).&nbsp; При выполнении скриптам, указанным в grantTarget, в качестве первого параметра передается имя пользователя из TO_USERNAME.</p><p>Для сохранения в БД информации о выдаче прав ( подцель grant-save-info) выполняется скрипт <a href="../SqlScript/oms-save-grant-info-sql.html#oms-save-grant-info.sql" class=LFile id=link40 onMouseOver="ShowTip(event, 'tt27', 'link40')" onMouseOut="HideTip('tt27')">oms-save-grant-info.sql</a>, которому передаются необходимые параметры ( все аналогично подцели install-save-info установки).</p><p>Лог выдачи прав сохраняется в каталоге DB/OmsModule/Load/Log/Install в файле с именем</p><p>YYYYMMDD_HHMISS[-&lt;moduleName&gt;]-grant[-$(INSTALL_VERSION)][-$(dbName)].txt</p><p>( имя файла лога выводится в начале выполнения, в качестве имени модуля &lt;moduleName&gt; берется значение тэга &lt;name&gt; из файла Doc/map.xml).</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Описание.Запускoms-скриптов"></a>Запуск oms-скриптов</h3><div class=CBody><p>Запуск oms-скритов ( например, <a href="../Script/oms-create-module-.html#oms-create-module" class=LFile id=link41 onMouseOver="ShowTip(event, 'tt1', 'link41')" onMouseOut="HideTip('tt1')">oms-create-module</a>) естественным образом выполнятеся в bash ( Cygwin Terminal):</p><blockquote><pre>$ oms-create-module -d tsm TestModule</pre></blockquote><p>Скрипты могут быть запущены также из командной строки Windows:</p><blockquote><pre>&gt; bash -c 'oms-create-module -d &quot;c:\tmp\tsm&quot; TestModule'</pre></blockquote><p>Вариант запуска с указанием всех путей будет выглядеть так ( при стандартном расположении Cygwin и OMS):</p><blockquote><pre>&gt; c:\cygwin\bin\bash -c '/usr/local/bin/oms-create-module -d &quot;c:\tmp\tsm&quot; TestModule'</pre></blockquote><p>SQL-скрипты, входящие в состав OMS ( файлы SqlScript/oms-*.sql) можно вызывать из собственных SQL-скриптов, выполняемых через OMS.&nbsp; Например, для определения имени табличного пространства для индексов можно вызвать скрипт <a href="../SqlScript/oms-set-indexTablespace-sql.html#oms-set-indexTablespace.sql" class=LFile id=link42 onMouseOver="ShowTip(event, 'tt23', 'link42')" onMouseOut="HideTip('tt23')">oms-set-indexTablespace.sql</a> из скрипта DB/Install/Schema/Last/run.sql, входящего в состав модуля:</p><blockquote><pre>...

@oms-set-indexTablespace.sql

...</pre></blockquote><p>Чтобы этот вызов работал не только при выполнении через OMS, а всегда вы выполнении скрипта DB/Install/Schema/Last/run.sql из SQL*Plus, достаточно добавить путь к каталогу с OMS-скриптами ( &ldquo;C:\cygwin\usr\local\share\oms\SqlScript&rdquo; при стандартной установке Cygwin) в переменную окружения SQLPATH.</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Описание.ПрикладныеSQL-скрипты"></a>Прикладные SQL-скрипты</h3><div class=CBody><p>В состав OMS входят прикладные SQL-скрипты, предназначенные для использования из пользовательских скриптов.&nbsp; С помощью них можно проще выполнять операции, часто встречающиеся в различных модулях.</p><h4 class=CHeading>Скрипты по назначению</h4><ul><li>настройка параметров установки;</li></ul><p>Для задания параметров установки удобно применять макропеременные SQL*Plus, которым задаются значения по умолчанию.&nbsp; В случае необходимости при выполнении установки вместо значения по умолчанию для макропеременной может быть задано другое значение с помощью параметра <a href="../Config/NewModule/DB/Makefile-.html#SQL_DEFINE" class=LBuildVariable id=link43 onMouseOver="ShowTip(event, 'tt28', 'link43')" onMouseOut="HideTip('tt28')">SQL_DEFINE</a>.</p><p>К скриптам данной группы относятся: <a href="../SqlScript/oms-default-sql.html#oms-default.sql" class=LFile id=link44 onMouseOver="ShowTip(event, 'tt29', 'link44')" onMouseOut="HideTip('tt29')">oms-default.sql</a>           - задание макропеременной значения по умолчанию; <a href="../SqlScript/oms-default-with-test-sql.html#oms-default-with-test.sql" class=LFile id=link45 onMouseOver="ShowTip(event, 'tt30', 'link45')" onMouseOut="HideTip('tt30')">oms-default-with-test.sql</a> - задание макропеременной значения по умолчанию для тестовой и промышленной БД; <a href="../SqlScript/oms-get-db-link-sql.html#oms-get-db-link.sql" class=LFile id=link46 onMouseOver="ShowTip(event, 'tt31', 'link46')" onMouseOut="HideTip('tt31')">oms-get-db-link.sql</a>       - определение используемого по умолчанию линка; <a href="../SqlScript/oms-set-indexTablespace-sql.html#oms-set-indexTablespace.sql" class=LFile id=link47 onMouseOver="ShowTip(event, 'tt23', 'link47')" onMouseOut="HideTip('tt23')">oms-set-indexTablespace.sql</a>   - определение используемого по умолчанию табличного пространства для индексов; <a href="../SqlScript/oms-set-lobTablespace-sql.html#oms-set-lobTablespace.sql" class=LFile id=link48 onMouseOver="ShowTip(event, 'tt32', 'link48')" onMouseOut="HideTip('tt32')">oms-set-lobTablespace.sql</a> - определение используемого по умолчанию табличного пространства для полей типа LOB;</p><ul><li>выполнение вложенных SQL-скриптов;</li></ul><p>При выполнении большого числа действий в SQL-скрипте часто бывает удобно разбить их на отдельные логические части и использовать для каждой части отдельные SQL-скрипты, последовательно вызываемые из основного скрипта.&nbsp; Такая ситуация обычно возникает при написании скрипта для установки или обновления объектов схемы ( DB/Install/Schema/*/run.sql).&nbsp; Однако при этом по логу выполнения установки становится затруднительно определить, на каком этапе находится установка или место, где произошла ошибка ( т.к.&nbsp; нужно последовательно просматривать исходники всех вложенных скриптов).</p><p>Для решения этой проблемы в основном скрипте вместо стандартной команды выполнения скрипта &ldquo;@@&rdquo; ( или &ldquo;@&rdquo;) можно использовать скрипт <a href="../SqlScript/oms-run-sql.html#oms-run.sql" class=LFile id=link49 onMouseOver="ShowTip(event, 'tt21', 'link49')" onMouseOut="HideTip('tt21')">oms-run.sql</a>, который выводит информацию о скрипте перед его выполнением.&nbsp; Скрипт <a href="../SqlScript/oms-run-sql.html#oms-run.sql" class=LFile id=link50 onMouseOver="ShowTip(event, 'tt21', 'link50')" onMouseOut="HideTip('tt21')">oms-run.sql</a> также учитывает значение параметров <a href="../Config/NewModule/DB/Makefile-.html#SKIP_FILE_MASK" class=LBuildVariable id=link51 onMouseOver="ShowTip(event, 'tt33', 'link51')" onMouseOut="HideTip('tt33')">SKIP_FILE_MASK</a>, <a href="../Config/NewModule/DB/Makefile-.html#FILE_MASK" class=LBuildVariable id=link52 onMouseOver="ShowTip(event, 'tt34', 'link52')" onMouseOut="HideTip('tt34')">FILE_MASK</a> и не запускает скрипты, которые должны игнорироваться согласно этим параметрам.&nbsp; Это можно использовать для тестирования отдельных частей установки.</p><ul><li>выполнение операций над объектам БД;</li></ul><p>Данные скрипты упрощают выполнение операций над объектами БД: <a href="../SqlScript/oms-drop-type-sql.html#oms-drop-type.sql" class=LFile id=link53 onMouseOver="ShowTip(event, 'tt35', 'link53')" onMouseOut="HideTip('tt35')">oms-drop-type.sql</a>         - принудительное удаление SQL-типа, от которого зависят другие объекты ( применяется перед пересозданием типа во время установки); <a href="../SqlScript/oms-gather-stats-sql.html#oms-gather-stats.sql" class=LFile id=link54 onMouseOver="ShowTip(event, 'tt36', 'link54')" onMouseOut="HideTip('tt36')">oms-gather-stats.sql</a>      - сбор статистики по таблице или материализованному представлению; <a href="../SqlScript/oms-refresh-mview-sql.html#oms-refresh-mview.sql" class=LFile id=link55 onMouseOver="ShowTip(event, 'tt37', 'link55')" onMouseOut="HideTip('tt37')">oms-refresh-mview.sql</a>     - обновление материализованного представления и сбор по нему статистики;</p><ul><li>управление пакетными заданиями, реализованными с помощью модуля Scheduler;</li></ul><p>Скрипты для управления пакетными заданиями: <a href="../SqlScript/oms-activate-batch-sql.html#oms-activate-batch.sql" class=LFile id=link56 onMouseOver="ShowTip(event, 'tt38', 'link56')" onMouseOut="HideTip('tt38')">oms-activate-batch.sql</a>    - активация пакетных заданий; <a href="../SqlScript/oms-deactivate-batch-sql.html#oms-deactivate-batch.sql" class=LFile id=link57 onMouseOver="ShowTip(event, 'tt39', 'link57')" onMouseOut="HideTip('tt39')">oms-deactivate-batch.sql</a>  - деактивация пакетных заданий; <a href="../SqlScript/oms-reactivate-batch-sql.html#oms-reactivate-batch.sql" class=LFile id=link58 onMouseOver="ShowTip(event, 'tt40', 'link58')" onMouseOut="HideTip('tt40')">oms-reactivate-batch.sql</a>  - повторная активация пакетных заданий; <a href="../SqlScript/oms-resume-batch-sql.html#oms-resume-batch.sql" class=LFile id=link59 onMouseOver="ShowTip(event, 'tt41', 'link59')" onMouseOut="HideTip('tt41')">oms-resume-batch.sql</a>      - повторная активация пакетных заданий с ожиданием запуска заданий, которые должны начать выполняться; <a href="../SqlScript/oms-stop-batch-sql.html#oms-stop-batch.sql" class=LFile id=link60 onMouseOver="ShowTip(event, 'tt42', 'link60')" onMouseOut="HideTip('tt42')">oms-stop-batch.sql</a>        - деактивация пакетных заданий с ожиданием завершения сессий выполняющихся пакетных заданий;</p><p>Например, при выполнении установки прикладных модулей часто требуется временно приостановить выполнение связанных с модулем процессов, реализованных в виде пакетных заданий.&nbsp; Для этого можно воспользоваться скриптами <a href="../SqlScript/oms-stop-batch-sql.html#oms-stop-batch.sql" class=LFile id=link61 onMouseOver="ShowTip(event, 'tt42', 'link61')" onMouseOut="HideTip('tt42')">oms-stop-batch.sql</a> и <a href="../SqlScript/oms-resume-batch-sql.html#oms-resume-batch.sql" class=LFile id=link62 onMouseOver="ShowTip(event, 'tt41', 'link62')" onMouseOut="HideTip('tt41')">oms-resume-batch.sql</a>, вызываемыми соответственно в начале и при завершении установки.</p><ul><li>вспомогательные скрипты;</li></ul><p>Скрипт <a href="../SqlScript/oms-init-var-sql.html#oms-init-var.sql" class=LFile id=link63 onMouseOver="ShowTip(event, 'tt43', 'link63')" onMouseOut="HideTip('tt43')">oms-init-var.sql</a> обеспечивает возможность использования большинства SQL-скриптов, входящих в OMS, в интерактивной сессии SQL*Plus.</p></div></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MTitle>OraMakeSystem<div class=MSubTitle>Версия 1.7.3</div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">О проекте</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MFile id=MSelected>Описание</div></div><div class=MEntry><div class=MFile><a href="install-txt.html">Установка</a></div></div><div class=MEntry><div class=MFile><a href="todo-txt.html">Доработки</a></div></div><div class=MEntry><div class=MFile><a href="bugs-txt.html">Ошибки</a></div></div><div class=MEntry><div class=MFile><a href="../Makefile-.html">Сборка</a></div></div><div class=MEntry><div class=MFile><a href="version-txt.html">Версии</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent2')">Соглашения по оформлению модуля</a><div class=MGroupContent id=MGroupContent2><div class=MEntry><div class=MFile><a href="Agreement/directory_tree-txt.html">Структура каталогов</a></div></div><div class=MEntry><div class=MFile><a href="Agreement/files-txt.html">Файлы</a></div></div><div class=MEntry><div class=MFile><a href="Agreement/comment-txt.html">Комментарии</a></div></div><div class=MEntry><div class=MFile><a href="Agreement/doc_menu_tree-txt.html">Меню документации</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent3')">Скрипты</a><div class=MGroupContent id=MGroupContent3><div class=MEntry><div class=MFile><a href="../Script/create-patch-.html">create-patch</a></div></div><div class=MEntry><div class=MFile><a href="../Script/oms-auto-doc-.html">oms-auto-doc</a></div></div><div class=MEntry><div class=MFile><a href="../Script/oms-common-sh.html">oms-common.sh</a></div></div><div class=MEntry><div class=MFile><a href="../Script/oms-connect-info-.html">oms-connect-info</a></div></div><div class=MEntry><div class=MFile><a href="../Script/oms-create-module-.html">oms-create-module</a></div></div><div class=MEntry><div class=MFile><a href="../Script/oms-file-menu-awk.html">oms-file-menu</a></div></div><div class=MEntry><div class=MFile><a href="../Script/oms-gen-spec-.html">oms-gen-spec</a></div></div><div class=MEntry><div class=MFile><a href="../Script/oms-gen-spec-awk.html">oms-gen-spec.awk</a></div></div><div class=MEntry><div class=MFile><a href="../Script/oms-load-.html">oms-load</a></div></div><div class=MEntry><div class=MFile><a href="../Script/oms-module-.html">oms-module</a></div></div><div class=MEntry><div class=MFile><a href="../Script/oms-update-module-.html">oms-update-module</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent7')">SQL-скрипты</a><div class=MGroupContent id=MGroupContent7><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent4')">OmsInternal</a><div class=MGroupContent id=MGroupContent4><div class=MEntry><div class=MFile><a href="../SqlScript/OmsInternal/add-install-result-sql.html">add-install-result</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/OmsInternal/exec-batch-operation-sql.html">exec-batch-operation</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/OmsInternal/finish-install-file-sql.html">finish-install-file</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/OmsInternal/nothing-sql.html">nothing</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/OmsInternal/set-environment-sql.html">set-environment</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/OmsInternal/start-install-file-sql.html">start-install-file</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent5')">Используемые в OMS</a><div class=MGroupContent id=MGroupContent5><div class=MEntry><div class=MFile><a href="../SqlScript/oms-check-lock-sql.html">oms-check-lock</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-compile-invalid-sql.html">oms-compile-invalid</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-init-var-sql.html">oms-init-var</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-save-grant-info-sql.html">oms-save-grant-info</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-save-install-info-sql.html">oms-save-install-info</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-save-uninstall-info-sql.html">oms-save-uninstall-info</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-show-invalid-sql.html">oms-show-invalid</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent6')">Прикладные</a><div class=MGroupContent id=MGroupContent6><div class=MEntry><div class=MFile><a href="../SqlScript/oms-activate-batch-sql.html">oms-activate-batch</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-deactivate-batch-sql.html">oms-deactivate-batch</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-default-sql.html">oms-default</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-default-with-test-sql.html">oms-default-with-test</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-drop-foreign-key-sql.html">oms-drop-foreign-key</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-drop-mview-sql.html">oms-drop-mview</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-drop-type-sql.html">oms-drop-type</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-gather-stats-sql.html">oms-gather-stats</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-get-db-link-sql.html">oms-get-db-link</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-reactivate-batch-sql.html">oms-reactivate-batch</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-recreate-mview-sql.html">oms-recreate-mview.sql</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-refresh-mview-sql.html">oms-refresh-mview</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-resume-batch-sql.html">oms-resume-batch</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-run-sql.html">oms-run</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-set-indexTablespace-sql.html">oms-set-indexTablespace</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-set-lobTablespace-sql.html">oms-set-lobTablespace</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-stop-batch-sql.html">oms-stop-batch</a></div></div><div class=MEntry><div class=MFile><a href="../SqlScript/oms-unindexed-foreign-key-sql.html">oms-unindexed-foreign-key</a></div></div></div></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent9')">Шаблон модуля</a><div class=MGroupContent id=MGroupContent9><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent8')">О модуле</a><div class=MGroupContent id=MGroupContent8><div class=MEntry><div class=MFile><a href="../Config/NewModule/DB/Doc/readme-txt.html">Описание</a></div></div><div class=MEntry><div class=MFile><a href="../Config/NewModule/DB/Doc/install-txt.html">Установка</a></div></div><div class=MEntry><div class=MFile><a href="../Config/NewModule/DB/Doc/bugs-txt.html">Ошибки</a></div></div><div class=MEntry><div class=MFile><a href="../Config/NewModule/DB/Doc/todo-txt.html">Доработки</a></div></div><div class=MEntry><div class=MFile><a href="../Config/NewModule/DB/Makefile-.html">Сборка</a></div></div><div class=MEntry><div class=MFile><a href="../Config/NewModule/DB/Doc/version-txt.html">Версии</a></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../Config/NewModule/DB/OmsModule/init-mk.html">Инициализация OMS</a></div></div><div class=MEntry><div class=MFile><a href="../Config/NewModule/DB/OmsModule/common-mk.html">Сборка OMS</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent11')">Индекс</a><div class=MGroupContent id=MGroupContent11><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent10')">Реализация</a><div class=MGroupContent id=MGroupContent10><div class=MEntry><div class=MIndex><a href="../../index/Variables.html">Переменные</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/Functions.html">Функции</a></div></div></div></div></div><div class=MEntry><div class=MIndex><a href="../../index/BuildFunctions.html">Функции сборки</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/Files.html">Скрипты</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/General.html">Все вместе</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="BuildFunctions">Build Functions</option><option value="Files">Files</option><option value="Functions">Functions</option><option value="Variables">Variables</option></select></div><script language=JavaScript><!--
HideAllBut([1, 2], 12);// --></script></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFile>Создает структуру нового модуля.</div></div><div class=CToolTip id="tt2"><div class=CFile>Обновляет файлы OMS, входящие в состав модуля. </div></div><div class=CToolTip id="tt3"><div class=CBuildTarget>Обновляет OMS-файлы, входящие в состав модуля.</div></div><div class=CToolTip id="tt4"><div class=CGroup>Для упрощения процесса установки предполагается единообразный способ установки модулей.</div></div><div class=CToolTip id="tt5"><div class=CFile>Генерирует автодокументацию модуля.</div></div><div class=CToolTip id="tt6"><div class=CBuildVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td>LOAD_USERID =</td></tr></table></blockquote>Пользователь для загрузки ( формат: [userName[/password]][@dbName]).</div></div><div class=CToolTip id="tt7"><div class=CBuildVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td>LOAD_USERID2 =</td></tr></table></blockquote>Пользователь для загрузки #2 ( формат: [userName[/password]][@dbName]).</div></div><div class=CToolTip id="tt8"><div class=CBuildVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td>LOAD_USERID9 =</td></tr></table></blockquote>Пользователь для загрузки #9 ( формат: [userName[/password]][@dbName]).</div></div><div class=CToolTip id="tt9"><div class=CBuildVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td>LOAD_DB =</td></tr></table></blockquote>БД для загрузки.</div></div><div class=CToolTip id="tt10"><div class=CBuildVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td>LOAD_DB2 =</td></tr></table></blockquote>БД для загрузки #2.</div></div><div class=CToolTip id="tt11"><div class=CBuildVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td>LOAD_DB9 =</td></tr></table></blockquote>БД для загрузки #9.</div></div><div class=CToolTip id="tt12"><div class=CBuildVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>LOAD_OPERATORID := $(</td><td class=PParameter nowrap>ORACLE_OPERATOR</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Оператор для загрузки ( формат: operatorName[/password] ).</div></div><div class=CToolTip id="tt13"><div class=CBuildVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>LOCAL_DB_DIR = $(</td><td class=PType nowrap>call&nbsp;</td><td class=PParameter nowrap>getProductionDbName,</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$(LOAD_DB9)</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Имя подкаталога для загрузки локальных скриптов, относящихся к определенной БД. </div></div><div class=CToolTip id="tt14"><div class=CBuildVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class=PBeforeParameters nowrap>LOCAL_USER_DIR = $(</td><td class=PType nowrap>addsuffix&nbsp;</td><td class=PParameter nowrap>/$(call getUserName,$(LOAD_USERID9)),</td></tr><tr><td></td><td class=PType nowrap>&nbsp;</td><td class=PParameter nowrap>$(LOCAL_DB_DIR)</td><td class=PAfterParameters nowrap>)</td></tr></table></td></tr></table></blockquote>Расположение подкаталога для загрузки локальных скриптов, относящихся к определенному пользователю БД ( формат: dbDirName/userDirName). </div></div><div class=CToolTip id="tt15"><div class=CBuildFunction>Возвращает имя промышленной БД.</div></div><div class=CToolTip id="tt16"><div class=CGroup>Предусмотрена возможность загрузки ( установки) файлов с программными единицами и выполнение скриптов ( например, заполняющих стандартные справочники) в БД.</div></div><div class=CToolTip id="tt17"><div class=CFile>Показывает число инвалидных объектов и список инвалидных объекты в текущей схеме.</div></div><div class=CToolTip id="tt18"><div class=CFile>Проверяет наличие блокировок на указанные объекты и в случае их наличия выбрасывает исключение.</div></div><div class=CToolTip id="tt19"><div class=CFile>Компилирует инвалидные объекты в текущей схеме.</div></div><div class=CToolTip id="tt20"><div class=CFile>Сохраняет в БД информацию об установке модуля ( цель install).</div></div><div class=CToolTip id="tt21"><div class=CFile>Выполняет SQL-скрипт. </div></div><div class=CToolTip id="tt22"><div class=CBuildVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td>export OMS_SAVE_FILE_INSTALL_INFO ?= 1</td></tr></table></blockquote>Флаг сохранения информации в БД об устанавливаемых файлах. </div></div><div class=CToolTip id="tt23"><div class=CFile>Определяет табличное пространство для индексов и сохраняет его значение в макропеременной indexTablespace.</div></div><div class=CToolTip id="tt24"><div class=CGroup>Запуск oms-скритов ( например, oms-create-module) естественным образом выполнятеся в bash ( Cygwin Terminal):</div></div><div class=CToolTip id="tt25"><div class=CFile>Сохраняет в БД информацию об отмене установки версии модуля ( цель uninstall).</div></div><div class=CToolTip id="tt26"><div class=CBuildVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td>UNINSTALL_RESULT_VERSION =</td></tr></table></blockquote>Версия модуля, которая получается в результате отмены установки версии модуля. </div></div><div class=CToolTip id="tt27"><div class=CFile>Сохраняет в БД информацию о выдаче прав пользователю ( цель grant).</div></div><div class=CToolTip id="tt28"><div class=CBuildVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td>SQL_DEFINE =</td></tr></table></blockquote>Список значений для переменных SQL*Plus.</div></div><div class=CToolTip id="tt29"><div class=CFile>Устанавливает значение по умолчанию для макропеременной SQL*Plus.</div></div><div class=CToolTip id="tt30"><div class=CFile>Устанавливает значение по умолчанию для макропеременной SQL*Plus с учетом типа БД ( промышленная или тестовая).</div></div><div class=CToolTip id="tt31"><div class=CFile>Определяет имя доступного для пользователя линка к БД из указанного списка и использует его в качестве значения по умолчанию для макропеременной.</div></div><div class=CToolTip id="tt32"><div class=CFile>Определяет табличное пространство для полей типа LOB и сохраняет его значение в макропеременной lobTablespace.</div></div><div class=CToolTip id="tt33"><div class=CBuildVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td>SKIP_FILE_MASK :=</td></tr></table></blockquote>Маски для исключения выполнения ( загрузки) файлов в БД.</div></div><div class=CToolTip id="tt34"><div class=CBuildVariable><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td>FILE_MASK :=</td></tr></table></blockquote>Маски для выполнения ( загрузки) файлов в БД.</div></div><div class=CToolTip id="tt35"><div class=CFile>Удаляет SQL-тип принудительным ( &ldquo;force&rdquo;) образом, при этом зависящие от удаляемого типа объекты становятся инвалидными.</div></div><div class=CToolTip id="tt36"><div class=CFile>Собирает статистику по таблице или материализованному представлению текущего пользователя.</div></div><div class=CToolTip id="tt37"><div class=CFile>Обновляет материализованное представление и собирает по нему статистику.</div></div><div class=CToolTip id="tt38"><div class=CFile>Активирует пакетные задания, реализованные с помощью модуля Scheduler.</div></div><div class=CToolTip id="tt39"><div class=CFile>Деактивирует пакетные задания, реализованные с помощью модуля Scheduler. </div></div><div class=CToolTip id="tt40"><div class=CFile>Повторно активирует пакетные задания, реализованные с помощью модуля Scheduler. </div></div><div class=CToolTip id="tt41"><div class=CFile>Повторно активирует пакетные задания, реализованные с помощью модуля Scheduler, и ожидает запуска тех из них, которые должны начать выполняться. </div></div><div class=CToolTip id="tt42"><div class=CFile>Деактивирует пакетные задания, реализованные с помощью модуля Scheduler, и ожидает завершения сессий выполняющихся пакетных заданий. </div></div><div class=CToolTip id="tt43"><div class=CFile>Создает макро- и bind-переменные, используемые в SQL-скриптах, входящих в состав OMS, со значениями по умолчанию.</div></div><!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>