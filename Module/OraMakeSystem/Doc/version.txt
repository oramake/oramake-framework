title: Версии



group: X.X.X

[!] Fix incorrect value of NLS_LANG in DB/Makefile for new modules
    in case of "cp1251" encoding and without value of NLS_LANG in environment.

[!] Exclude error "moduleEncoding != "utf-8" : syntax error: operand expected"
    when executing "make set-version" using OraMakeSystem for Windows.

[*] Exclude warning "oms: getModuleEncoding: DB Makefile not found: ..." on
    module creation.



group: 2.2.1 ( 2020-09-22)

[+] Add UTF-8 encoding support for modules: add "encoding" option for
    "oms create-module" command (<oms::create-module>).

[!] Allow value of batchPattern in oms-*-batch scripts longer than 1000 chars
    (earlier error "ORA-06502: PL/SQL: numeric or value error: character
    string buffer too small" was raised).



group: 2.2.0 ( 2019-02-06)

[+] Add dropjava support. Use consequently current user, public and "-" for
    resolver in loadjava.

[+] Add COMMON_SCHENA option.

[+] Add clean operation into uninstall target.

[+] Add description of using password manager (with example for KeePass)
    (<Установка::Использование менеджера паролей>).

[+] Add in module local script (operatorLoginScript.sh) for registration operator
    (<Описание::Загрузка файлов в БД>).

[*] Stop using deprecated objects (v_sch_batch_root_log, sch_log) of Scheduler
    module.

[*] Create sequences before creating tables in DB/Install/Schema/Last/run.sql
    script, generated by "oms gen-schema-run" command.

[*] Eliminate warning
    "regexp escape sequence '*' is not a known regexp operator"
    when executing "make gendoc-menu" and using gawk version 5.0.0.

[!] Fix bug in calling get-password script when using installation for
    Windows and presence of Cygwin (in <connect.sh>).

Requirements:
- to perform operations on batches, you need to install Scheduler module
  (Module/Scheduler) version not lower than 4.6.0;



group: 2.1.0 ( 2018-05-30)

[+] Добавлена проверка возможности установки версии на основе данных об
    установленной версии модуля.

[*] При генерации спецификации (команда "oms gen-spec") для функций стало
    возможно использовать группу "Functions" (наряду с "Функции").

Требования:
- в БД должен быть установлен модуль ModuleInfo версии 1.3.0
  (либо проверку нужно отключать с помощью добавления
   " SKIP_FILE_MASK=*/oms-check-*-version.sql" в команду для установки);

Замечания:
- для проверки возможности установки версии OMS-файлы модуля должны быть
  обновлены до версии 2.1.0 ( см. <Описание::Обновление структуры модуля>),
  при этом для установки модуля должен использоваться OMS версии не ниже
  2.1.0;



group: 2.0.1 ( 2018-01-18)

[+] Добавлена возможность задания алиасов для промышленных БД
    (см. параметр <cspGetProductionDbName_AliasDbList> в файле database.mk).
    Это полезно, например, при использовании подключений к standby БД.

[!] Доработка скриптов <oms-gen-spec>, <oms-update-module>, <oms-gen-spec.awk>
    и <oms> для обновленной версии Cygwin 2.9.0 ( корректируется DOS-овский
    символ перевода каретки). Работа не изменится для старой версии Cygwin.

[!] При выполнении "oms create-module" для заполнения элемента initialPath
    (файл Doc/map.xml) восстановлено использование пути к корневому каталогу
    модуля в Subversion (а не пути к его подкаталогу Trunk, который ошибочно
    стал использоваться начиная с версии 2.0.0).



group: 2.0.0 ( 2017-11-27)

[+] Добавлена возможность установки для Windows при отсутствии Cygwin ( все
    необходимые утилиты включены в OraMakeSystem).

[+] Добавлена автотесты для OraMakeSystem
    ( см <Установка::Тестирование установки>).

[*] Данные OraMakeSystem ( шаблон программного модуля, информация по генерации
    меню) пересены из Config в новый каталог Data.
    Настройки OraMakeSystem после установки располагаются в /usr/local/etc/oms
    ( "C:\OraMakeSystem\usr\local\etc\oms" в случае установки для Windows)
    согласно общепринятому расположению настроек Unix-приложений
    ( <http://www.pathname.com/fhs/pub/fhs-2.3.html>).
    При первоначальной установке настройки по-умолчанию копируются из
    директории Config/Default. Для обратной совместимости с OMS-файлами модулей
    ( <Инициализация OMS>) предыдущих версий OMS при установке
    создаются/заменяются файлы local.mk и localCustom.mk в
    /usr/local/share/oms/Config.

[*] Скрипт oms-module переименован в <oms>,
    при этом:
    - для создания модуля стала использоваться команда "create-module" скрипта
      <oms>, ранее использовавшийся скрипт oms-create-module удален;
    - в скрипт <oms> добавлена команда "gen-spec" для генерации спецификации по
      телу plsql-объекта, которую следует использовать вместо вызова скрипта
      <oms-gen-spec> ( т.к. непосредственный вызов данного скрипта не
      поддерживается в случае установки для Windows);
    - в скрипт <oms> добавлена команда "update-module" для вызова скрипта
      <oms-update-module> ( т.к. непосредственный вызов данного скрипта не
      поддерживается в случае установки для Windows);

[*] Удалён файл Config/local.mk. Файлы Config/custom.sh и
    Config/localCustom.mk переименованы в Config/Default/connect.sh,
    Config/Default/database.mk, соответственно.

[*] В шаблоне нового модуля настроена загрузка скриптов создания представлений
    и триггеров ( файлы "*.vw" и "*.trg") из каталога DB/Install/Schema/Last.

[*] В шаблон спецификации и тела пакета нового модуля добавлены комментарии,
    необходимые для генерации спецификации по телу пакета командой "gen-spec"
    скрипта <oms>.

[*] Для файлов OraMakeSystem ( включая настроечные файлы в /usr/local/etc/oms)
    стала использоваться кодировка UTF-8 вместо CP1251, при этом для файлов
    прикладных модулей продолжает использоваться кодировка CP1251.

[*] Генерация html-документации по OraMakeSystem стала выполняться в каталоге
    Doc/Html/ru ( ранее Doc/AutoGen).

[!] При проверке наличия блокировок в скрипте <oms-check-lock.sql> перестали
    учитываться блокировки собственной сессии.

[!] Уточнение условия игнорирования применения патчей при обновлении
    локальных файлов ( oms-update-module, помимо содержание подстроки "FAIL"
    условие содержание подстроки "Skipping patch", "saving rejects").

[!] В случае если работа с репозиторием SVN происходила по протоколам
    HTTP или HTTPS при запуске oms-create-module выдавалась ошибка "sed:
    ... unterminated `s' command".



group: 1.8.0 ( 2016-05-24)

[+] При завершении установки добавлена компиляция инвалидных материализованных
    представлений текущей схемы ( скрипт <oms-compile-invalid.sql>).

[*] Настройки для определения имени промышленной БД ( используемые в
    make-функции <getProductionDbName>) перенесены в отдельный настроечный
    файл <Настройки сборки> ( Config/localCustom.mk), устанавливаемый локально
    при установке OMS ( не хранимый в прикладном модуле).

[*] Настроечные функции для определения используемого по умолчанию имени
    пользователя БД и настройки получения паролей перенесены в отдельный скрипт
    <custom.sh>.

[*] Вместо консольного клиента Subversion для Windows стал использоваться
    Subversion из состава Cygwin, в связи с чем требуется Cygwin версии
    1.7.9-1-2 ( см. <Установка::Требования>). При наличии ранее установленного
    консольного клиента Subversion для Windows версии 1.7.1 и Cygwin версии
    1.7.9-1 обновление Cygwin до версии 1.7.9-1-2 можно не выполнять.

[*] Номер ревизии и дата изменения для версии OMS стала выставляться в файлах
    при выполнеии команды <set-oms-version> на основе текущей даты ( без
    привязки к Subversion).



group: 1.7.3 ( 2014-07-09)

[+] Добавлена реализация параметров BATCH_MASK, SKIP_BATCH_MASK, позволяющих
    управлять списком загружаемых в БД пакетных заданий ( батчей).

[!] В цели test, использующей testScript ( cкрипты для тестирования),
    используется суффикс $(ru) вместо $(lu); таким образом, скрипт выполняется
    независимо от предыдущего выполнения ( ключ -B указывать не обязательно).

[!] По-умолчанию для новых модулей в цели install-batch, использующей
    installBatchTarget ( файлы для заливки батчей), используется суффикс $(lu)
    вместо $(ru); таким образом, по-умолчанию при отсутствии изменений файлов
    проливка батчей не производится. Для тех модулей, для которых была правка
    installBatchTarget, изменения Makefile при обновлении OraMakeSystem
    игнорируются. В случае если изменений installBatchTarget не было, к
    Makefile применяется патч.



group: 1.7.2 ( 2014-01-16 )

[+] Добавлен скрипт <oms-recreate-mview.sql> для пересоздания
    материализованного представления и сбора по нему статистики.



group: 1.7.1 ( 2013-12-12 )

[+] Добавлен скрипт <oms-unindexed-foreign-key.sql> для получения списка
    неиндексированных внешних ключей, которые следует проиндексировать


group: 1.7.0 ( 2013-08-30)

[+] Загрузка файлов данных пакетных заданий ( *.job.sql, */batch.xml,
    */batch-config.xml) с помощью вызовов PL/SQL-процедур модуля Scheduler
    ( см. <Описание::Загрузка батчей модуля Scheduler в БД>);

Требования:
- для загрузки батчей в БД должен быть установлен модуль Scheduler
  ( SVN Root: Oracle/Module/Scheduler) версии 4.0.0;


group: 1.6.5 ( 2013-02-11)

[*] Для исключения записей транслятора sqlj при заливке java source ( файлов
    .jav).

[+] Добавлен скрипт <oms-gen-spec> генерации спецификации пакета ( объектного типа)
    по данным тела ( и частично существующей спецификации).



group: 1.6.4 ( 2012-11-27)

[+] Добавлен make-параметр <PLSQL_WARNINGS> для возможности указания уровня
    предупреждений компилятора PLSQL.

[+] Добавлен скрипт <oms-drop-foreign-key> для удаления внешних ключей таблицы.

[+] Добавлена команда <oms-module::gen-schema-revert> генерации sql-скрипта по
    удалению объектов модуля из БД.

[+] Добавлена команда <oms-module::gen-schema-run> генерации sql-скрипта по
    установке объектов модуля в БД.

[+] Добавлена цель <test> для выполнения тестирования модуля.

[*] Перед выполнением SQL-скриптов из переменной окружения SQLPATH удаляются
    существующие значения путей, чтобы исключить влияние сторонних скриптов
    на результат выполнения ( например, скрипта login.sql, автоматически
    выполняемого SQL*Plus после подключения).

[!] Исправлена ошибка в функции проверки использования опций при запуске make
    <isMakeFlag> ( в результате ошибки при запуске make непосредственно в
    каталоге DB установка могла выполняться с игнорированием ошибок, хотя
    опция "-i" не указывалась в командной строке).



group: 1.6.3 ( 2012-05-18)

[*] Добавлено сохранение дополнительной информации об устанавливаемом в БД
    модуле: путь в Subversion, из которого были получены файлы модуля, и
    информация о версии файлов модуля ( в формате вывода утилиты svnversion).
    Сохраненные значения можно посмотреть соответственно в полях svn_path
    и svn_version_info представлений v_mod_% модуля ModuleInfo.

Требования:
- в БД должен быть установлен модуль ModuleInfo
  ( SVN Root: Oracle/Module/ModuleInfo) версии 1.1.0;



group: 1.6.2 ( 2012-03-29)

Другие изменения:

[+] Добавлен прикладной SQL-скрипт для удаления материализованных
    представлений: <oms-drop-mview.sql>.



group: 1.6.1 ( 2011-11-25)

[*] Для OMS стал использоваться Subversion 1.7.1 и Cygwin 1.7.9-1,
    поддерживающий Windows 7 ( см. <Установка::Требования>).

Замечания:
- после установки Subversion 1.7.1 необходимо выполнить обновление служебных
  файлов Subversion в ранее полученных из репозитария данных с помощью команды
  "svn upgrade". В случае, если в каталоге находится несколько подкаталогов
  с независимо полученными данными ( результат выполнения отдельных команд
  checkout), то можно выполнить обновление всех подкаталогов текущего каталога
  с помощью команды ( запускается в консоли Cygwin):
(code)

$ find -maxdepth 2 -type d -name .svn -prune -print -exec svn upgrade -q {}/.. \;

(end)

- после обновления Cygwin при установке модулей с версией OMS-файлов 1.6.0 или
  ниже возможно появление в подкаталоге DB или в текущем каталоге файла с
  именем "nul" ( при этом в большинстве случаев указанный файл автоматически
  удаляется скриптом <oms-load>). Для исключения появления таких файлов нужно
  обновить OMS-файлы модуля до версии 1.6.1;




group: 1.6.0 ( 2011-10-11)

[+] Добавлено сохранение информации об установке модулей в БД.

Требования:
- в БД должен быть установлен модуль ModuleInfo
  ( Root: Module/ModuleInfo) версии 1.0.0;
- в файле Doc/map.xml модуля должны быть указаны корректные значения для тэгов
  initialPath, path, version ( см. <Описание::Параметры модуля>);
- при выполнении команд по установке модуля ( цели <install>, <uninstall>,
  <grant>) для БД, в которой установлен модуль AccessOperator
  , необходимо указывать
  оператора, выполняющего команду ( параметр <LOAD_OPERATORID>), при этом
  у текущего пользователя БД должны быть права для регистрации в модуле
  AccessOperator ( на выполнение функции pkg_Operator.Login);
- при выполнении команд по выдаче прав пользователю ( цель <grant>) необходимо
  явно указывать пользователя, которому выдаются права, в параметре
  <TO_USERNAME>;
- при выполнении отмены установки конкретной версии модуля ( цель uninstall,
  параметр INSTALL_VERSION не равен Last), необходимо явно указывать
  версию модуля, получающуюся в БД после отмены установки, с помощью параметра
  <UNINSTALL_RESULT_VERSION>;

Замечания:
- для сохранения информации об установке OMS-файлы модуля должны быть обновлены
  до версии 1.6.0 ( см. <Описание::Обновление структуры модуля>), при этом для
  установки модуля должен использоваться OMS версии не ниже 1.6.0;
- основную информацию об установках модулей можно увидеть в представлениях
  v_mod_install_module, v_mod_install_version и v_mod_install_object модуля
  ModuleInfo ( более подробно см. в документации модуля);
- для выполнения вложенных SQL-скриптов желательно использовать скрипт
  <oms-run.sql> вместо встроенных команд "@" и "@@", т.к. это обеспечивает
  сохранение в БД информации о вызове скриптов ( и, в частности, влияет на
  данные представления v_mod_install_object);
- информация об устанавливавшихся объектах ( v_mod_install_object) формируется
  на основе имен выполняемых SQL-скриптов, которые должны соответствовать
  соглашениям ( см. <Файлы>);

Другие изменения:

[+] Добавлены прикладные SQL-скрипты для управления пакетными заданиями,
    реализованными с помощью модуля Scheduler: <oms-stop-batch.sql>
    для деактивации пакетных заданий с ожиданием завершения выполнения и
    <oms-resume-batch.sql> для повторного запуска пакетных заданий с ожиданием
    начала выполнения.

[+] В лог установки стала выводиться версия OMS-файлов модуля и версия
    установленного OMS ( на основе версии скрипта <oms-load>).

[*] уточнено комментирование объявления объектного типа, чтобы в автодокументации
    отображались прототипы элементов (см. <Комментарии::Объектный тип>)

[!] исправлена ошибка при которой каталоги вида
    Db/Install/Schema/<INSTALL_VERSION>/SourceDB/<LOCAL_DB_DIR>/Revert (и т.п.)
    попадали в автодокументацию



group: 1.5.4 ( 2011-08-02)

[*] Решение проблемы с игнорированием зависимостей для локальных скриптов, а
    также другие изменения.

Основные изменения:

[!] Для обеспечения учета зависимостей при загрузке предназначенных для
    конкретной БД файлов изменена make-функция <getProductionDbName>: для имени
    промышленной БД она стала возвращать точное ( с учетом регистра) имя
    промышленной БД, а в случае невозможности определить имя промышленной БД
    стала возвращать пустую строку ( ранее в обоих случаях возвращалось
    исходное имя БД, указанное в параметре функции).

[+] Добавлены make-функции <getLocalDbDir> и <getLocalUserDir> для
    использования при настройке загрузки предназначенных для конкретной БД
    файлов. Также добавлены параметры <LOCAL_DB_DIR> и <LOCAL_USER_DIR>,
    указывающие расположение локальных скриптов. В <Описание> добавлен пример
    использования параметра <LOCAL_DB_DIR> при настройке
    ( раздел "Загрузка файлов в БД"), в соглашении <Структура каталогов>
    указана схема расположения локальных скриптов.

[*] В случае ошибки компиляции при заливке представления ( скрипт *.vw),
    помимо предупреждения SQL*Plus, выводятся ошибки компиляции.

[+] Добавлен параметр FILE_MASK, позволяющий ограничивать файлы для выполнения
    ( противоположен SKIP_FILE_MASK).

[+] Реализовано сохранение информации об установке файлов прикладного модуля
    в БД ( требуется установка в БД модуля ModuleInfo
    ( Oracle/Module/ModuleInfo) версии 1.0.0).

[*] Для модулей стал использоваться map.xml версии 1.3: добавлены новые тэги
    <version> ( номер текущей версии модуля) и  <initialPath> ( первоначальный
    путь к корневому каталогу модуля с указанием номера правки, в которой он
    был создан). Реализовано автоматическое обновление формата map-файла до
    версии 1.3 при обновлении версии OMS-файлов модуля.

[*] В <oms-run.sql> стали игнорироваться начальные и конечные пробелы в пути
    к скрипту для выполнения, а в случае указания пустого значения перестало
    выводиться сообщение ": ...".

[*] В случае, если путь к выполняемому с помощью <oms-run.sql> скрипту
    начинается с префикса "./oms-", то считается, что скрипт входит в состав
    OMS и для его вызова явно подставляется полный путь к каталогу SQL-скриптов
    OMS, чтобы исключить вызов одноименного скрипта из текущего каталога
    SQL*Plus.

[*] Общий функционал, используемый в shell-скриптах, перенесен во внутренний
    скрипт <oms-common.sh>. В скриптах <oms-create-module>, <oms-load>,
    <oms-update-module> стал использоваться общий функционал из <oms-common.sh>
    вместо собственной реализации.

[+] Добавлен вывод отладочной информации скриптом <oms-load>, а также другими
    скриптами, использующими общий функционал из <oms-common.sh>. Объем
    отладочной информации регулируется make-параметром <OMS_DEBUG_LEVEL>, а
    в случае запуска без использования make опцией скрипта --debug-level или
    значением переменной окружения OMS_DEBUG_LEVEL ( по умолчанию вывод
    отладочной информации отключен).

[+] Добавлен скрипт <oms-module> для выполнения различных команд по управлению
    прикладным модулем. Реализована команда set-version для установки текущей
    версии модуля ( см. <oms-module::set-version>). Также добавлена цель
    <set-version> для make и обеспечена автоматическая установка версии
    модуля на основе значения параметра <INSTALL_VERSION> ( см. описание
    параметра <MODULE_VERSION>).

[*] Удалена устаревшая make-функция getProductionUser.

[*] Make-функции <getDbName> и <getUserName> ( а также <getUser>) стали
    возвращать результат в нижнем регистре.

[*] В скрипте <oms-set-indexTablespace.sql> в качестве индексного стало
    выбираться табличное пространство с именем <user>_INDEX_ASSM.

[+] Изменения настроек Natural Docs: добавлены ключевые слова для темы
    Function: ifunc, iproc ( внутренние функции / процедуры пакета / объектного
    типа; функции / процедуры, не объявляемые в спецификации).



group: 1.5.3 ( 2010-09-20)

[*] Переход на версию Natural Docs 1.5, генерация меню автодокументации.

Основные изменения:

[!] Исключен вывод сообщения об ошибке SQL*Plus вида
    "SP2-1506: START, @ or @@ command has no arguments" в случае игнорирования
    скриптом <oms-run.sql> выполнения SQL-скрипта, подпадающего под маску
    игнорируемых файлов <SKIP_FILE_MASK> ( сообщение об ошибке выводилось
    при использовании SQL*Plus версии 11.1.0.7.0, в версии 9.2.0.8.0 сообщение
    не выводилось).

[*] Основная ветвь разработки модуля OraMakeSystem перенесена из репозитория
Common ( svn://srvbl08/Common/Oracle/OraMakeSystem/Trunk)
в Oracle ( svn://srvbl08/Oracle/Module/OraMakeSystem/Trunk).

[*] Использована версия 1.5 NaturalDocs.

[*] Возможность документировать Shell-скрипты в рамках модуля
( см. <Комментарии::Shell-скрипт>).

[*] Добавлена цель <gendoc-menu>;
скрипт <oms-auto-doc> для генерации меню автодокументации
согласно принятым ранее соглашениям;
реализация цели <gendoc> с использованием скрипта
<oms-auto-doc>.

[*] Дополнена документация по разделу <Описание::Автодокументирование>
и разделу <Версия OMS-файлов> шаблона модуля.

[*] Дополнен файл install.txt ( Установка)
шаблона модуля: добавлены ссылки на раздел <Сборка>.

group: 1.5.2 ( 2010-06-28)

[*] Версия 1.5.2: поддержка установки пакетных заданий в БД, добавлен скрипт
    <oms-run.sql>, соместимость с новой версией Cygwin.

Основные изменения:

[+] В описание добавлен раздел <Описание::Прикладные SQL-скрипты>.

[+] Добавлены прикладные SQL-скрипты для управления пакетными заданиями,
    реализованными с помощью модуля Scheduler: <oms-activate-batch.sql>,
    <oms-deactivate-batch.sql>, <oms-reactivate-batch.sql>.

[+] Добавлен прикладной SQL-скрипт <oms-run.sql>, обеспечивающий вызов
    SQL-скриптов с выводом дополнительной информации и учетом параметра
    <SKIP_FILE_MASK>.

[+] В файл DB/Makefile добавлена переменная installAddonOptionList для списка
    дополнительных параметров установки модуля, обеспечивающая логирование
    непустых значений параметров.

[+] В common.mk добавлена цель <install-batch.oms> с шаблонной реализацией
    для возможности настройки загрузки пакетных заданий.

[+] Добавлена возможность явного указания в дополнительном параметре
    контрольного файла для SQL*Loader при загрузке файла данных скриптом
    <oms-load>.

[+] При загрузке данных с помощью SQL*Loader скрипт <oms-load> стал искать
    контрольный файл с соответствующим именем также в родительском каталоге ( в
    случае отсутствия его в каталоге файла данных).

[+] Добавлен скрипт <oms-init-var.sql> для обеспечения возможности
    использования SQL-скриптов, входящих в состав OMS, в интерактивной
    сессии SQL*Plus.

[+] В шаблон модуля добавлен стандaртный файл описания версий модуля и
    сделанных в них изменениях ( DB/Doc/version.txt) и соответствующий раздел
    в меню документации ( О модуле -> Версии).

[+] Добавлено требование по использованию последних пропатченных версий
    клиента Oracle ( см. О проекте -> Установка).

[*] Уточнена функция getLoadUser, использующаяся в common.mk для выделения
    пользователя для загрузки в неявных правилах, чтобы она корректно работала
    в правилах с дополнительно указанным расширением файлов, например
    "%.lst.$(ru): %.lst".

[*] В скрипте <oms-refresh-mview.sql> вызов скрипта сбора статистики
    <oms-gather-stats.sql> стал выполняться с помощью скрипта <oms-run.sql>
    для возможности отключения сбора статистики через параметр
    <SKIP_FILE_MASK>.

[*] Скрипт oms-environment.sql переименован в set-environment.sql и перемещен
    в каталог SqlScript/Internal.

[*] Расположение используемых при установке файлов данных OMS стало задаваться
    в make-переменной <OMS_INSTALL_DATA_DIR> ( по умолчанию
    /usr/local/share/oms).

[*] В скрипте <oms-load> каталог с собственными скриптами стал добавляться
    первым в SQLPATH ( чтобы значение <OMS_INSTALL_DATA_DIR> также влияло на
    вызываемые из пользовательских скриптов OMS-скрипты).

[*] Скриптом <oms-load> при загрузке файлов с помощью SQL*Plus стало
    устанавливаться значения макропеременной OMS_SCRIPT_DIR ( путь к каталогу
    с собственными SQL-скриптами).

[*] При установке значений макропеременных согласно параметру <SQL_DEFINE>
    стали игнорироваться начальные и конечные пробелы в части значения
    ( для решения проблемы с добавлением пробела в значение предыдущей
    переменной при использовании в make-файле команды SQL_DEFINE += ,...).

[*] В <Ошибки> описана проблема с постоянной загрузкой файла по цели load после
    изменения регистра символов в имени файла ( а также способ решения
    проблемы).

[*] Shell-скрипты стали использовать конец строки в стиле Unix вместо Dos ( в
    связи с изменениями в bash 3.2.49).

[*] Переменная сборки SQL_DEFINE сделана рекурсивно вычисляемой для возможности
    учета сделанных позже изменений значений используемых в ней переменных (
    например, при настройке установки конкретной версии в файле
    DB/Install/Config/*/define.mk).

[!] Применено обходное решение проблемы при загрузке данных скриптом <oms-load>
    из-за ошибки открытия лога загрузки утилитой SQL*Loader версии 11.x на
    некоторых хостах в случае, если путь к файлу лога содержал символ "@"
    ( см. <Ошибки>).

[!] Применено обходное решение проблемы с зависанием скрипта <oms-load> в
    некоторых случаях ( обычно при загрузке файла с ошибкой в Java-коде,
    причиной ошибки является зависание встроенной в bash команды read при
    наличии во вводе двух идущих подряд символов возврата каретки).

[!] Для проверки наличия опций вызова make стала использоваться функция сборки
    <isMakeFlag>. При этом исправлено неточное определение наличия флага -B
    ( --always-make) для генерации документации, а тажке обеспечена корректная
    работа с использованием make 3.81.



group: 1.5.1 ( 2010-03-26)

[*] Версия 1.5.1: добавлен скрипт <oms-set-lobTablespace.sql>, каталоги
    DB/Install/Schema/*/Revert исключены из автогенерации документации,
    другие незначительные изменения.

Основные изменения:

[!] Каталоги DB/Install/Schema/*/Revert исключены из автогенерации документации
    ( т.к. там находятся файлы из предыдущей версии модуля).

[+] Добавлен прикладной скрипт <oms-set-lobTablespace.sql> для определения
    табличного пространства для полей типа LOB ( автор доработки
    Станислав Чистяков).

[+] Объекты для проверки блокировок скриптом <oms-check-lock.sql> стало возможно
    указывать без стандартного расширения файла, при этом тип объекта не
    учитывается ( для упрощения ручной проверки блокировок).

[*] Уточнен комментарий и шаблон зависимости в файле зависимостей
    DB/loaddeps.mk.

[*] При выполнении SQL-скриптов отключен автоматический вывод значений
    bind-переменных ( настройка: set autoprint off).

[*] В скрипте <oms-load> поиск временных файлов для удаления стал выполняться
    средствами shell вместо использования find ( должно работать быстрее при
    отсутствии временных файлов).



group: 1.5.0 ( 2009-12-21)

[*] Версия 1.5.0: отмена установки модуля, прикладные SQL-скрипты,
    документирование объектных типов и последовательностей, исправлена ошибка
    подключения из-за символа "$" в пароле и другие ошибки.

Основные изменения:

[*] Проект переименован из "Oracle Make System" в OraMakeSystem.

[*] Переменная сборки checkLockTarget в шаблоне модуля переименована в
    installCheckLockTarget.

[+] В шаблон модуля в loadTarget добавлена загрузка объектных типов ( без
    модификации существующих модулей).

[+] Добавлено описание основных параметров установки в раздел "Установка"
    шаблона модуля.

[*] Списки тестовых и промышленных БД, используемые в функции сборки
    <getProductionDbName> для определения имени промышленной БД, вынесены в
    отдельные переменные для возможности настройки дополнительной трансляции
    имен на уровне модуля ( в файле DB/Makefile).

[+] В описание добавлен раздел <Описание::Обновление структуры модуля>.

[+] В описание добавлен раздел <Описание::Создание структуры модуля>.

[+] Добавлена возможность настройки отмены установки модуля в БД
    ( цель uninstall, см. <Отмена установки модуля в БД>).

[*] В имя файла лога установки/выдачи прав добавлено имя модуля.

[*] В начале лога стало выводиться имя и путь к модулю, получаемые из
    соответсвующих тэгов map-файла.

[*] Значение параметров GRANT_SCRIPT и TO_USERNAME стали выводиться в логе
    в случае выполнения цели grant.

[*] В имя файла лога выдачи прав добавлен номер версии из INSTALL_VERSION
    ( как для лога установки).

[*] В случае отсутствия скрипта для выполнения при выдаче прав ( цель grant)
    выводится сообщение об ошибке.

[*] Для загрузки объектов в БД при установке модуля в качестве подцели
    установки добавлена специальная цель install-load ( для единообразия и
    упрощения тестирования установки).

[*] В описание <Установка модуля в БД> добавлен пример использования директивы
    override для настройки пропуска загрузки некоторых файлов с помощью
    SKIP_FILE_MASK.

[+] Добавлен прикладной скрипт <oms-get-db-link.sql> для определения имени
    доступного для пользователя линка к БД из указанного списка.

[!] В скрипте <oms-check-lock.sql> стали учитываться только блокировки
    пользователя, соответствующего текущей схеме ( для исключения ошибок из-за
    наличи блокировок одноименных объектов в других схемах). Также стало
    возможно проверять блокировки другого пользователя с помощью
    предварительной смены текущей схемы.

[+] Добавлен прикладной скрипт <oms-refresh-mview.sql> для обновления и сбора
    статистики по материализованному представлению.

[+] Добавлен прикладной скрипт <oms-default-with-test.sql> для установки
    значения по умолчанию макропеременной SQL*Plus с учетом типа БД
    ( промышленная или тестовая).

[+] Добавлен прикладной скрипт <oms-default.sql> для установки значения по
    умолчанию макропеременной SQL*Plus.

[*] Документировано удаление пустых строк из вывода SQL*Plus и loadjava при
    загрузке скриптов ( для улучшения читабельности логов).

[!] Для SQL-скриптов и java-скриптов исключено удаление обратного сэша из
    вывода ( при выполнении через <oms-load>).

[*] В качестве признака завершения прототипа при документировании триггеров
    добавлено ключевое слово "declare" и удалено "as".

[+] Добавлен прикладной скрипт <oms-gather-stats.sql> для сбора статистки по
    таблице или материализованному представлению.

[+] Добавлена возможность использования в SQL-скриптах, запускаемых через
    <oms-load>, временных файлов, которые автоматически удаляются после
    завершения выполнения.

[*] Уточнено соглашение <Меню документации>: каталоги обновлении N.N.N
    показываются в меню в обратном порядке.

[!] При автоматической регистрации оператора стала игнорироваться ошибка
    отсутствия доступа к пакету pkg_Operator.

[!] В случае, если значение параметра для скрипта SQL*Plus превышает
    максимально допустимую длину макропеременной ( 239 символов), параметр
    передается с помощью bind-переменной ( максимальная длина 4000 символов).
    Исправление решает проблему с проверкой блокировок по большому числу
    объектов с помощью <oms-check-lock.sql>.

[!] При выполнении скрипта <oms-compile-invalid.sql> стали компилироваться
    инвалидные тела SQL-типов.

[+] Настроено документирование последовательностей ( ключевое слово для
    автодокументирования "sequence", см. <SQL-скрипт>).

[+] Добавлен прикладной скрипт <oms-drop-type.sql> для принудительного удаления
    SQL-типа.

[+] Дополнено соглашение <Файлы>: SQL для создания последовательности должен
    находиться в отдельном файле с именем, совпадающим с именем
    последовательности и с расширением "sqs".

[*] Загрузка данных при установке выделена в отдельный шаг ( цель
    install-data, вместо загрузки по цели load скриптов из каталога DB/Data).

[!] При загрузке возникала ошибка если в пароле содержался символ '$' ( решилось
    доработкой и экранированием в строке подключения, см. пример в начале
    раздела <Загрузка файлов в БД>).

[+] Настроено документирование объектных типов ( см. <Объектный тип>).

[+] В соглашение <Структура каталогов> добавлено описание скрипта revert.sql
    в DB/Install/Schema/*.

[+] В соглашение <Структура каталогов> добавлено описание каталога
    DB/Install/Data.

[+] Добавлены новые функции сборки, в т.ч. для изменения регистра символов и
    для настройки загрузки локальных объектов ( <getProductionDbName>).

[*] Файлы шаблона нового модуля документированы внутри OMS.

[!] Обеспечено присваивание пустых значений интерактивно запрашиваемым при
    загрузке через SQL*Plus переменным ( до 30 шт., ранее только для одной).



group: 1.4.1 ( 2009-02-06)
[*] Версия 1.4.1 ( определение индексного табличного пространства).

В скрипте <oms-set-indexTablespace.sql> в качестве индексного стало выбираться
табличное пространство с именем <user>_IDX.



group: 1.4.0 ( 2009-02-04)
[+] Версия 1.4.0 ( установка модуля в БД).

Добавлена возможность настройки установки модулей в БД ( см.
<Установка модуля в БД>) и выдачи прав ( см. <Выдача прав пользователям БД>).

Основные изменения:

[+] Число доступных для настройки схем загрузки ( LOAD_USERID*) увеличено с
    3 до 9.

[+] Реализована проверка блокировок при установке модуля.

[*] Добавлен скрипт oms-environment.sql для настройки среды выполнения в
    SQL*Plus при загрузке файлов.

[*] В случае ошибки при загрузке файла с помощью SQL*Loader стал выводиться
    путь к файлу лога загрузки.

[!] При проверке наличия сообщений об ошибках в выводе SQL*Plus стали
    учитываться сообщения на русском языке.

[*] Значение NLS_LANG стало задаваться в make-файле модуля.

[+] Добавлена цель grant для выдачи прав пользователям БД.

[*] В соглашение по структуре каталогов добавлено описание скрипта
    sys-privs.sql из Install/Grant, выдающего дополнительные системные права
    для установки и работы модуля ( ранее скрипт grant.sql из Install/Schema).

[!] Подключение к БД под пользователем SYS стало выполняться с добавлением
    'as sysdba' ( ранее возникала ошибка ORA-28009).

[+] Добавлена возможность передачи параметров загружаемым SQL-скриптам.

[+] Добавлена возможность задания значения переменных SQL*Plus при загрузке
    файлов с помощью параметра SQL_DEFINE.

[*] В make-файлах везде где возможно символ табуляции заменен на пробелы.

[+] Добавлена возможность продолжения выполнения SQL-скриптов после
    возникновения ошибки ( при указании опции --ignore-errors при вызове make).

[+] Добавлена возможность настройки вызова стандартных SQL-скриптов, входящих
    в состав OMS, в пользовательских модулях, а также вызов их скриптов,
    выполняемых через OMS.

[+] В качестве стандартных добавлены скрипты показа инвалидных объектов,
    перекомпиляции и определения имени табличного пространства для индексов
    ( для использования при установке модулей).

[+] Добавлена возможность задания специальных настроек make для выполнении
    установки ( файлы define.mk из каталога DB/Install/Config).

[*] В параметре LOAD_FILE_MASK стало возможно указывать список масок для
    ограничения загружаемых файлов.

[+] Добавлен параметр SKIP_FILE_MASK ( список масок аналогично LOAD_FILE_MASK)
    для возможности игнорирования выполнения ( загрузки) указанных файлов в БД.

[+] Реализовано сохранение лога установки модуля.

[+] Добавлена возможность выполнения скриптов в БД ( при каждом запуске).

[*] При обновлении версии OMS-файлов модуля стал выводиться результат
    обновления ( старая и новая ревизия файла common.mk модуля).

[*] В случае, если модуль сохранен в Subversion, при патче файлов во время
    обновления модуля оригинальная версия файла не сохраняется даже в случае
    ошибки.

[+] Добавлен стандaртный файл для описания установки модуля
    ( DB/Doc/install.txt) и соответствующий раздел в меню документации.

[+] Для выполнения установки модуля через make добавлена цель install.

[*] Настоечные файлы NaturalDocs нового модуля переведены в естественный для
    них формах ( unix-конец строки), чтобы исключить изменение этих файлов при
    генерации документации.

[!] Исправлена ошибка в корневом Makefile: если в название цели входила
    подстрока 'all' ( например 'install'), она не транслировалась на выполнение
    в подкаталог DB.

[+] В соглашениях по структуре каталогов и меню документации прописано
    расположение скриптов выдачи прав на использование модуля.

[!] Автозаполнение списка таблиц для map-файла при обновлении модуля стало
    работать в случае использования пробелов внутри документационного
    комментария "--table:" в исходных файлах.

Замечания:
- для установки в БД ( выполнении "make install") OMS-модулей, созданных в
  OMS версии 1.4.0, необходима установка на локальном компьютере OMS версии не
  ниже 1.4.0;
- для использования новых возможностей в существующих модулях, нужно, после
  установки новой версии OMS на локальном компьютере, обновить
  версию OMS-файлов, входящих в состав модуля, с помощью
  "make update-oms-version" ( для модулей, основанных на OMS версии ниже 1.3.0
  нужно воспользоваться скриптом <oms-update-module>);



group: 1.3.0 ( 2008-10-01)
[+] Версия 1.3.0 ( загрузка с помощью SQL*Loader, обновление версии OMS в существующих модулях).

Основные изменения:

[+] Обеспечена возможность обновления существующих OMS-модулей ( созданных через OMS начиная с правки 48, релиз 1.1.0) ( см. <oms-update-module>).

[+] Добавлена возможность использования внешней программы для получения паролей доступа при загрузке файлов в БД ( см. <oms-connect-info>).

[+] В шаблон спецификации пакета добавлен путь к корневому каталогу модуля в SVN ( "SVN root") и реализовано его автоматическое заполнение ( при наличии возможности) ( см. пример в <Спецификация PL/SQL-пакета>).

[+] Добавлена возможность ограничения загружаемых файлов с помощью указания при загрузке маски в параметре LOAD_FILE_MASK ( см. <Загрузка файлов в БД>).

[*] Java-исходники ( *.jav) стали документироваться как файлы языка Java.

[+] Добавлены соглашения по структуре каталогов, меню и комментариям, связанные с Java.

[+] Добавлена возможность загрузки данных с помощью SQL*Loader
    ( см. <oms-load>).

[+] Добавлена возможность загрузки Java-библиотек ( *.jar) с помощью loadjava
    ( см. <oms-load>).

[*] Для создаваемых/обновляемых модулей стал использоваться Map-файл в формате XML версии 1.2.

[*] Изменен вывод информации о версии в oms-скриптах.

[!] Исправлена ошибка, возникавшая при загрузке файлов в случае одновременного использования LOAD_USERID и LOAD_DB из-за неверного определения имени БД внутри DB/Makefile.

Замечания:
- для нормальной работы скриптов OMS на локальном компьютере должен быть
  установлен консольный клиент Subversion ( см. <Установка>);
- для загрузки в БД ( выполнении "make load") OMS-модулей, созданных через OMS
  версии 1.3.0, необходима установка на локальном компьютере OMS версии не ниже
  1.3.0 ( в связи с добавлением параметра --log-path-prefix в <oms-load>);



group: 1.2.0 ( 2008-04-01)
[+] Версия 1.2.0 ( регистрация в SVN, новые документируемые объекты, соглашение по меню документации).

[+] Расширены возможности скрипта oms-create-module:
- файлы могут добавляться в существующую структуру с игнорированием ( или переписыванием) имеющихся файлов;
- можно создавать структуру в текущем каталоге;
- создаваемые ( переписываемые) файлы могут автоматически добавляться в Subversion;



group: 1.1.3 ( 2007-11-09)
[*] Версия 1.1.3 ( незначительные доработки).



group: 1.1.2 ( 2007-09-21)
[+] Версия 1.1.2 ( расширен список документируемых расширений файлов и прототипов).



group: 1.1.1 ( 2007-08-21)
[!] Незначительные исправления.



group: 1.1.0 ( 2007-07-12)
[+] Базовая версия ( реализована загрузка файлов в БД и генерация документация).
