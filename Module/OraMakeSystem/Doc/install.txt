Title: Установка



group: Требования

- использование последних пропатченных версий клиента Oracle ( поддерживаются
  версии 11.2.0.2 ( рекомендуемая), а также 11.1.0.7 и 9.2.0.8)

  В более ранних версиях встречаются ошибки, позднее устраненные Oracle
  ( например, ошибки при загрузке файлов с помощью SQL*Loader).

  Проверка ( из командной строки)

(code)

$ sqlplus -V

SQL*Plus: Release 11.2.0.2.0 Production

(end)

  Также необходимо проверить наличие и версию утилиты SQL*Loader, которая
  используется для загрузки больших объемов данных из файлов.

(code)

$ sqlldr

SQL*Loader: Release 11.2.0.2.0 - Production on Fri Aug 18 16:08:37 2017

Copyright (c) 1982, 2009, Oracle and/or its affiliates.  All rights reserved.

(end)

- для использования возможностей интеграции с Subversion клиент Subversion
  должен быть установлен и путь его исполняемым файлам ( svn, svnversion)
  добавлен в переменную окружения PATH;

- для работы с сетевыми папками следует воспользоваться обходными решениями
  ( см. <Ошибки::Используемые обходные решения>);



group: Установка для Windows

Порядок установки:

- из командной строки в корневом каталоге модуля выполнить

(code)

> .\make install

(end)

Пример

(code)

> .\make install
installed into: "D:\OraMakeSystem"
( use "make install FORCE=1" to rewrite config files in "D:\OraMakeSystem\usr\local\etc\oms")

(end)

- добавить путь к каталогу установки ( указанному в "installed into: ...",
  обычно "D:\OraMakeSystem") в переменную окружения PATH
  ( Компьютер -> Свойства -> Дополнительные параметры системы ->
    Переменные среды)

Проверка корректности установки:

- в новом окне командной строки выполнить ( результат должен быть аналогичен
  указанному, номер версии может быть больше)

(code)

> make --oms-version
make.cmd (OMS) 2.0.0

> oms --version
oms (OMS) 2.0.0
...

(end)

- проверка доступности клиента Subversion ( если нужна интеграция с
  Subversion)

(code)

> oms; svn --version
oms: Subcommand not expected.
svn, version 1.9.4 (r1740329)
   compiled Apr 24 2016, 13:57:54 on x86-microsoft-windows
...

(end)

Замечания:
- при необходимости OraMakeSystem, установленный для Windows, можно
  использовать из Cygwin. Для этого в терминала Cygwin вместо "make" и "oms"
  следует указывать соответственно "make.cmd" и "oms.cmd", например:

(code)

$ oms.cmd create-module -d c:/tmp/TestModule TestModule
...

(end)

( при указании пути c:/tmp/TestModule используется слэш "/" вместо обратного
слэша "\", который необходимо экранировать; при использовании обратного слэша
путь пришлось бы указать в одинарных кавычках в виде
'c:\\\tmp\\\TestModule')



group: Установка для Cygwin

В Cygwin должны быть установлены пакеты:
- bash
- make
- coreutils
- findutils
- dos2unix
- gawk
- sed
- grep
- perl ( для генерации автодокументации, используется в NaturalDocs)

Порядок установки:

- в терминале Cygwin ( Cygwin Terminal) в корневом каталоге модуля выполнить

(code)

$ make install

(end)

Пример

(code)

$ make install
installed with prefix: /usr/local
( use "make install FORCE=1" to rewrite config files in /usr/local/etc/oms)

(end)

- добавить путь к подкаталогу bin префикса установки ( префикс указан в
  "installed with prefix: ...", обычно путь к подкаталогу bin это
  "/usr/local/bin") в переменную окружения PATH ( если он не был добавлен
  в нее ранее);

Проверка корректности установки:

- в новом окна терминала выполнить ( результат должен быть аналогичен
  указанному, номер версии может быть больше)

(code)

$ make --version
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
...

$ oms --version
oms (OMS) 2.0.0
...

(end)

- проверка доступности клиента Subversion ( если нужна интеграция с
  Subversion)

(code)

$ svn --version
svn, version 1.8.10 (r1615264)
   compiled Aug 29 2014, 15:28:58 on i686-pc-cygwin
...

(end)

Замечания:

- при необходимости скрипт <oms> может быть выполнен из командной строки
Windows ( в примерах ниже предполагается стандартная установка Cygwin в
"c:\cygwin"):

(code)

> set PATH=C:\cygwin\bin;%PATH%

> bash -c 'oms create-module -d "c:\tmp\TestModule" TestModule'

(end)

Вариант запуска с указанием всех путей будет выглядеть так

(code)

> set PATH=C:\cygwin\bin;%PATH%

> c:\cygwin\bin\bash -c '/usr/local/bin/oms create-module -d "c:\tmp\TestModule" TestModule'

(end)

В обоих случаях предварительно выполняется корректировка значения переменной
окружения PATH для исключения использования системной утилиты FIND вместо find
из состава Cygwin ( иначе при выполнении будет возникать ошибка
"FIND: Неправильный формат параметра").



group: Замечания по установке

Замечания:

- после установки может потребоваться отредактировать настроечные файлы
  ( database.mk ( <Настройки баз данных>) или <connect.sh>, расположены в
  "D:\OraMakeSystem\usr\local\etc\oms" в случае стандартной установки для
  Windows либо "C:\cygwin\usr\local\etc\oms" при стандартной установке для
  Cygwin). Версии по-умолчанию данных файлов копируются при установке, если они
  не существовали. Настроечные файлы могут быть заменены в случае использования
  флага FORCE=1 при выполнении "make install".



Требования к БД при использовании:
- в БД должен быть установлен модуль ModuleInfo для сохранения информации об
  установке модулей;
- для возможности загрузки батчей в БД нужно установить модуль Scheduler;
