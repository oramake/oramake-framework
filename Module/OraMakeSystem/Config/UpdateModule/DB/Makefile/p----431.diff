Index: Config/NewModule/DB/Makefile
===================================================================
--- Config/NewModule/DB/Makefile	(revision 431)
+++ Config/NewModule/DB/Makefile	(working copy)
@@ -3,6 +3,9 @@
 # Каталог сборки OMS-модуля
 omsModuleDir = OmsModule
 
+# Включаем стандартные функции сборки проекта
+include $(omsModuleDir)/init.mk
+
 # Абстрактные цели
 .PHONY:                 \
   all                   \
@@ -88,89 +91,129 @@
 # group: Загрузка файлов в БД
 #
 
-# Функции для разбора строки подключения.
-
-# Выделяет имя пользователя из loadUserId.
-getUserName  = $(firstword $(subst /, ,$(firstword $(subst @, ,$(loadUserId)))))
-
-# Выделяет имя БД из loadUserId
-getDbName    = \
-  $(word \
-    $(words $(subst @, ,$(loadUserId)x)) \
-    , $(subst @, ,$(loadUserId)) \
-  )
-
-# Выделяет пользователя ( без пароля) из loadUserId.
-getUser      = $(getUserName)@$(getDbName)
-
-
 # build var: NLS_LANG
 # Настройки локали, используемые при загрузке файлов в БД.
 export NLS_LANG = AMERICAN_CIS.CL8MSWIN1251
 
 # build var: LOAD_DB
 # БД для загрузки.
-LOAD_DB      =
+LOAD_DB =
 
 # build var: LOAD_USERID
-# Пользователь для загрузки ( формат: [userName[/password]][@dbName] ).
+# Пользователь для загрузки ( формат: [userName[/password]][@dbName]).
 #
 # Имеет приоритет в случае противоречия с <LOAD_DB>.
 LOAD_USERID =
 
-# Устанавливаем LOAD_DB, если имя БД заданo в LOAD_USERID
-ifneq ($(LOAD_USERID),)
-loadUserId          := $(LOAD_USERID)
-loadDb              := $(getDbName)
-ifneq ($(loadDb),)
-ifneq ($(loadDb),$(loadUserId))
-override LOAD_DB    := $(loadDb)
-endif
-endif
-endif
+# Корректируем БД для загрузки по пользователю для загрузки.
+override LOAD_DB := $(call getDbName,$(LOAD_USERID),$(LOAD_DB))
 
 # build var: LOAD_DB2
-# Вторая БД для загрузки.
-LOAD_DB2    =
+# БД для загрузки #2.
+LOAD_DB2 =
 
 # build var: LOAD_USERID2
-# Второй пользователь для загрузки ( формат: [userName[/password]][@dbName] ).
+# Пользователь для загрузки #2 ( формат: [userName[/password]][@dbName]).
 #
 # Имеет приоритет в случае противоречия с <LOAD_DB2>.
 LOAD_USERID2 =
 
-# Устанавливаем LOAD_DB2, если имя БД заданo в LOAD_USERID2
-ifneq ($(LOAD_USERID2),)
-loadUserId          := $(LOAD_USERID2)
-loadDb              := $(getDbName)
-ifneq ($(loadDb),)
-ifneq ($(loadDb),$(loadUserId))
-override LOAD_DB2    := $(loadDb)
-endif
-endif
-endif
+# Корректируем БД для загрузки по пользователю для загрузки.
+override LOAD_DB2 := $(call getDbName,$(LOAD_USERID2),$(LOAD_DB2))
 
 # build var: LOAD_DB3
-# Третья БД для загрузки.
-LOAD_DB3    =
+# БД для загрузки #3.
+LOAD_DB3 =
 
 # build var: LOAD_USERID3
-# Третий пользователь для загрузки ( формат: [userName[/password]][@dbName] ).
+# Пользователь для загрузки #3 ( формат: [userName[/password]][@dbName]).
 #
 # Имеет приоритет в случае противоречия с <LOAD_DB3>.
 LOAD_USERID3 =
 
-# Устанавливаем LOAD_DB3, если имя БД заданo в LOAD_USERID3
-ifneq ($(LOAD_USERID3),)
-loadUserId          := $(LOAD_USERID3)
-loadDb              := $(getDbName)
-ifneq ($(loadDb),)
-ifneq ($(loadDb),$(loadUserId))
-override LOAD_DB3    := $(loadDb)
-endif
-endif
-endif
+# Корректируем БД для загрузки по пользователю для загрузки.
+override LOAD_DB3 := $(call getDbName,$(LOAD_USERID3),$(LOAD_DB3))
 
+# build var: LOAD_DB4
+# БД для загрузки #4.
+LOAD_DB4 =
+
+# build var: LOAD_USERID4
+# Пользователь для загрузки #4 ( формат: [userName[/password]][@dbName]).
+#
+# Имеет приоритет в случае противоречия с <LOAD_DB4>.
+LOAD_USERID4 =
+
+# Корректируем БД для загрузки по пользователю для загрузки.
+override LOAD_DB4 := $(call getDbName,$(LOAD_USERID4),$(LOAD_DB4))
+
+# build var: LOAD_DB5
+# БД для загрузки #5.
+LOAD_DB5 =
+
+# build var: LOAD_USERID5
+# Пользователь для загрузки #5 ( формат: [userName[/password]][@dbName]).
+#
+# Имеет приоритет в случае противоречия с <LOAD_DB5>.
+LOAD_USERID5 =
+
+# Корректируем БД для загрузки по пользователю для загрузки.
+override LOAD_DB5 := $(call getDbName,$(LOAD_USERID5),$(LOAD_DB5))
+
+# build var: LOAD_DB6
+# БД для загрузки #6.
+LOAD_DB6 =
+
+# build var: LOAD_USERID6
+# Пользователь для загрузки #6 ( формат: [userName[/password]][@dbName]).
+#
+# Имеет приоритет в случае противоречия с <LOAD_DB6>.
+LOAD_USERID6 =
+
+# Корректируем БД для загрузки по пользователю для загрузки.
+override LOAD_DB6 := $(call getDbName,$(LOAD_USERID6),$(LOAD_DB6))
+
+# build var: LOAD_DB7
+# БД для загрузки #7.
+LOAD_DB7 =
+
+# build var: LOAD_USERID7
+# Пользователь для загрузки #7 ( формат: [userName[/password]][@dbName]).
+#
+# Имеет приоритет в случае противоречия с <LOAD_DB7>.
+LOAD_USERID7 =
+
+# Корректируем БД для загрузки по пользователю для загрузки.
+override LOAD_DB7 := $(call getDbName,$(LOAD_USERID7),$(LOAD_DB7))
+
+# build var: LOAD_DB8
+# БД для загрузки #8.
+LOAD_DB8 =
+
+# build var: LOAD_USERID8
+# Пользователь для загрузки #8 ( формат: [userName[/password]][@dbName]).
+#
+# Имеет приоритет в случае противоречия с <LOAD_DB8>.
+LOAD_USERID8 =
+
+# Корректируем БД для загрузки по пользователю для загрузки.
+override LOAD_DB8 := $(call getDbName,$(LOAD_USERID8),$(LOAD_DB8))
+
+# build var: LOAD_DB9
+# БД для загрузки #9.
+LOAD_DB9 =
+
+# build var: LOAD_USERID9
+# Пользователь для загрузки #9 ( формат: [userName[/password]][@dbName]).
+#
+# Имеет приоритет в случае противоречия с <LOAD_DB9>.
+LOAD_USERID9 =
+
+# Корректируем БД для загрузки по пользователю для загрузки.
+override LOAD_DB9 := $(call getDbName,$(LOAD_USERID9),$(LOAD_DB9))
+
+
+
 # build var: LOAD_OPERATORID
 # Оператор для загрузки ( формат: operatorName[/password] ).
 #
